import{r as l,j as e,a as T,_ as E,L as re,U as ie}from"./index-CTj0YJ1Y.js";import{C as oe}from"./ContentHeader-BKBEC5nn.js";import{S as ne}from"./Sidebar-Skhp2Oyn.js";import{l as de}from"./index-7QzgHR_8.js";import{P as A,F as O,d as ce,i as me}from"./index-BcSmDaVd.js";import{P as he,t as ue,a as xe,b,c as pe,d as fe,e as g}from"./PrintRecord-hdsO7YzY.js";import{m as V,a as U,b as H,c as L}from"./chunk-P2T5LMDM-C4paV9zX.js";import{m as z}from"./chunk-LT4XONRR-BdpKuiey.js";import{s as I,l as i}from"./chunk-CEHIK4GH-UxlawHOX.js";import{b as h}from"./chunk-DBLREEYE-CvKmoq8j.js";import{I as je,a as be,D as ge}from"./importSentence-BGQ5RuNM.js";import{t as Y}from"./profile-D-WrxDmp.js";import"./useOverlayTriggerState-D10URHoC.js";import"./useDialog-CcArMXMb.js";import"./useLabels-BZbr8wBC.js";import"./VisuallyHidden-D98cUbQE.js";import"./Overlay-CRNQS_wT.js";import"./chunk-KBN3H6OQ-BEvrxpds.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useField-Bu7ocRcs.js";import"./chunk-CIZQCQPA-C6GiROrz.js";import"./useFormReset-ZZAutucB.js";import"./chunk-GQQM5TNQ-DyoA3HMu.js";import"./chunk-ATAY3LCU-D6kuO9_M.js";import"./extends-CF3RwP-h.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";const Ie=({show:u,onHide:n})=>{const m=()=>{n(),window.location.reload()};return e.jsx(V,{isOpen:u,onClose:n,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(z,{children:[e.jsx(U,{id:"contained-modal-title-vcenter",children:"Activity Created Successfully!"}),e.jsx(H,{children:e.jsx("p",{children:"You have created an activity for your students!"})}),e.jsx(L,{children:e.jsx(h,{color:"primary",onClick:m,children:"Close"})})]})})},J=({show:u,handleClose:n,userId:m,section:C})=>{const[M,y]=l.useState(!1),[N,_]=l.useState([]),[R,D]=l.useState([]),[v,G]=l.useState([]),[s,x]=l.useState({Period:"",Type:"",Title:"",Item1:"",Item2:"",Item3:"",Item4:"",Item5:"",Item6:"",Item7:"",Item8:"",Item9:"",Item10:""}),[d,k]=l.useState({}),S=()=>{T.get("/api/getImportWord").then(t=>{_(t.data)}).catch(t=>console.log(t))},W=()=>{T.get("/api/getSentence").then(t=>{D(t.data)}).catch(t=>console.log(t))};l.useEffect(()=>{S(),W()},[]),l.useEffect(()=>{if(s.Type&&s.Type!=="Pagbabasa"){const t=N.filter(a=>a.Type===s.Type);G(t)}else G([])},[s.Type,N]);const $=(t,a)=>{const o=v.find(F=>F.ItemCode===a);x({...s,[t]:o?o.ItemCode:""})},q=()=>{let t=!0,a={};if(s.Period||(a.Period="Grading Period is required.",t=!1),s.Type||(a.Type="Type of Assessment is required.",t=!1),s.Type==="Pagbabasa"&&!s.Title&&(a.Title="Title is required for Pagbabasa.",t=!1),s.Type!=="Pagbabasa")for(let o=1;o<=10;o++)s[`Item${o}`]||(a[`Item${o}`]=`Item ${o} is required.`,t=!1);return k(a),t},w=async t=>{if(t.preventDefault(),!q()){E.error("Please fill out all required fields.");return}try{const a=await T.post("/api/submitAssessment",{UserID:m,Section:C,Period:s.Period,Type:s.Type,Title:s.Title,Item1:s.Item1,Item2:s.Item2,Item3:s.Item3,Item4:s.Item4,Item5:s.Item5,Item6:s.Item6,Item7:s.Item7,Item8:s.Item8,Item9:s.Item9,Item10:s.Item10});a.data.error?E.error(a.data.error):(x({Period:"",Type:"",Title:"",Item1:"",Item2:"",Item3:"",Item4:"",Item5:"",Item6:"",Item7:"",Item8:"",Item9:"",Item10:""}),E.success("Created Activity Successfully."),y(!0),n())}catch(a){console.log(a),E.error("Failed to create the activity. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx(V,{isOpen:u,onClose:n,size:"lg","aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,placement:"center",scrollBehavior:"inside",children:e.jsxs(z,{className:"w-full md:w-[50vw] max-w-full max-h-[80vh] overflow-y-auto bg-white p-4 rounded-lg",children:[e.jsx(U,{id:"contained-modal-title-vcenter",className:"text-lg font-bold",children:"Create New Activity"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs(H,{children:[e.jsxs(I,{labelPlacement:"outside",label:"Grading Period",placeholder:"Select Grading Period",value:s.Period,onChange:t=>x({...s,Period:t.target.value}),className:"w-full my-2",isInvalid:!!d.Period,errorMessage:d.Period,children:[e.jsx(i,{children:"Grading Period 1"},"1"),e.jsx(i,{children:"Grading Period 2"},"2"),e.jsx(i,{children:"Grading Period 3"},"3"),e.jsx(i,{children:"Grading Period 4"},"4")]}),e.jsxs(I,{labelPlacement:"outside",label:"Type of Assessment",placeholder:"Select Type of Assessment:",value:s.Type,onChange:t=>x({...s,Type:t.target.value}),className:"w-full my-2",isInvalid:!!d.Type,errorMessage:d.Type,children:[e.jsx(i,{children:"Assessment 1: Pagbabaybay Tunog at Letra"},"Pagbabaybay"),e.jsx(i,{children:"Assessment 2: Pantig"},"Pantig"),e.jsx(i,{children:"Assessment 3: Salita"},"Salita"),e.jsx(i,{children:"Assessment 4: Pagbabasa"},"Pagbabasa")]}),s.Type==="Pagbabasa"&&e.jsx(I,{labelPlacement:"outside",label:"Title",value:s.Title,placeholder:"Select a Title:",onChange:t=>x({...s,Title:t.target.value}),className:"w-full my-2",isInvalid:!!d.Title,errorMessage:d.Title,children:R.map(t=>e.jsx(i,{value:t.Title,children:t.Title},t.Title))}),s.Type!=="Pagbabasa"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(10)].map((t,a)=>e.jsx(I,{labelPlacement:"outside",label:`Item ${a+1}`,value:s[`Item${a+1}`],placeholder:"Select a word:",onChange:o=>$(`Item${a+1}`,o.target.value),className:"w-full my-2",isInvalid:!!d[`Item${a+1}`],errorMessage:d[`Item${a+1}`],children:v.map(o=>e.jsx(i,{value:o.Word,children:o.Word},o.ItemCode))},`Item${a+1}`))})]}),e.jsxs(L,{className:"flex justify-end space-x-2",children:[e.jsx(h,{color:"danger",variant:"light",onClick:n,children:"Close"}),e.jsx(h,{color:"primary",type:"submit",children:"Create Activity"})]})]})]})}),e.jsx(Ie,{show:M,onHide:()=>y(!1)})]})};J.propTypes={show:A.bool.isRequired,handleClose:A.func.isRequired};const Q=({show:u,onHide:n,activity:m})=>e.jsx(V,{isOpen:u,onClose:n,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(z,{children:[e.jsx(U,{className:"flex flex-col",id:"edit-user-modal-title",children:"View Assessment Information"}),e.jsx(H,{children:e.jsx("p",{children:"Do you want to view the assessment of the student selected?"})}),e.jsxs(L,{children:[e.jsx(h,{color:"danger",variant:"light",onClick:n,children:"Cancel"}),e.jsx(re,{to:`/ViewActivityAssessment/${m==null?void 0:m.ActivityCode}`,children:e.jsx(h,{color:"primary",children:"View"})})]})]})});Q.propTypes={show:A.bool.isRequired,onHide:A.func.isRequired,activity:A.object};const ye=()=>{const[u,n]=l.useState(!1),[m,C]=l.useState(!1),[M,y]=l.useState(!1),[N,_]=l.useState(!1),[R,D]=l.useState(!1),[v,G]=l.useState(null),[s,x]=l.useState([]),[d,k]=l.useState([]),[S,W]=l.useState(""),[$,q]=l.useState(!1),[w,t]=l.useState(""),[a,o]=l.useState(""),[F,X]=l.useState(""),{user:P}=l.useContext(ie),Z=()=>n(!1),ee=()=>n(!0),B=l.useRef(null),{onDownload:se}=de.useDownloadExcel({currentTableRef:B.current,filename:"Assessment_List_Report",sheet:"Assessment",data:s.map(({_id:r,...c})=>c)});l.useEffect(()=>{P&&P.UserID&&T.get(`/api/getTeacher/${P.UserID}`).then(r=>{o(r.data.Section),X(r.data.UserID)}).catch(r=>console.log(r))},[P]),l.useEffect(()=>{a&&T.get("/api/getAssessments").then(r=>{const c=r.data.filter(p=>p.UserID===F);x(c),k(c)}).catch(r=>console.log(r))},[a]);const te=()=>{D(!0)},ae=()=>{C(!0)},le=()=>{_(!0)},K=(r,c)=>{const p=r.target.value;c==="period"?W(p):c==="type"&&t(p);let f=s;p!==""&&(f=s.filter(j=>c==="period"?j.Period===p:j.Type===p)),S&&c==="type"&&(f=f.filter(j=>j.Period===S)),w&&c==="period"&&(f=f.filter(j=>j.Type===w)),k(f)};return e.jsxs("div",{className:"px-9",children:[e.jsx(he,{show:R,onHide:()=>D(!1),print:se}),e.jsx(J,{show:u,handleClose:Z,userId:P.UserID,section:a}),e.jsx(je,{show:m,onHide:()=>C(!1)}),e.jsx(be,{show:N,onHide:()=>_(!1)}),e.jsx(Q,{show:M,activity:v,onHide:()=>y(!1)}),e.jsx(ge,{show:$,activity:v,onHide:()=>q(!1)}),e.jsxs("div",{className:"content-title-header",children:[e.jsxs("div",{children:["Manage Student Assessment",e.jsx(Y,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Assessment Table"}),e.jsx("div",{className:"text-tiny",children:"This function will view the assessment of the students in each section."})]}),children:e.jsx(O,{icon:ce,size:"1x",className:"help-icon"})})]}),e.jsx("div",{className:"generate-report",children:e.jsx(Y,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Print"}),e.jsx("div",{className:"text-tiny",children:"Generate report/Print table"})]}),children:e.jsx(O,{icon:me,size:"1x",className:"print-icon",onClick:te})})})]}),e.jsx("div",{className:"content-container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card mt-1 border-0",children:[e.jsxs("div",{className:"list-header-drop-score",children:[e.jsxs("div",{className:"flex flex-row gap-5 justify-start w-[100%]",children:[e.jsxs(I,{labelPlacement:"outside",label:"Grading Period",variant:"bordered",placeholder:"Select Grading Period",className:"bg-transparent w-[20%]",onChange:r=>K(r,"period"),value:S,children:[e.jsx(i,{children:"All"},""),e.jsx(i,{children:"Grading Period 1"},"1"),e.jsx(i,{children:"Grading Period 2"},"2"),e.jsx(i,{children:"Grading Period 3"},"3"),e.jsx(i,{children:"Grading Period 4"},"4")]}),e.jsxs(I,{className:"w-[20%]",labelPlacement:"outside",label:"Assessment",placeholder:"Select Type of Assessment",variant:"bordered",onChange:r=>K(r,"type"),value:w,children:[e.jsx(i,{children:"All"},""),e.jsx(i,{children:"Assessment 1"},"Pagbabaybay"),e.jsx(i,{children:"Assessment 2"},"Pantig"),e.jsx(i,{children:"Assessment 3"},"Salita"),e.jsx(i,{children:"Assessment 4"},"Pagbabasa")]})]}),e.jsxs("div",{className:"flex flex-row gap-5 justify-end mt-3",children:[e.jsx(h,{auto:!0,onClick:le,color:"default",children:"Import Sentence"}),e.jsx(h,{auto:!0,onClick:ae,color:"default",children:"Import Word"}),e.jsx(h,{auto:!0,onClick:ee,color:"primary",children:"Create Activity"})]})]}),e.jsx("div",{className:"card-body scrollable-table scrollable-container",children:e.jsxs(ue,{"aria-label":"Assessment Table",ref:B,removeWrapper:!0,color:"primary",selectionMode:"single",children:[e.jsxs(xe,{children:[e.jsx(b,{children:"Activity Code"}),e.jsx(b,{children:"Grading Period"}),e.jsx(b,{children:"Section"}),e.jsx(b,{children:"Type"}),e.jsx(b,{children:"Status"}),e.jsx(b,{className:"text-center",children:"Actions"})]}),e.jsx(pe,{emptyContent:"No rows to display.",children:d.map(r=>e.jsxs(fe,{children:[e.jsx(g,{children:r.ActivityCode}),e.jsx(g,{children:r.Period}),e.jsx(g,{children:r.Section}),e.jsx(g,{children:r.Type}),e.jsx(g,{children:r.Assessment}),e.jsx(g,{className:"text-center",children:e.jsx("div",{className:"table-buttons",children:e.jsx(h,{color:"primary",onClick:()=>{G(r),y(!0)},children:"View"})})})]},r._id))})]})})]})})})})]})},Oe=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(ne,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(oe,{}),e.jsx(ye,{})]})]});export{Oe as default};
