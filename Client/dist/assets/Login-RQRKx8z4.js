import{r as n,U as y,u as w,R as N,j as e,L as v,a as I,n as o}from"./index-A7ZaZ4u8.js";import{F as c,f as S,a as C,b as E}from"./index-CaxXx6Tv.js";import{i as d}from"./chunk-GQQM5TNQ-X-hgkQha.js";import{c as A}from"./chunk-KBN3H6OQ-3zZ-S7EY.js";import{b as u}from"./chunk-DBLREEYE-D8P85AZ_.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useFormReset-B5tvkxkm.js";import"./useField-D5dkv_Ew.js";import"./useLabels-BIMkgeY8.js";import"./chunk-CIZQCQPA-DsJBGEOY.js";import"./VisuallyHidden-ioMxcth_.js";const F="/assets/Login_baybay-C01TVwar.png",k="/assets/login_blue-Dt1pCWI8.png",J=()=>{const{setUser:x}=n.useContext(y),[i,f]=n.useState(!1),t=w(),[a,m]=n.useState({email:"",password:""}),g=()=>f(!i),[p,b]=N.useState(!1),h=()=>{t("/register")},j=async r=>{r.preventDefault();try{const l=await I.post("/api/login",{email:a.email,password:a.password});if(l&&l.data){const s=l.data;s.error?s.data&&s.data.userId?(localStorage.setItem("userId",s.data.userId),o.error(s.error),t("/verify-email")):o.error(s.error):(localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(s.user)),x(s.user),o.success("Login Successful."),s.role==="Parent"?t("/parentDashboard"):s.role==="Teacher"?t("/teacherDashboard"):s.role==="Admin"&&t("/AdminDashboard"))}else o.error("Invalid server response. Please try again.")}catch(l){console.error(l),o.error("Error occurred while logging in.")}};return e.jsxs("div",{className:"flex flex-col md:flex-row w-full h-screen",children:[e.jsx("div",{className:"w-full md:w-[65%] h-full flex items-center justify-center bg-[#FAFAFA]",children:e.jsx("img",{src:F,className:"w-full h-full object-fill",alt:"Learning Platform"})}),e.jsxs("div",{className:"relative w-full md:w-[35%] h-full flex items-center justify-center bg-[#FAFAFA]",children:[e.jsx("img",{src:k,className:"absolute inset-0 w-full h-full object-fill opacity-50",alt:"Background Image"}),e.jsx("div",{className:"relative z-10 w-full max-w-md bg-white shadow-lg rounded-lg p-8 opacity-90",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-lg font-semibold text-center text-[#060606] mb-4",children:"Taytay Elementary School Baybay Salita"}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Login"}),e.jsx("p",{className:"text-sm mb-2",children:"Welcome Back! Please enter your details."})]}),e.jsxs("form",{onSubmit:j,className:"flex flex-col",children:[e.jsx(d,{type:"text",label:"Email",variant:"bordered",placeholder:"Enter your email",className:"mb-4",errorMessage:"Please enter a valid email.",value:a.email,onChange:r=>m({...a,email:r.target.value}),endContent:e.jsx(c,{icon:S,className:"text-2xl text-default-400"})}),e.jsx(d,{label:"Password",placeholder:"Enter your password",variant:"bordered",className:"mb-4",value:a.password,onChange:r=>m({...a,password:r.target.value}),endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:g,"aria-label":"toggle password visibility",children:i?e.jsx(c,{icon:C,className:"text-2xl text-default-400"}):e.jsx(c,{icon:E,className:"text-2xl text-default-400"})}),type:i?"text":"password"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(A,{className:"mr-2",isSelected:p,onValueChange:b,children:e.jsx("p",{className:"text-sm",children:"Remember me"})}),e.jsx(v,{to:"/forgotPassword",className:"text-sm font-medium cursor-pointer underline underline-offset-2",children:"Forgot Password?"})]}),e.jsx(u,{className:"my-2",size:"lg",radius:"md",color:"primary",type:"submit",children:"Login"}),e.jsx(u,{className:"my-2",size:"lg",radius:"md",onClick:h,children:"Register"})]})]})})]})]})};export{J as default};
