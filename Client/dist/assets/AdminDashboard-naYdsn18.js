import{r as o,j as s}from"./react-BCcS7c0c.js";import{A as _}from"./AdminSidebar-hE8um79y.js";import{l as z}from"./react-export-table-to-excel-CDdXcfrC.js";import{F as c,d as U,e as H,g as J,h as $}from"./@fortawesome-BVdY808A.js";import{a as l}from"./axios-CCb-kr4I.js";import{t as M}from"./@nextui-org-CLkIIHEi.js";import{P as V,B as j}from"./@mui-FRXoS1OQ.js";import{C as q}from"./ContentHeader-B2Ht1HTi.js";import"./@babel-m2JXyA6a.js";import"./react-router-dom-Dk6_dLEo.js";import"./react-dom-rv-KAOpM.js";import"./scheduler-CzFDRTuY.js";import"./react-router-MkLRJz4d.js";import"./@remix-run-BOUEh3jQ.js";import"./profile-Berhznzr.js";import"./index-ByxnD8YG.js";import"./react-hot-toast-Dux6v_Wl.js";import"./goober-vt3s6TGe.js";import"./@react-aria-CfXSs2UI.js";import"./@react-stately-ChQ0zIrC.js";import"./clsx-B-dksMZM.js";import"./@swc-DS7M6wx8.js";import"./@internationalized-BB0Nk989.js";import"./framer-motion-BvVSIgoR.js";import"./react-textarea-autosize-bEG1sDiq.js";import"./use-latest-2zZSkz0C.js";import"./use-isomorphic-layout-effect-Co3QFFXf.js";import"./use-composed-ref-BmZZpR7Y.js";import"./tailwind-variants-ayMnMv5e.js";import"./tailwind-merge-Dc5vmgZ1.js";import"./prop-types-LuavYUF2.js";import"./@emotion-Bi_v61fx.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./stylis-BqmD5Vow.js";import"./react-is-DcfIKM1A.js";import"./@react-spring-BBeKhKaV.js";import"./d3-shape-CAqfQ72S.js";import"./d3-path-CimkQT29.js";import"./d3-color-9lF95FHy.js";import"./d3-interpolate-CTcRbmYV.js";import"./d3-scale-Co75sXy1.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-DJclFi1f.js";import"./d3-format-CzD4bSOQ.js";import"./d3-time-format-DZUSPL1N.js";import"./d3-time-Dz5jZYzf.js";import"./@popperjs-CY3HxPKn.js";const G=()=>{const[K,g]=o.useState([]),[m,S]=o.useState([]),[Q,y]=o.useState([]),[d,N]=o.useState(0),[h,w]=o.useState(0),[A,v]=o.useState([]),[p,W]=o.useState("Assessment 1"),[x,C]=o.useState({Aster:0,Camia:0,Dahlia:0,Iris:0,Jasmin:0,Orchid:0,Rose:0,Tulip:0,SSC:0}),[u,D]=o.useState({Aster:0,Camia:0,Dahlia:0,Iris:0}),[X,T]=o.useState({scores:[],counts:[]}),E=o.useRef(null);z.useDownloadExcel({currentTableRef:E.current,filename:"Student_List_Report_table",sheet:"Students"}),o.useEffect(()=>{(async()=>{try{await Promise.all([P(),R(),O()]),await B()}catch(e){console.error("Error fetching data:",e)}})()},[p]);const P=async()=>{try{const e=(await l.get("/api/users")).data;g(e),N(f(e,"Teacher")),w(f(e,"Parent"))}catch(t){console.error("Error fetching users:",t)}},R=async()=>{try{const e=(await l.get("/api/getStudents")).data;S(e),C(F(e))}catch(t){console.error("Error fetching students:",t)}},O=async()=>{try{const e=(await l.get("/api/getAssessments")).data;y(e),D(I(e))}catch(t){console.error("Error fetching assessments:",t)}},B=async()=>{try{const e=(await l.get(`/api/getPerformance?assessment=${p}`)).data;v(e);const a=k(e);T(a)}catch(t){console.error("Error fetching performance data:",t)}},f=(t,e)=>t.filter(a=>a.role===e).length,F=t=>["Aster","Camia","Dahlia","Iris","Jasmin","Orchid","Rose","Tulip","SSC"].reduce((a,r)=>(a[r]=t.filter(n=>n.Section===r).length,a),{}),I=t=>["Pagbabaybay","Pantig","Salita","Pagbabasa"].reduce((a,r)=>(a[r]=t.filter(n=>n.type===r).length,a),{}),k=t=>{const e={},a={};return t.forEach(r=>{const{Score:n,AssessmentType:i}=r;e[i]||(e[i]=0),e[i]+=n,a[i]||(a[i]=0),a[i]++}),{scores:e,counts:a}};return(()=>{const t={},e=["Assessment 1","Assessment 2","Assessment 3","Assessment 4"];return A.forEach(a=>{const{LRN:r,Score:n,AssessmentType:i}=a;t[r]||(t[r]={LRN:r,scores:e.map(()=>0)});const b=e.indexOf(i);let L=i==="Assessment 4"?n/5*10:n||0;b!==-1&&(t[r].scores[b]=L)}),Object.values(t).map(a=>({label:`LRN: ${a.LRN}`,data:a.scores.map((r,n)=>({x:e[n],y:isNaN(r)?0:r}))}))})(),s.jsxs("div",{className:"px-9",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("h1",{className:"text-3xl font-semibold",children:"Admin Dashboard"}),s.jsx(M,{showArrow:!0,content:s.jsxs("div",{className:"p-2 text-sm",children:[s.jsx("div",{className:"font-bold",children:"Dashboard Info"}),s.jsx("p",{children:"View system data for each section."})]}),children:s.jsx(c,{icon:U,className:"ml-2 text-black"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex flex-row justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Students"}),s.jsx("p",{className:"text-5xl mt-2",children:m.length})]}),s.jsx("div",{children:s.jsx(c,{icon:H,size:"2xl",className:"text-md"})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex flex-row justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Teachers"}),s.jsx("p",{className:"text-5xl mt-2",children:d})]}),s.jsx("div",{children:s.jsx(c,{icon:J,size:"2xl",className:"text-md"})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex flex-row justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Parents"}),s.jsx("p",{className:"text-5xl mt-2",children:h})]}),s.jsx("div",{children:s.jsx(c,{icon:$,size:"2xl",className:"text-md"})})]}),s.jsxs("div",{className:"col-span-1 lg:col-span-1 bg-white rounded-lg shadow p-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"User Distribution"}),s.jsx("div",{className:"pt-8 pl-5",children:s.jsx(V,{series:[{data:[{id:1,value:m.length,label:"Students"},{id:2,value:d,label:"Teachers"},{id:3,value:h,label:"Parents"}]}],width:400,height:200})})]}),s.jsxs("div",{className:"col-span-1 lg:col-span-2 bg-white rounded-lg shadow p-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Students Per Section"}),s.jsx(j,{xAxis:[{scaleType:"band",data:Object.keys(x)}],yAxis:[{label:"Number of Students"}],margin:{top:20,bottom:20,left:50,right:20},series:[{data:Object.values(x),label:"Students"}],height:300})]}),s.jsxs("div",{className:"col-span-1 lg:col-span-3 bg-white rounded-lg shadow p-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Assessment Types"}),s.jsx(j,{xAxis:[{scaleType:"band",data:Object.keys(u)}],yAxis:[{label:"Count of Activities"}],series:[{data:Object.values(u),label:"Assessments"}],height:300})]})]})]})},qs=()=>s.jsxs("div",{className:"w-full h-full flex",children:[s.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6]",children:s.jsx(_,{})}),s.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[s.jsx(q,{}),s.jsx(G,{})]})]});export{qs as default};
