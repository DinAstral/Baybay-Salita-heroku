import{j as e,L as se,r as i,a as R,_ as V}from"./index-Br4U8MD5.js";import{A as te}from"./AdminSidebar-Dn3RLWYw.js";import{l as le}from"./index-BpO9cRtB.js";import{P as C,F as J,d as ae,i as ie}from"./index-BtZPxBKx.js";import{C as re}from"./ContentHeader-BMNppMT9.js";import{P as oe,t as ne,a as de,b,c as ce,d as me,e as g}from"./PrintRecord-DTLVilxG.js";import{I as he,a as ue,D as xe}from"./importSentence-6LfJsCrK.js";import{m as q,a as H,b as O,c as z}from"./chunk-P2T5LMDM-dULqtXqt.js";import{m as B}from"./chunk-LT4XONRR-DDN1fZnr.js";import{b as c}from"./chunk-DBLREEYE-BYMmdl1I.js";import{s as x,l}from"./chunk-CEHIK4GH-CRh0X0eL.js";import{t as U}from"./profile-VYDC2WoQ.js";import"./useOverlayTriggerState-DrNFVUH_.js";import"./useDialog-_o7Lpg9q.js";import"./useLabels-DjJTkHz4.js";import"./VisuallyHidden-BqHc7wvF.js";import"./Overlay-DgzVAHdl.js";import"./chunk-KBN3H6OQ-B-ne722J.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useField-D2XaPJ68.js";import"./chunk-CIZQCQPA-5waRi0ZM.js";import"./chunk-GQQM5TNQ-BIEoL1OC.js";import"./useFormReset-B_09FROi.js";import"./chunk-ATAY3LCU-B5t7kuKW.js";import"./extends-CF3RwP-h.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";const Y=({show:u,onHide:n,activity:m})=>e.jsx(q,{isOpen:u,onClose:n,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(B,{children:[e.jsx(H,{className:"flex flex-col",id:"edit-user-modal-title",children:"View Assessment Information"}),e.jsx(O,{children:e.jsx("p",{children:"Do you want to view the assessment of the student selected?"})}),e.jsxs(z,{children:[e.jsx(c,{color:"danger",variant:"light",onClick:n,children:"Cancel"}),e.jsx(se,{to:`/adminViewAssessment/${m==null?void 0:m.ActivityCode}`,children:e.jsx(c,{color:"primary",children:"View"})})]})]})});Y.propTypes={show:C.bool.isRequired,onHide:C.func.isRequired,activity:C.object};const fe=({show:u,onHide:n})=>{const m=()=>{n(),window.location.reload()};return e.jsx(q,{isOpen:u,onClose:n,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(B,{children:[e.jsx(H,{id:"contained-modal-title-vcenter",children:"Activity Created Successfully!"}),e.jsx(O,{children:e.jsx("p",{children:"You have created an activity for your students!"})}),e.jsx(z,{children:e.jsx(c,{color:"primary",onClick:m,children:"Close"})})]})})},Q=({show:u,handleClose:n,userId:m})=>{const[T,N]=i.useState(!1),[S,M]=i.useState([]),[_,E]=i.useState([]),[I,y]=i.useState([]),[t,h]=i.useState({Section:"",Period:"",Type:"",Title:"",Item1:"",Item2:"",Item3:"",Item4:"",Item5:"",Item6:"",Item7:"",Item8:"",Item9:"",Item10:""}),[d,W]=i.useState({}),D=()=>{let s=!0;const a={};if(t.Section||(a.Section="Please select a section.",s=!1),t.Period||(a.Period="Please select a grading period.",s=!1),t.Type||(a.Type="Please select a type of assessment.",s=!1),t.Type==="Pagbabasa"&&!t.Title&&(a.Title="Title is required for Pagbabasa.",s=!1),t.Type!=="Pagbabasa")for(let o=1;o<=10;o++)t[`Item${o}`]||(a[`Item${o}`]=`Item ${o} is required.`,s=!1);return W(a),s},v=()=>{R.get("/api/getImportWord").then(s=>{M(s.data)}).catch(s=>console.log(s))},$=()=>{R.get("/api/getSentence").then(s=>{E(s.data)}).catch(s=>console.log(s))};i.useEffect(()=>{v(),$()},[]),i.useEffect(()=>{if(t.Type){const s=S.filter(a=>a.Type===t.Type);y(s)}else y([])},[t.Type,S]);const F=(s,a)=>{const o=I.find(w=>w.ItemCode===a);h({...t,[s]:o?o.ItemCode:""})},k=async s=>{if(s.preventDefault(),!D())return V.error("Please fill out all required fields.");const{Period:a,Type:o,Title:w,Section:G}=t;try{const f=await R.post("/api/submitAssessment",{UserID:m,Section:G,Period:a,Type:o,Title:w,Item1:t.Item1,Item2:t.Item2,Item3:t.Item3,Item4:t.Item4,Item5:t.Item5,Item6:t.Item6,Item7:t.Item7,Item8:t.Item8,Item9:t.Item9,Item10:t.Item10});f.data.error?V.error(f.data.error):(h({Section:"",Period:"",Type:"",Title:"",Item1:"",Item2:"",Item3:"",Item4:"",Item5:"",Item6:"",Item7:"",Item8:"",Item9:"",Item10:""}),V.success("Created Activity Successfully."),N(!0),n())}catch(f){console.log(f)}};return e.jsxs(e.Fragment,{children:[e.jsx(q,{isOpen:u,onClose:n,size:"lg","aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,placement:"center",scrollBehavior:"inside",children:e.jsxs(B,{className:"w-full md:w-[50vw] max-w-full max-h-[80vh] overflow-y-auto bg-white p-4 rounded-lg",children:[e.jsx(H,{id:"contained-modal-title-vcenter",className:"text-lg font-bold",children:"Create New Activity"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs(O,{children:[e.jsxs(x,{labelPlacement:"outside",label:"Grading Period",placeholder:"Select Grading Period",value:t.Period,onChange:s=>h({...t,Period:s.target.value}),className:"w-full my-2",isInvalid:!!d.Period,errorMessage:d.Period,children:[e.jsx(l,{children:"Grading Period 1"},"1"),e.jsx(l,{children:"Grading Period 2"},"2"),e.jsx(l,{children:"Grading Period 3"},"3"),e.jsx(l,{children:"Grading Period 4"},"4")]}),e.jsxs(x,{labelPlacement:"outside",label:"Section",placeholder:"Select Section",className:"w-full my-2",value:t.Section,onChange:s=>h({...t,Section:s.target.value}),isInvalid:!!d.Section,errorMessage:d.Section,children:[e.jsx(l,{disabled:!0,children:"Select Section"},""),e.jsx(l,{children:"Aster"},"Aster"),e.jsx(l,{children:"Camia"},"Camia"),e.jsx(l,{children:"Dahlia"},"Dahlia"),e.jsx(l,{children:"Iris"},"Iris"),e.jsx(l,{children:"Jasmin"},"Jasmin"),e.jsx(l,{children:"Orchid"},"Orchid"),e.jsx(l,{children:"Rose"},"Rose"),e.jsx(l,{children:"Tulip"},"Tulip"),e.jsx(l,{children:"SSC"},"SSC")]}),e.jsxs(x,{labelPlacement:"outside",label:"Type of Assessment",placeholder:"Select Type of Assessment:",value:t.Type,onChange:s=>h({...t,Type:s.target.value}),className:"w-full my-2",isInvalid:!!d.Type,errorMessage:d.Type,children:[e.jsx(l,{children:"Assessment 1: Pagbabaybay Tunog at Letra"},"Pagbabaybay"),e.jsx(l,{children:"Assessment 2: Pantig"},"Pantig"),e.jsx(l,{children:"Assessment 3: Salita"},"Salita"),e.jsx(l,{children:"Assessment 4: Pagbabasa"},"Pagbabasa")]}),t.Type==="Pagbabasa"&&e.jsx(x,{labelPlacement:"outside",label:"Title",value:t.Title,placeholder:"Select a Title:",onChange:s=>h({...t,Title:s.target.value}),className:"w-full my-2",isInvalid:!!d.Title,errorMessage:d.Title,children:_.map(s=>e.jsx(l,{value:s.Title,children:s.Title},s.Title))}),t.Type!=="Pagbabasa"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(10)].map((s,a)=>e.jsx(x,{labelPlacement:"outside",label:`Item ${a+1}`,value:t[`Item${a+1}`],placeholder:"Select a word:",onChange:o=>F(`Item${a+1}`,o.target.value),className:"w-full my-2",isInvalid:!!d[`Item${a+1}`],errorMessage:d[`Item${a+1}`],children:I.map(o=>e.jsx(l,{value:o.Word,children:o.Word},o.ItemCode))},`Item${a+1}`))})]}),e.jsxs(z,{className:"flex justify-end space-x-2",children:[e.jsx(c,{color:"danger",variant:"light",onClick:n,children:"Close"}),e.jsx(c,{color:"primary",type:"submit",children:"Create Activity"})]})]})]})}),e.jsx(fe,{show:T,onHide:()=>N(!1)})]})};Q.propTypes={show:C.bool.isRequired,handleClose:C.func.isRequired};const pe=()=>{const[u,n]=i.useState(!1),[m,T]=i.useState(!1),[N,S]=i.useState(!1),[M,_]=i.useState(!1),[E,I]=i.useState(!1),[y,t]=i.useState(null),[h,d]=i.useState([]),[W,D]=i.useState([]),[v,$]=i.useState(""),[F,k]=i.useState(!1),[s,a]=i.useState(""),o=()=>n(!1),w=()=>n(!0),G=i.useRef(null),{onDownload:f}=le.useDownloadExcel({currentTableRef:G.current,filename:"Student_Assessment_Report_table",sheet:"Assessment"}),K=()=>{R.get("/api/getAssessments").then(r=>{d(r.data),D(r.data)}).catch(r=>console.log(r))};i.useEffect(()=>{K()},[]);const X=()=>{I(!0)},Z=()=>{T(!0)},ee=()=>{_(!0)},L=(r,P)=>{const A=r.target.value;P==="period"?$(A):P==="type"&&a(A);let p=h;A!==""&&(p=h.filter(j=>P==="period"?j.Period===A:j.Type===A)),v&&P==="type"&&(p=p.filter(j=>j.Period===v)),s&&P==="period"&&(p=p.filter(j=>j.Type===s)),D(p)};return e.jsxs("div",{className:"px-9",children:[e.jsx(oe,{show:E,onHide:()=>I(!1),print:f}),e.jsx(Q,{show:u,handleClose:o,onSuccess:K}),e.jsx(he,{show:m,onHide:()=>T(!1)}),e.jsx(ue,{show:M,onHide:()=>_(!1)}),e.jsx(Y,{show:N,activity:y,onHide:()=>S(!1)}),e.jsx(xe,{show:F,activity:y,onHide:()=>k(!1)}),e.jsxs("div",{className:"content-title-header",children:[e.jsxs("div",{children:["Manage Student Assessment",e.jsx(U,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Assessment Table"}),e.jsx("div",{className:"text-tiny",children:"This function will view the assessment of the students in each section."})]}),children:e.jsx(J,{icon:ae,size:"1x",className:"help-icon"})})]}),e.jsx("div",{className:"generate-report",children:e.jsx(U,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Print"}),e.jsx("div",{className:"text-tiny",children:"Generate report/Print table"})]}),children:e.jsx(J,{icon:ie,size:"1x",className:"print-icon",onClick:X})})})]}),e.jsx("div",{className:"content-container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card mt-1 border-0",children:[e.jsxs("div",{className:"list-header-drop-score",children:[e.jsxs("div",{className:"flex flex-row gap-5 justify-start w-[100%]",children:[e.jsxs(x,{labelPlacement:"outside",label:"Grading Period",variant:"bordered",className:"bg-transparent w-[20%]",onChange:r=>L(r,"period"),value:v,children:[e.jsx(l,{children:"Select Grading Period"},""),e.jsx(l,{children:"Grading Period 1"},"1"),e.jsx(l,{children:"Grading Period 2"},"2"),e.jsx(l,{children:"Grading Period 3"},"3"),e.jsx(l,{children:"Grading Period 4"},"4")]}),e.jsxs(x,{className:"w-[20%]",labelPlacement:"outside",label:"Assessment",variant:"bordered",onChange:r=>L(r,"type"),value:s,children:[e.jsx(l,{children:"Select Type of Assessment:"},""),e.jsx(l,{children:"Assessment 1"},"Pagbabaybay"),e.jsx(l,{children:"Assessment 2"},"Pantig"),e.jsx(l,{children:"Assessment 3"},"Salita"),e.jsx(l,{children:"Assessment 4"},"Pagbabasa")]})]}),e.jsxs("div",{className:"flex flex-row gap-5 justify-end mt-3",children:[e.jsx(c,{auto:!0,onClick:ee,color:"default",children:"Import Sentence"}),e.jsx(c,{auto:!0,onClick:Z,color:"default",children:"Import Word"}),e.jsx(c,{auto:!0,onClick:w,color:"primary",children:"Create Activity"})]})]}),e.jsx("div",{className:"card-body scrollable-table scrollable-container",children:e.jsxs(ne,{"aria-label":"Assessment Table",ref:G,removeWrapper:!0,color:"primary",selectionMode:"single",children:[e.jsxs(de,{children:[e.jsx(b,{children:"Activity Code"}),e.jsx(b,{children:"Grading Period"}),e.jsx(b,{children:"Section"}),e.jsx(b,{children:"Type"}),e.jsx(b,{children:"Status"}),e.jsx(b,{className:"text-center",children:"Actions"})]}),e.jsx(ce,{emptyContent:"No rows to display.",children:W.map(r=>e.jsxs(me,{children:[e.jsx(g,{children:r.ActivityCode}),e.jsx(g,{children:r.Period}),e.jsx(g,{children:r.Section}),e.jsx(g,{children:r.Type}),e.jsx(g,{children:r.Assessment}),e.jsx(g,{className:"text-center",children:e.jsxs("div",{className:"table-buttons",children:[e.jsx(c,{color:"primary",onClick:()=>{t(r),S(!0)},children:"View"}),e.jsx(c,{color:"danger",onClick:()=>{t(r),k(!0)},children:"Delete"})]})})]},r._id))})]})})]})})})})]})},Oe=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(te,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(re,{}),e.jsx(pe,{})]})]});export{Oe as default};
