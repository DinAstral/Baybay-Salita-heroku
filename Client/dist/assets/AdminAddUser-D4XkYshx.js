import{u as j,r as x,j as e,a as b,_ as f}from"./index-DRkmS7r_.js";import{A as P}from"./AdminSidebar-DBa4ruW2.js";import{F as y,d as A}from"./index-C-x_9WTQ.js";import{t as C}from"./profile-BgnaMKgd.js";import{i as c}from"./chunk-GQQM5TNQ-Dp_xGKim.js";import{s as F,l as g}from"./chunk-CEHIK4GH-R9Drcmk3.js";import{b as I}from"./chunk-DBLREEYE-DoOwKmAJ.js";import{C as L}from"./ContentHeader-CPvXrxlp.js";import"./useOverlayTriggerState-D8HolJQt.js";import"./chunk-CIZQCQPA-DvUsmOkq.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useFormReset-C6_kkRsk.js";import"./useField-CJb1MFo7.js";import"./useLabels-BnmYLgFr.js";import"./useDialog-BXzugVjS.js";import"./VisuallyHidden-DMHofawe.js";function E(p,a){const n="0123456789";let r="";switch(p){case"Teacher":r="teacherID_";break;case"Admin":r="adminID_";break}let d=r;const u=n.length;for(let h=0;h<a;h++)d+=n.charAt(Math.floor(Math.random()*u));return d}const U=()=>{const p=j(),[a,n]=x.useState({UserID:"",FirstName:"",LastName:"",email:"",password:"",confirmPassword:"",role:""}),[r,d]=x.useState({});function u(s){const t=[],i=/[A-Z]/.test(s),l=/[a-z]/.test(s),N=/\d/.test(s),v=/[!@#$%^&*(),.?":{}|<>]/.test(s);return s?(s.length<8&&t.push("Password must be at least 8 characters long."),i||t.push("Password must contain at least one uppercase letter."),l||t.push("Password must contain at least one lowercase letter."),N||t.push("Password must contain at least one digit."),v||t.push("Password must contain at least one special character."),t.length>0?t.join(" "):null):"Password is required."}const h=()=>{let s=!0,o={};d({}),a.FirstName||(o.FirstName="First Name is required.",s=!1),a.LastName||(o.LastName="Last Name is required.",s=!1),a.email||(o.email="Email is required.",s=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(o.email="Invalid email format.",s=!1);const i=u(a.password);return i&&(o.password=i,s=!1),a.password!==a.confirmPassword&&(o.confirmPassword="Passwords do not match.",s=!1),d(o),s},m=s=>{const{name:o,value:t}=s.target;n(i=>({...i,[o]:t}))},w=async s=>{var t,i;if(s.preventDefault(),!h()){f.error("Please fill out the form correctly.");return}const o=E(a.role,6);try{const l=await b.post("/api/addUser",{...a,UserID:o});l.data.error?f.error(l.data.error):(n({UserID:"",FirstName:"",LastName:"",email:"",password:"",confirmPassword:"",role:""}),f.success("User added successfully.",{duration:4e3}),p("/adminUsers"))}catch(l){console.error("There was an error adding the user:",l),f.error(((i=(t=l.response)==null?void 0:t.data)==null?void 0:i.message)||"Failed to add user. Please try again later.")}};return e.jsx("div",{className:"container mx-auto px-6 pt-[4rem]",children:e.jsxs("div",{className:"bg-white shadow-md rounded-md px-8 pt-6 pb-8 mb-4 flex flex-col",children:[e.jsxs("h2",{className:"mb-6 text-3xl font-bold text-gray-700 flex items-center gap-2",children:["Add User's Information",e.jsx(C,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Add User"}),e.jsx("div",{className:"text-tiny",children:"This function will add the information of the user to the system."})]}),children:e.jsx(y,{icon:A,size:"sm",className:"text-gray-700 text-[20px]"})})]}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(c,{label:"First Name",type:"text",name:"FirstName",placeholder:"Enter First Name",value:a.FirstName,errorMessage:r.FirstName,isInvalid:!!r.FirstName,onChange:m}),e.jsx(c,{label:"Last Name",type:"text",name:"LastName",placeholder:"Enter Last Name",value:a.LastName,errorMessage:r.LastName,isInvalid:!!r.LastName,onChange:m}),e.jsx(c,{label:"Email",type:"email",name:"email",placeholder:"Enter Email",value:a.email,errorMessage:r.email,isInvalid:!!r.email,onChange:m}),e.jsx(c,{label:"Password",type:"password",name:"password",placeholder:"Set Password",value:a.password,errorMessage:r.password,isInvalid:!!r.password,onChange:m}),e.jsx(c,{label:"Confirm Password",type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:a.confirmPassword,errorMessage:r.confirmPassword,isInvalid:!!r.confirmPassword,onChange:m}),e.jsxs(F,{label:"Role",placeholder:"Select Role",value:a.role,errorMessage:r.role,isInvalid:!!r.role,onChange:s=>n({...a,role:s.target.value}),children:[e.jsx(g,{value:"Admin",children:"Admin"},"Admin"),e.jsx(g,{value:"Teacher",children:"Teacher"},"Teacher")]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(I,{type:"submit",color:"primary",size:"lg",radius:"sm",children:"Add User"})})]})]})})},K=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(P,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(L,{}),e.jsx(U,{})]})]});export{K as default};
