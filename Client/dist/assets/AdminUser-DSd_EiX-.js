import{j as e,L as p,r as c,a as S,_ as B}from"./index-C0mq2pM1.js";import{A as Y}from"./AdminSidebar-IiVpn-6z.js";import{C as G}from"./ContentHeader-DPLcpCle.js";import{P as Q,t as W,a as J,b,c as X,d as Z,e as w}from"./PrintRecord-XLh-EX2U.js";import{P as i,F as C,d as ee,i as se,j as le}from"./index-DXLE2NwT.js";import{m as h,a as x,b as m,c as f}from"./chunk-P2T5LMDM-unMqp2aE.js";import{m as u}from"./chunk-LT4XONRR-BbvgX0Jf.js";import{b as a}from"./chunk-DBLREEYE-CmAhUcF6.js";import{l as re}from"./index-D6Psk_dW.js";import{R as te}from"./react-paginate-FR8rw8R7.js";import{t as R}from"./profile-CycooEAC.js";import{s as ie,l as y}from"./chunk-CEHIK4GH-JCd2cYw1.js";import{i as ae}from"./chunk-GQQM5TNQ-DjbyrHNV.js";import"./useOverlayTriggerState-DcLuQhII.js";import"./useDialog-cdyi40F6.js";import"./useLabels-C6nxSUGo.js";import"./VisuallyHidden-Ipnd9vIt.js";import"./Overlay-BDkNJOCE.js";import"./chunk-KBN3H6OQ-CBiUzbmB.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useField-BOxuQbUu.js";import"./chunk-CIZQCQPA-ByI2RMzI.js";import"./useFormReset-C-mRlYoR.js";const A=({show:r,onHide:s})=>e.jsx(h,{isOpen:r,onClose:s,"aria-labelledby":"add-user-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(u,{children:[e.jsx(x,{className:"flex flex-col",id:"add-user-modal-title",children:"Add User Information"}),e.jsx(m,{children:e.jsx("p",{children:"Do you want to add a user?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"danger",variant:"light",onClick:s,children:"Cancel"}),e.jsx(p,{to:"/adminAddUser",children:e.jsx(a,{color:"primary",children:"Add"})})]})]})});A.propTypes={show:i.bool.isRequired,onHide:i.func.isRequired};const k=({show:r,onHide:s,user:l})=>e.jsx(h,{isOpen:r,onClose:s,"aria-labelledby":"edit-user-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(u,{children:[e.jsx(x,{className:"flex flex-col",id:"edit-user-modal-title",children:"Add User Information"}),e.jsx(m,{children:e.jsx("p",{children:"You are now going to update the selected user. Do you wish to continue?"})}),e.jsxs(f,{children:[e.jsx(a,{variant:"light",color:"danger",onClick:s,children:"Cancel"}),e.jsx(p,{to:`/AdminEditUser/${l==null?void 0:l._id}`,children:e.jsx(a,{color:"primary",children:"Update"})})]})]})});k.propTypes={show:i.bool.isRequired,onHide:i.func.isRequired,user:i.object};const q=({show:r,onHide:s,user:l})=>e.jsx(h,{isOpen:r,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(u,{children:[e.jsx(x,{className:"flex flex-col",id:"edit-user-modal-title",children:"View Parent Information"}),e.jsx(m,{children:e.jsx("p",{children:"Do you want to View the profile of Parent selected?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"danger",variant:"light",onClick:s,children:"Cancel"}),e.jsx(p,{to:`/adminViewParent/${l==null?void 0:l.UserID}`,children:e.jsx(a,{color:"primary",children:"View"})})]})]})});q.propTypes={show:i.bool.isRequired,onHide:i.func.isRequired,user:i.object};const E=({show:r,onHide:s,user:l})=>e.jsx(h,{isOpen:r,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(u,{children:[e.jsx(x,{className:"flex flex-col",id:"edit-user-modal-title",children:"View Teacher Information"}),e.jsx(m,{children:e.jsx("p",{children:"Do you want to view the profile of teacher selected?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"danger",variant:"light",onClick:s,children:"Cancel"}),e.jsx(p,{to:`/adminViewTeacher/${l==null?void 0:l.UserID}`,children:e.jsx(a,{color:"primary",children:"View"})})]})]})});E.propTypes={show:i.bool.isRequired,onHide:i.func.isRequired,user:i.object};const I=({show:r,onHide:s,user:l})=>e.jsx(h,{isOpen:r,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(u,{children:[e.jsx(x,{className:"flex flex-col",id:"contained-modal-title-vcenter",children:"Update Parent Information"}),e.jsx(m,{children:e.jsx("p",{children:"Are you sure you want to update this parent's information?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"danger",variant:"light",onClick:s,children:"Cancel"}),e.jsx(p,{to:`/adminEditParent/${l==null?void 0:l._id}`,children:e.jsx(a,{color:"primary",children:"Update"})})]})]})});I.propTypes={show:i.bool.isRequired,onHide:i.func.isRequired,user:i.object};const V=({show:r,onHide:s,user:l})=>e.jsx(h,{isOpen:r,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(u,{children:[e.jsx(x,{className:"flex flex-col",id:"contained-modal-title-vcenter",children:"Update Teacher Information"}),e.jsx(m,{children:e.jsx("p",{children:"Are you sure you want to update this teacher's information?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"danger",variant:"light",onClick:s,children:"Cancel"}),e.jsx(p,{to:`/adminEditTeacher/${l==null?void 0:l._id}`,children:e.jsx(a,{color:"primary",children:"Update"})})]})]})});V.propTypes={show:i.bool.isRequired,onHide:i.func.isRequired,user:i.object};const ne=({show:r,onHide:s})=>e.jsx(h,{isOpen:r,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(u,{children:[e.jsx(x,{id:"contained-modal-title-vcenter",children:"Delete User Successful"}),e.jsx(m,{children:e.jsx("p",{children:"You have deleted the User information."})}),e.jsx(f,{children:e.jsx(a,{color:"danger",onClick:s,children:"Close"})})]})}),H=({show:r,onHide:s,user:l,onDeleteSuccess:o})=>{const[d,j]=c.useState(!1),v=async()=>{try{await S.delete(`/api/deleteUser/${l.email}`),j(!0),o()}catch(g){console.error("Error deleting user:",g),B.error("Failed to delete user. Please try again later.")}};return e.jsxs(e.Fragment,{children:[e.jsx(h,{isOpen:r,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(u,{children:[e.jsx(x,{id:"contained-modal-title-vcenter",children:"Delete User Information"}),e.jsx(m,{children:e.jsx("p",{children:"Are you sure you want to delete this User's information?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"default",variant:"light",onClick:s,children:"Cancel"}),e.jsx(a,{color:"danger",onClick:v,children:"Delete"})]})]})}),e.jsx(ne,{show:d,onHide:()=>{j(!1),s()}})]})};H.propTypes={show:i.bool.isRequired,onHide:i.func.isRequired,onDeleteSuccess:i.func.isRequired,user:i.object};const oe=(r,s,l)=>{let o=r;return s!=="default"&&(o=o.filter(d=>d.role===s)),l&&(o=o.filter(d=>d.email.toLowerCase().includes(l.toLowerCase()))),o},de=(r,s,l)=>{const o=s*l;return r.slice(o,o+l)},ce=()=>{const[r,s]=c.useState({add:!1,print:!1,editUser:!1,editTeacher:!1,viewTeacher:!1,editParent:!1,viewParent:!1,delete:!1}),[l,o]=c.useState([]),[d,j]=c.useState(null),[v,g]=c.useState(0),[D]=c.useState(10),[U,K]=c.useState(""),[N,O]=c.useState("default"),_=c.useRef(null),{onDownload:F}=re.useDownloadExcel({currentTableRef:_.current,filename:"Users table",sheet:"Users"}),P=async()=>{try{const t=await S.get("/api/users");o(t.data)}catch(t){console.error(t)}};c.useEffect(()=>{P()},[]);const T=oe(l,N,U),L=de(T,v,D),n=(t,$)=>{s(z=>({...z,[t]:$}))},M=t=>{g(t.selected)};return e.jsxs("div",{className:"px-4 md:px-9",children:[e.jsx(A,{show:r.add,onHide:()=>n("add",!1)}),e.jsx(k,{show:r.editUser,onHide:()=>n("editUser",!1),user:d}),e.jsx(Q,{show:r.print,onHide:()=>n("print",!1),print:F}),e.jsx(E,{show:r.viewTeacher,user:d,onHide:()=>n("viewTeacher",!1)}),e.jsx(V,{show:r.editTeacher,user:d,onHide:()=>n("editTeacher",!1)}),e.jsx(q,{show:r.viewParent,user:d,onHide:()=>n("viewParent",!1)}),e.jsx(I,{show:r.editParent,user:d,onHide:()=>n("editParent",!1)}),e.jsx(H,{show:r.delete,onHide:()=>n("delete",!1),user:d,onDeleteSuccess:P}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"text-2xl md:text-3xl font-semibold",children:["Manage User",e.jsx(R,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"User Table"}),e.jsx("div",{className:"text-tiny",children:"This function will view the information of the students in the system."})]}),children:e.jsx(C,{icon:ee,size:"1x",className:"ml-2 cursor-pointer text-lg"})})]}),e.jsx("div",{className:"cursor-pointer flex items-center",children:e.jsx(R,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Print"}),e.jsx("div",{className:"text-tiny",children:"Generate report/Print table"})]}),children:e.jsx(C,{icon:se,size:"1x",className:"ml-2 cursor-pointer text-lg",onClick:()=>n("print",!0)})})})]}),e.jsxs("div",{className:"max-w-full bg-white p-4 md:p-6 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4",children:[e.jsxs(ie,{labelPlacement:"outside",label:"Role",variant:"bordered",className:"bg-transparent w-full md:w-1/5",onChange:t=>O(t.target.value),value:N,children:[e.jsx(y,{children:"All"},"default"),e.jsx(y,{children:"Admin"},"Admin"),e.jsx(y,{children:"Parent"},"Parent"),e.jsx(y,{children:"Teacher"},"Teacher")]}),e.jsx("div",{className:"w-full md:w-[40%] flex items-center mt-4 md:mt-0",children:e.jsx(ae,{variant:"bordered",type:"text",placeholder:"Enter User Email",value:U,onChange:t=>K(t.target.value),startContent:e.jsx(C,{icon:le,size:"1x",inverse:!0,className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(a,{color:"primary",className:"w-full md:w-[120px] text-md",onClick:()=>n("add",!0),children:"Add User"})})]}),e.jsx("div",{className:"overflow-auto max-h-[600px]",children:e.jsxs(W,{"aria-label":"User Table",ref:_,removeWrapper:!0,color:"primary",selectionMode:"single",className:"w-full whitespace-nowrap",children:[e.jsxs(J,{children:[e.jsx(b,{children:"UserID"}),e.jsx(b,{children:"Email"}),e.jsx(b,{children:"Role"}),e.jsx(b,{className:"text-center",children:"Actions"})]}),e.jsx(X,{emptyContent:"No rows to display.",children:L.map(t=>e.jsxs(Z,{children:[e.jsx(w,{children:t.UserID}),e.jsx(w,{children:t.email}),e.jsx(w,{children:t.role}),e.jsx(w,{className:"text-center",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(a,{color:"default",onClick:()=>{j(t),t.role==="Teacher"?n("viewTeacher",!0):t.role==="Parent"&&n("viewParent",!0)},children:"View"}),e.jsx(a,{color:"primary",onClick:()=>j(t)||n("editUser",!0),children:"Update"}),e.jsx(a,{color:"danger",onClick:()=>j(t)||n("delete",!0),children:"Delete"})]})})]},t._id))})]})}),e.jsx(te,{pageCount:Math.ceil(T.length/D),onPageChange:M,containerClassName:"flex justify-center mt-4 space-x-2",activeClassName:"text-white bg-blue-600 px-3 py-1 rounded",pageLinkClassName:"px-2 py-1 border rounded hover:bg-gray-200",previousLinkClassName:"px-2 py-1 border rounded",nextLinkClassName:"px-2 py-1 border rounded"})]})]})},qe=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(Y,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(G,{}),e.jsx(ce,{})]})]});export{qe as default};
