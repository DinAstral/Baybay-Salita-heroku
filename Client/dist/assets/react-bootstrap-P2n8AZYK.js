import{h as M,t as X,s as Y,c as Z}from"./dom-helpers-BqZ4taC5.js";import{P as ee}from"./prop-types-LuavYUF2.js";import{r as n,j as R,a as I}from"./react-BCcS7c0c.js";import{u as j,a as te,b as se,O as ne,c as oe}from"./@restart-8TjGUYyC.js";import{u as re}from"./uncontrollable-Pr34tmoS.js";import{c as D}from"./classnames-Dr1oJ67k.js";import{T as ae,E as le,a as ce}from"./react-transition-group-BAVKToLD.js";import{R as ie}from"./react-dom-rv-KAOpM.js";const ue=["xxl","xl","lg","md","sm","xs"],fe="xs",P=n.createContext({prefixes:{},breakpoints:ue,minBreakpoint:fe});function k(e,t){const{prefixes:s}=n.useContext(P);return e||s[t]||t}function H(){const{dir:e}=n.useContext(P);return e==="rtl"}const $=n.forwardRef(({className:e,bsPrefix:t,as:s="div",...o},r)=>(t=k(t,"popover-header"),R.jsx(s,{ref:r,className:D(e,t),...o})));$.displayName="PopoverHeader";const B=n.forwardRef(({className:e,bsPrefix:t,as:s="div",...o},r)=>(t=k(t,"popover-body"),R.jsx(s,{ref:r,className:D(e,t),...o})));B.displayName="PopoverBody";function A(e,t){let s=e;return e==="left"?s=t?"end":"start":e==="right"&&(s=t?"start":"end"),s}function z(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const de=n.forwardRef(({bsPrefix:e,placement:t="right",className:s,style:o,children:r,body:a,arrowProps:u,hasDoneInitialMeasure:p,popper:i,show:f,...g},v)=>{const O=k(e,"popover"),d=H(),[l]=(t==null?void 0:t.split("-"))||[],N=A(l,d);let c=o;return f&&!p&&(c={...o,...z(i==null?void 0:i.strategy)}),R.jsxs("div",{ref:v,role:"tooltip",style:c,"x-placement":l,className:D(s,O,l&&`bs-popover-${N}`),...g,children:[R.jsx("div",{className:"popover-arrow",...u}),a?R.jsx(B,{children:r}):r]})}),pe=Object.assign(de,{Header:$,Body:B,POPPER_OFFSET:[0,8]}),K=n.forwardRef(({bsPrefix:e,placement:t="right",className:s,style:o,children:r,arrowProps:a,hasDoneInitialMeasure:u,popper:p,show:i,...f},g)=>{e=k(e,"tooltip");const v=H(),[O]=(t==null?void 0:t.split("-"))||[],d=A(O,v);let l=o;return i&&!u&&(l={...o,...z(p==null?void 0:p.strategy)}),R.jsxs("div",{ref:g,style:l,role:"tooltip","x-placement":O,className:D(s,e,`bs-tooltip-${d}`),...f,children:[R.jsx("div",{className:"tooltip-arrow",...a}),R.jsx("div",{className:`${e}-inner`,children:r})]})});K.displayName="Tooltip";const me=Object.assign(K,{TOOLTIP_OFFSET:[0,6]});function he(e){const t=n.useRef(null),s=k(void 0,"popover"),o=k(void 0,"tooltip"),r=n.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(M(t.current,s))return pe.POPPER_OFFSET;if(M(t.current,o))return me.TOOLTIP_OFFSET}return[0,0]}}}),[e,s,o]);return[t,[r]]}function U(e,t){const s=Y(e,t)||"",o=s.indexOf("ms")===-1?1e3:1;return parseFloat(s)*o}function Re(e,t){const s=U(e,"transitionDuration"),o=U(e,"transitionDelay"),r=X(e,a=>{a.target===e&&(r(),t(a))},s+o)}function ve(e){e.offsetHeight}function _(e){return e&&"setState"in e?ie.findDOMNode(e):e??null}const Ee=I.forwardRef(({onEnter:e,onEntering:t,onEntered:s,onExit:o,onExiting:r,onExited:a,addEndListener:u,children:p,childRef:i,...f},g)=>{const v=n.useRef(null),O=j(v,i),d=h=>{O(_(h))},l=h=>x=>{h&&v.current&&h(v.current,x)},N=n.useCallback(l(e),[e]),c=n.useCallback(l(t),[t]),E=n.useCallback(l(s),[s]),m=n.useCallback(l(o),[o]),w=n.useCallback(l(r),[r]),T=n.useCallback(l(a),[a]),C=n.useCallback(l(u),[u]);return R.jsx(ae,{ref:g,...f,onEnter:N,onEntered:E,onEntering:c,onExit:m,onExited:T,onExiting:w,addEndListener:C,nodeRef:v,children:typeof p=="function"?(h,x)=>p(h,{...x,ref:d}):I.cloneElement(p,{ref:d})})}),xe={[le]:"show",[ce]:"show"},S=n.forwardRef(({className:e,children:t,transitionClasses:s={},onEnter:o,...r},a)=>{const u={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},p=n.useCallback((i,f)=>{ve(i),o==null||o(i,f)},[o]);return R.jsx(Ee,{ref:a,addEndListener:Re,...u,onEnter:p,childRef:t.ref,children:(i,f)=>n.cloneElement(t,{...f,className:D("fade",e,t.props.className,xe[i],s[i])})})});S.displayName="Fade";function ye(e,t){const{ref:s}=e,{ref:o}=t;e.ref=s.__wrapped||(s.__wrapped=r=>s(_(r))),t.ref=o.__wrapped||(o.__wrapped=r=>o(_(r)))}const G=n.forwardRef(({children:e,transition:t=S,popperConfig:s={},rootClose:o=!1,placement:r="top",show:a=!1,...u},p)=>{const i=n.useRef({}),[f,g]=n.useState(null),[v,O]=he(u.offset),d=j(p,v),l=t===!0?S:t||void 0,N=te(c=>{g(c),s==null||s.onFirstUpdate==null||s.onFirstUpdate(c)});return se(()=>{f&&u.target&&(i.current.scheduleUpdate==null||i.current.scheduleUpdate())},[f,u.target]),n.useEffect(()=>{a||g(null)},[a]),R.jsx(ne,{...u,ref:d,popperConfig:{...s,modifiers:O.concat(s.modifiers||[]),onFirstUpdate:N},transition:l,rootClose:o,placement:r,show:a,children:(c,{arrowProps:E,popper:m,show:w})=>{var T;ye(c,E);const C=m==null?void 0:m.placement,h=Object.assign(i.current,{state:m==null?void 0:m.state,scheduleUpdate:m==null?void 0:m.update,placement:C,outOfBoundaries:(m==null||(T=m.state)==null||(T=T.modifiersData.hide)==null?void 0:T.isReferenceHidden)||!1,strategy:s.strategy}),x=!!f;return typeof e=="function"?e({...c,placement:C,show:w,...!t&&w&&{className:"show"},popper:h,arrowProps:E,hasDoneInitialMeasure:x}):n.cloneElement(e,{...c,placement:C,arrowProps:E,popper:h,hasDoneInitialMeasure:x,className:D(e.props.className,!t&&w&&"show"),style:{...e.props.style,...c.style}})}})});G.displayName="Overlay";function ge(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function L(e,t,s){const[o]=t,r=o.currentTarget,a=o.relatedTarget||o.nativeEvent[s];(!a||a!==r)&&!Z(r,a)&&e(...t)}ee.oneOf(["click","hover","focus"]);const _e=({trigger:e=["hover","focus"],overlay:t,children:s,popperConfig:o={},show:r,defaultShow:a=!1,onToggle:u,delay:p,placement:i,flip:f=i&&i.indexOf("auto")!==-1,...g})=>{const v=n.useRef(null),O=j(v,s.ref),d=oe(),l=n.useRef(""),[N,c]=re(r,a,u),E=ge(p),{onFocus:m,onBlur:w,onClick:T}=typeof s!="function"?n.Children.only(s).props:{},C=y=>{O(_(y))},h=n.useCallback(()=>{if(d.clear(),l.current="show",!E.show){c(!0);return}d.set(()=>{l.current==="show"&&c(!0)},E.show)},[E.show,c,d]),x=n.useCallback(()=>{if(d.clear(),l.current="hide",!E.hide){c(!1);return}d.set(()=>{l.current==="hide"&&c(!1)},E.hide)},[E.hide,c,d]),W=n.useCallback((...y)=>{h(),m==null||m(...y)},[h,m]),q=n.useCallback((...y)=>{x(),w==null||w(...y)},[x,w]),J=n.useCallback((...y)=>{c(!N),T==null||T(...y)},[T,c,N]),Q=n.useCallback((...y)=>{L(h,y,"fromElement")},[h]),V=n.useCallback((...y)=>{L(x,y,"toElement")},[x]),b=e==null?[]:[].concat(e),F={ref:C};return b.indexOf("click")!==-1&&(F.onClick=J),b.indexOf("focus")!==-1&&(F.onFocus=W,F.onBlur=q),b.indexOf("hover")!==-1&&(F.onMouseOver=Q,F.onMouseOut=V),R.jsxs(R.Fragment,{children:[typeof s=="function"?s(F):n.cloneElement(s,F),R.jsx(G,{...g,show:N,onHide:x,flip:f,placement:i,popperConfig:o,target:v.current,children:t})]})};export{_e as O,me as T};
