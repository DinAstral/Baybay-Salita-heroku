import{u as j,r as v,j as s,a as P,_ as f}from"./index-DAh1FqN3.js";import{A as b}from"./AdminSidebar-BZWMBfWv.js";import{F as y,d as A}from"./index-Cf2lspYs.js";import{t as F}from"./profile-BVZURtQj.js";import{i as d}from"./chunk-GQQM5TNQ-HE8oeiaq.js";import{s as I,l as w}from"./chunk-CEHIK4GH-lCsp977P.js";import{b as L}from"./chunk-DBLREEYE-DQXm-99S.js";import{C}from"./ContentHeader-DDUmTEeH.js";import"./useOverlayTriggerState-Xh9GmOYf.js";import"./chunk-CIZQCQPA-IQ7IFqdt.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useFormReset-Xrudi_Fg.js";import"./useField-_H8yH7ke.js";import"./useLabels-C0f4DalL.js";import"./useDialog-RF8-N8fz.js";import"./VisuallyHidden-Gd2gzXm8.js";import"./Overlay-M124Itg7.js";function E(u,a){const t="0123456789";let r="";switch(u){case"Parent":r="parentID_";break;case"Teacher":r="teacherID_";break;case"Admin":r="adminID_";break}let n=r;const p=t.length;for(let m=0;m<a;m++)n+=t.charAt(Math.floor(Math.random()*p));return n}const U=()=>{const u=j(),[a,t]=v.useState({UserID:"",FirstName:"",LastName:"",email:"",password:"",confirmPassword:"",role:""}),[r,n]=v.useState({});function p(e){const i=[],l=/[A-Z]/.test(e),x=/[a-z]/.test(e),c=/\d/.test(e),g=/[!@#$%^&*(),.?":{}|<>]/.test(e);return e?(e.length<8&&i.push("Password must be at least 8 characters long."),l||i.push("Password must contain at least one uppercase letter."),x||i.push("Password must contain at least one lowercase letter."),c||i.push("Password must contain at least one digit."),g||i.push("Password must contain at least one special character."),i.length>0?i.join(" "):null):"Password is required."}const m=()=>{let e=!0,o={};n({}),a.FirstName||(o.FirstName="First Name is required.",e=!1),a.LastName||(o.LastName="Last Name is required.",e=!1),a.email||(o.email="Email is required.",e=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(o.email="Invalid email format.",e=!1);const l=p(a.password);return l&&(o.password=l,e=!1),a.password!==a.confirmPassword&&(o.confirmPassword="Passwords do not match.",e=!1),n(o),e},N=async e=>{e.preventDefault();const{FirstName:o,LastName:i,email:l,password:x,role:c}=a;if(!m()){f.error("Please fill out the form correctly.");return}const g=E(c,6);try{const h=await P.post("/api/addUser",{UserID:g,FirstName:o,LastName:i,email:l,password:x,role:c});h.data.error?f.error(h.data.error):(t({UserID:"",FirstName:"",LastName:"",email:"",password:"",confirmPassword:"",role:""}),f.success("User added successfully."),u("/adminUsers"))}catch(h){console.error("There was an error adding the user:",h),f.error("Failed to add user. Please try again later.")}};return s.jsx("div",{className:"container mx-auto px-6 pt-[4rem]",children:s.jsxs("div",{className:"bg-white shadow-md rounded-md px-8 pt-6 pb-8 mb-4 flex flex-col",children:[s.jsxs("h2",{className:"mb-6 text-3xl font-bold text-gray-700 flex items-center gap-2",children:["Add User's Information",s.jsx(F,{showArrow:!0,content:s.jsxs("div",{className:"px-1 py-2",children:[s.jsx("div",{className:"text-small font-bold",children:"Add User"}),s.jsx("div",{className:"text-tiny",children:"This function will add the information of the user to the system."})]}),children:s.jsx(y,{icon:A,size:"sm",className:"text-gray-700 text-[20px]"})})]}),s.jsxs("form",{onSubmit:N,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(d,{label:"First Name",type:"text",placeholder:"Enter First Name",value:a.FirstName,errorMessage:r.FirstName,isInvalid:!!r.FirstName,onChange:e=>t({...a,FirstName:e.target.value})}),s.jsx(d,{label:"Last Name",type:"text",placeholder:"Enter Last Name",value:a.LastName,errorMessage:r.LastName,isInvalid:!!r.LastName,onChange:e=>t({...a,LastName:e.target.value})}),s.jsx(d,{label:"Email",type:"email",placeholder:"Enter Email",value:a.email,errorMessage:r.email,isInvalid:!!r.email,onChange:e=>t({...a,email:e.target.value})}),s.jsx(d,{label:"Password",type:"password",placeholder:"Set Password",value:a.password,errorMessage:r.password,isInvalid:!!r.password,onChange:e=>t({...a,password:e.target.value})}),s.jsx(d,{label:"Confirm Password",type:"password",placeholder:"Confirm Password",value:a.confirmPassword,errorMessage:r.confirmPassword,isInvalid:!!r.confirmPassword,onChange:e=>t({...a,confirmPassword:e.target.value})}),s.jsxs(I,{label:"Role",placeholder:"Select Role",value:a.role,errorMessage:r.role,isInvalid:!!r.role,onChange:e=>t({...a,role:e}),children:[s.jsx(w,{value:"Admin",children:"Admin"},"Admin"),s.jsx(w,{value:"Teacher",children:"Teacher"},"Teacher"),s.jsx(w,{value:"Parent",children:"Parent"},"Parent")]})]}),s.jsx("div",{className:"mt-6",children:s.jsx(L,{type:"submit",color:"primary",size:"lg",radius:"sm",children:"Add User"})})]})]})})},O=()=>s.jsxs("div",{className:"w-full h-full flex",children:[s.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:s.jsx(b,{})}),s.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[s.jsx(C,{}),s.jsx(U,{})]})]});export{O as default};
