import{u as k,c as S,r as a,j as s,n as o,a as V}from"./index-DRkmS7r_.js";import{F as u,a as f,b as x}from"./index-C-x_9WTQ.js";import{c as E,a as _}from"./chunk-H4VOEXHF-j66MKvTG.js";import{i as p}from"./chunk-GQQM5TNQ-Dp_xGKim.js";import{b as w}from"./chunk-DBLREEYE-DoOwKmAJ.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useFormReset-C6_kkRsk.js";import"./useField-CJb1MFo7.js";import"./useLabels-BnmYLgFr.js";const A=()=>{const l=k(),{id:b,token:g}=S(),[n,h]=a.useState(!1),[c,j]=a.useState(!1),[i,d]=a.useState({password:"",confirmPassword:""}),y=a.useCallback(()=>h(e=>!e),[]),C=a.useCallback(()=>j(e=>!e),[]),m=a.useCallback(e=>{d(t=>({...t,[e.target.name]:e.target.value}))},[]),v=a.useCallback(()=>{l("/login")},[l]),N=async e=>{e.preventDefault();const{password:t,confirmPassword:P}=i;if(t!==P){o.error("Passwords do not match!");return}try{const r=await V.post(`/api/reset-password/${b}/${g}`,{password:t});r.data.error?o.error(r.data.error):(d({password:"",confirmPassword:""}),o.success("Password reset successfully."),l("/login"))}catch(r){o.error("Something went wrong. Please try again."),console.error(r)}};return s.jsx("div",{className:"flex bg-[#f6fbff] w-full h-screen justify-center items-center",children:s.jsx("div",{className:"w-full max-w-lg px-6 sm:px-8 lg:px-12",children:s.jsxs(E,{className:"flex flex-col p-6",children:[s.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-center",children:"Reset Password"}),s.jsx("p",{className:"text-sm text-center mt-2",children:"Enter your new password below."}),s.jsx(_,{children:s.jsxs("form",{onSubmit:N,children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx(p,{name:"password",label:"Password",variant:"bordered",value:i.password,onChange:m,required:!0,endContent:s.jsx("button",{className:"focus:outline-none",type:"button",onClick:y,"aria-label":"Toggle password visibility",children:s.jsx(u,{icon:n?f:x,className:"text-xl"})}),type:n?"text":"password"}),s.jsx(p,{name:"confirmPassword",label:"Confirm Password",variant:"bordered",value:i.confirmPassword,onChange:m,required:!0,endContent:s.jsx("button",{className:"focus:outline-none",type:"button",onClick:C,"aria-label":"Toggle confirm password visibility",children:s.jsx(u,{icon:c?f:x,className:"text-xl"})}),type:c?"text":"password"})]}),s.jsxs("div",{className:"flex justify-between gap-4 mt-6",children:[s.jsx(w,{className:"w-full sm:w-auto",size:"lg",radius:"md",color:"danger",variant:"light",onClick:v,children:"Back to Login"}),s.jsx(w,{type:"submit",className:"w-full sm:w-auto",size:"lg",radius:"md",color:"primary",children:"Submit"})]})]})})]})})})};export{A as default};
