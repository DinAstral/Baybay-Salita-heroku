import{r as c,j as e}from"./react-BCcS7c0c.js";import{A as N}from"./AdminSidebar-hE8um79y.js";import{F as v,d as y}from"./@fortawesome-BVdY808A.js";import{a as f}from"./axios-CCb-kr4I.js";import{_ as d}from"./react-hot-toast-Dux6v_Wl.js";import{a as b,g as S}from"./react-router-MkLRJz4d.js";import{t as C,i as n,s as p,l,b as g}from"./@nextui-org-CLkIIHEi.js";import{C as A}from"./ContentHeader-B2Ht1HTi.js";import"./@babel-m2JXyA6a.js";import"./react-router-dom-Dk6_dLEo.js";import"./react-dom-rv-KAOpM.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-BOUEh3jQ.js";import"./profile-Berhznzr.js";import"./index-ByxnD8YG.js";import"./goober-vt3s6TGe.js";import"./@react-aria-CfXSs2UI.js";import"./@react-stately-ChQ0zIrC.js";import"./clsx-B-dksMZM.js";import"./@swc-DS7M6wx8.js";import"./@internationalized-BB0Nk989.js";import"./framer-motion-BvVSIgoR.js";import"./react-textarea-autosize-bEG1sDiq.js";import"./use-latest-2zZSkz0C.js";import"./use-isomorphic-layout-effect-Co3QFFXf.js";import"./use-composed-ref-BmZZpR7Y.js";import"./tailwind-variants-ayMnMv5e.js";import"./tailwind-merge-Dc5vmgZ1.js";import"./prop-types-LuavYUF2.js";const E=()=>{const m=b(),{id:o}=S(),[a,r]=c.useState({LRN:"",FirstName:"",MiddleName:"",LastName:"",Age:"",Level:"",Section:"",Birthday:"",Address:"",MotherTongue:"",Nationality:"",Gender:"",ContactNumber:""}),u=t=>{if(!t)return"";const i=new Date(t),s=new Date;let x=s.getFullYear()-i.getFullYear();const h=s.getMonth()-i.getMonth();return(h<0||h===0&&s.getDate()<i.getDate())&&x--,x};c.useEffect(()=>{const t=u(a.Birthday);r(i=>({...i,Age:t}))},[a.Birthday]),c.useEffect(()=>{f.get(`/api/getStudentID/${o}`).then(t=>{r(t.data)}).catch(t=>{console.error("Error fetching student data:",t),d.error("Failed to fetch student data. Please try again later.")})},[o]);const j=async t=>{t.preventDefault();const i=u(a.Birthday);if(a.Age!==i){d.error("Age does not match the birthday. Please correct it.");return}try{const{data:s}=await f.patch(`/api/updateStudent/${o}`,a);s.error?d.error(s.error):(d.success("Updated Student info Successfully."),m("/adminStudents"))}catch(s){console.error("Error updating student data:",s),d.error("Failed to update student. Please try again.")}};return e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"max-w-9xl mx-auto bg-white shadow-lg rounded-lg p-8 pt",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Update Student's Information"}),e.jsx(C,{showArrow:!0,content:e.jsxs("div",{className:"px-2 py-1",children:[e.jsx("div",{className:"text-sm font-bold",children:"Update Information"}),e.jsx("div",{className:"text-xs",children:"This function will update the information of the students in the system."})]}),children:e.jsx(v,{icon:y,size:"md",className:"text-gray-600"})})]}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"LRN"}),e.jsx(n,{underlined:!0,clearable:!0,value:a.LRN,onChange:t=>r({...a,LRN:t.target.value}),placeholder:"Enter student's LRN",maxLength:12,type:"number"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"First Name"}),e.jsx(n,{underlined:!0,clearable:!0,value:a.FirstName,onChange:t=>r({...a,FirstName:t.target.value}),placeholder:"Enter the First Name"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Last Name"}),e.jsx(n,{underlined:!0,clearable:!0,value:a.LastName,onChange:t=>r({...a,LastName:t.target.value}),placeholder:"Enter the Last Name"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Section"}),e.jsxs(p,{placeholder:"Select Section",value:a.Section,onChange:t=>r({...a,Section:t}),children:[e.jsx(l,{disabled:!0,children:"Select Section"},""),e.jsx(l,{children:"Camia"},"Camia"),e.jsx(l,{children:"Daffodil"},"Daffodil"),e.jsx(l,{children:"Daisy"},"Daisy"),e.jsx(l,{children:"Gumamela"},"Gumamela"),e.jsx(l,{children:"Lily"},"Lily"),e.jsx(l,{children:"Rosal"},"Rosal"),e.jsx(l,{children:"Rose"},"Rose"),e.jsx(l,{children:"Santan"},"Santan"),e.jsx(l,{children:"Special"},"Special")]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Birthday"}),e.jsx(n,{underlined:!0,clearable:!0,value:a.Birthday,onChange:t=>r({...a,Birthday:t.target.value}),type:"date"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Address"}),e.jsx(n,{underlined:!0,clearable:!0,value:a.Address,onChange:t=>r({...a,Address:t.target.value}),placeholder:"Enter the Address"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Mother Tongue"}),e.jsx(n,{underlined:!0,clearable:!0,value:a.MotherTongue,onChange:t=>r({...a,MotherTongue:t.target.value}),placeholder:"Enter the Mother Tongue"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Nationality"}),e.jsx(n,{underlined:!0,clearable:!0,value:a.Nationality,onChange:t=>r({...a,Nationality:t.target.value}),placeholder:"Enter the Nationality"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Gender"}),e.jsxs(p,{placeholder:"Select Gender",value:a.Gender,onChange:t=>r({...a,Gender:t}),children:[e.jsx(l,{disabled:!0,children:"Select Gender"},""),e.jsx(l,{children:"Male"},"male"),e.jsx(l,{children:"Female"},"female"),e.jsx(l,{children:"Other"},"other")]})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx(g,{type:"submit",color:"primary",auto:!0,children:"Save Changes"}),e.jsx(g,{auto:!0,flat:!0,color:"danger",onClick:()=>m(-1),className:"ml-4",children:"Cancel"})]})]})]})})},ae=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6]",children:e.jsx(N,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(A,{}),e.jsx(E,{})]})]});export{ae as default};
