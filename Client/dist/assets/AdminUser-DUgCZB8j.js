import{j as e,r as c}from"./react-BCcS7c0c.js";import{A as B}from"./AdminSidebar-D1UWcytW.js";import{C as Y}from"./ContentHeader-DwIQzFOv.js";import{P as G}from"./PrintRecord-LBy-exmt.js";import{P as t}from"./prop-types-LuavYUF2.js";import{L as p}from"./react-router-dom-Dk6_dLEo.js";import{m as h,f as m,g as x,h as j,j as f,b as a,t as R,s as Q,l as b,i as W,k as J,n as X,o as w,p as Z,q as ee,r as v}from"./@nextui-org-CLkIIHEi.js";import{_ as se}from"./react-hot-toast-Dux6v_Wl.js";import{a as S}from"./axios-CCb-kr4I.js";import{l as re}from"./react-export-table-to-excel-CDdXcfrC.js";import{R as ie}from"./react-paginate-BYTMUaIF.js";import{F as g,d as le,i as te,j as ae}from"./@fortawesome-BVdY808A.js";import"./@babel-m2JXyA6a.js";import"./profile-Berhznzr.js";import"./index-DzzbZJ-V.js";import"./react-dom-rv-KAOpM.js";import"./scheduler-CzFDRTuY.js";import"./react-router-MkLRJz4d.js";import"./@remix-run-BOUEh3jQ.js";import"./goober-vt3s6TGe.js";import"./@react-aria-CfXSs2UI.js";import"./@react-stately-ChQ0zIrC.js";import"./clsx-B-dksMZM.js";import"./@swc-DS7M6wx8.js";import"./@internationalized-BB0Nk989.js";import"./framer-motion-BvVSIgoR.js";import"./react-textarea-autosize-bEG1sDiq.js";import"./use-latest-2zZSkz0C.js";import"./use-isomorphic-layout-effect-Co3QFFXf.js";import"./use-composed-ref-BmZZpR7Y.js";import"./tailwind-variants-ayMnMv5e.js";import"./tailwind-merge-Dc5vmgZ1.js";const A=({show:i,onHide:s})=>e.jsx(h,{isOpen:i,onClose:s,"aria-labelledby":"add-user-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(m,{children:[e.jsx(x,{className:"flex flex-col",id:"add-user-modal-title",children:"Add User Information"}),e.jsx(j,{children:e.jsx("p",{children:"Do you want to add a user?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"danger",variant:"light",onClick:s,children:"Cancel"}),e.jsx(p,{to:"/adminAddUser",children:e.jsx(a,{color:"primary",children:"Add"})})]})]})});A.propTypes={show:t.bool.isRequired,onHide:t.func.isRequired};const k=({show:i,onHide:s,user:r})=>e.jsx(h,{isOpen:i,onClose:s,"aria-labelledby":"edit-user-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(m,{children:[e.jsx(x,{className:"flex flex-col",id:"edit-user-modal-title",children:"Add User Information"}),e.jsx(j,{children:e.jsx("p",{children:"You are now going to update the selected user. Do you wish to continue?"})}),e.jsxs(f,{children:[e.jsx(a,{variant:"light",color:"danger",onClick:s,children:"Cancel"}),e.jsx(p,{to:`/AdminEditUser/${r==null?void 0:r._id}`,children:e.jsx(a,{color:"primary",children:"Update"})})]})]})});k.propTypes={show:t.bool.isRequired,onHide:t.func.isRequired,user:t.object};const q=({show:i,onHide:s,user:r})=>e.jsx(h,{isOpen:i,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(m,{children:[e.jsx(x,{className:"flex flex-col",id:"edit-user-modal-title",children:"View Parent Information"}),e.jsx(j,{children:e.jsx("p",{children:"Do you want to View the profile of Parent selected?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"danger",variant:"light",onClick:s,children:"Cancel"}),e.jsx(p,{to:`/adminViewParent/${r==null?void 0:r.UserID}`,children:e.jsx(a,{color:"primary",children:"View"})})]})]})});q.propTypes={show:t.bool.isRequired,onHide:t.func.isRequired,user:t.object};const E=({show:i,onHide:s,user:r})=>e.jsx(h,{isOpen:i,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(m,{children:[e.jsx(x,{className:"flex flex-col",id:"edit-user-modal-title",children:"View Teacher Information"}),e.jsx(j,{children:e.jsx("p",{children:"Do you want to view the profile of teacher selected?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"danger",variant:"light",onClick:s,children:"Cancel"}),e.jsx(p,{to:`/adminViewTeacher/${r==null?void 0:r.UserID}`,children:e.jsx(a,{color:"primary",children:"View"})})]})]})});E.propTypes={show:t.bool.isRequired,onHide:t.func.isRequired,user:t.object};const I=({show:i,onHide:s,user:r})=>e.jsx(h,{isOpen:i,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(m,{children:[e.jsx(x,{className:"flex flex-col",id:"contained-modal-title-vcenter",children:"Update Parent Information"}),e.jsx(j,{children:e.jsx("p",{children:"Are you sure you want to update this parent's information?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"danger",variant:"light",onClick:s,children:"Cancel"}),e.jsx(p,{to:`/adminEditParent/${r==null?void 0:r._id}`,children:e.jsx(a,{color:"primary",children:"Update"})})]})]})});I.propTypes={show:t.bool.isRequired,onHide:t.func.isRequired,user:t.object};const V=({show:i,onHide:s,user:r})=>e.jsx(h,{isOpen:i,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(m,{children:[e.jsx(x,{className:"flex flex-col",id:"contained-modal-title-vcenter",children:"Update Teacher Information"}),e.jsx(j,{children:e.jsx("p",{children:"Are you sure you want to update this teacher's information?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"danger",variant:"light",onClick:s,children:"Cancel"}),e.jsx(p,{to:`/adminEditTeacher/${r==null?void 0:r._id}`,children:e.jsx(a,{color:"primary",children:"Update"})})]})]})});V.propTypes={show:t.bool.isRequired,onHide:t.func.isRequired,user:t.object};const ne=({show:i,onHide:s})=>e.jsx(h,{isOpen:i,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(m,{children:[e.jsx(x,{id:"contained-modal-title-vcenter",children:"Delete User Successful"}),e.jsx(j,{children:e.jsx("p",{children:"You have deleted the User information."})}),e.jsx(f,{children:e.jsx(a,{color:"danger",onClick:s,children:"Close"})})]})}),H=({show:i,onHide:s,user:r,onDeleteSuccess:o})=>{const[d,u]=c.useState(!1),y=async()=>{try{await S.delete(`/api/deleteUser/${r.email}`),u(!0),o()}catch(C){console.error("Error deleting user:",C),se.error("Failed to delete user. Please try again later.")}};return e.jsxs(e.Fragment,{children:[e.jsx(h,{isOpen:i,onClose:s,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(m,{children:[e.jsx(x,{id:"contained-modal-title-vcenter",children:"Delete User Information"}),e.jsx(j,{children:e.jsx("p",{children:"Are you sure you want to delete this User's information?"})}),e.jsxs(f,{children:[e.jsx(a,{color:"default",variant:"light",onClick:s,children:"Cancel"}),e.jsx(a,{color:"danger",onClick:y,children:"Delete"})]})]})}),e.jsx(ne,{show:d,onHide:()=>{u(!1),s()}})]})};H.propTypes={show:t.bool.isRequired,onHide:t.func.isRequired,onDeleteSuccess:t.func.isRequired,user:t.object};const oe=(i,s,r)=>{let o=i;return s!=="default"&&(o=o.filter(d=>d.role===s)),r&&(o=o.filter(d=>d.email.toLowerCase().includes(r.toLowerCase()))),o},de=(i,s,r)=>{const o=s*r;return i.slice(o,o+r)},ce=()=>{const[i,s]=c.useState({add:!1,print:!1,editUser:!1,editTeacher:!1,viewTeacher:!1,editParent:!1,viewParent:!1,delete:!1}),[r,o]=c.useState([]),[d,u]=c.useState(null),[y,C]=c.useState(0),[D]=c.useState(10),[U,K]=c.useState(""),[N,O]=c.useState("default"),_=c.useRef(null),{onDownload:F}=re.useDownloadExcel({currentTableRef:_.current,filename:"Users table",sheet:"Users"}),P=async()=>{try{const l=await S.get("/api/users");o(l.data)}catch(l){console.error(l)}};c.useEffect(()=>{P()},[]);const T=oe(r,N,U),M=de(T,y,D),n=(l,L)=>{s(z=>({...z,[l]:L}))},$=l=>{C(l.selected)};return e.jsxs("div",{className:"px-9",children:[e.jsx(A,{show:i.add,onHide:()=>n("add",!1)}),e.jsx(k,{show:i.editUser,onHide:()=>n("editUser",!1),user:d}),e.jsx(G,{show:i.print,onHide:()=>n("print",!1),print:F}),e.jsx(E,{show:i.viewTeacher,user:d,onHide:()=>n("viewTeacher",!1)}),e.jsx(V,{show:i.editTeacher,user:d,onHide:()=>n("editTeacher",!1)}),e.jsx(q,{show:i.viewParent,user:d,onHide:()=>n("viewParent",!1)}),e.jsx(I,{show:i.editParent,user:d,onHide:()=>n("editParent",!1)}),e.jsx(H,{show:i.delete,onHide:()=>n("delete",!1),user:d,onDeleteSuccess:P}),e.jsxs("div",{className:"content-title-header",children:[e.jsxs("div",{children:["Manage User",e.jsx(R,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"User Table"}),e.jsx("div",{className:"text-tiny",children:"This function will view the information of the students in the system."})]}),children:e.jsx(g,{icon:le,size:"1x",className:"help-icon"})})]}),e.jsx("div",{className:"generate-report",children:e.jsx(R,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Print"}),e.jsx("div",{className:"text-tiny",children:"Generate report/Print table"})]}),children:e.jsx(g,{icon:te,size:"1x",className:"print-icon",onClick:()=>n("print",!0)})})})]}),e.jsx("div",{className:"content-container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"card mt-1 border-0",children:[e.jsxs("div",{className:"list-header-drop-score",children:[e.jsxs(Q,{labelPlacement:"outside",label:"Sort by Role",variant:"bordered",className:"bg-transparent w-[20%]",onChange:l=>O(l.target.value),value:N,children:[e.jsx(b,{children:"All"},"default"),e.jsx(b,{children:"Admin"},"Admin"),e.jsx(b,{children:"Parent"},"Parent"),e.jsx(b,{children:"Teacher"},"Teacher")]}),e.jsx("div",{className:"w-[40%] flex pt-8",children:e.jsx(W,{variant:"bordered",type:"text",placeholder:"Enter User Email",value:U,onChange:l=>K(l.target.value),startContent:e.jsx(g,{icon:ae,size:"1x",inverse:!0,className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e.jsx("div",{className:"back-button-profile",children:e.jsx(a,{color:"primary",className:"w-[120px] text-md p-1",onClick:()=>n("add",!0),children:"Add User"})})]}),e.jsx("div",{className:"card-body scrollable-table scrollable-container",children:e.jsxs(J,{"aria-label":"Assessment Table",ref:_,removeWrapper:!0,color:"primary",selectionMode:"single",children:[e.jsxs(X,{children:[e.jsx(w,{children:"UserID"}),e.jsx(w,{children:"Email"}),e.jsx(w,{children:"Role"}),e.jsx(w,{className:"text-center",children:"Actions"})]}),e.jsx(Z,{emptyContent:"No rows to display.",children:M.map(l=>e.jsxs(ee,{children:[e.jsx(v,{children:l.UserID}),e.jsx(v,{children:l.email}),e.jsx(v,{children:l.role}),e.jsx(v,{className:"text-center",children:e.jsxs("div",{className:"table-buttons",children:[e.jsx(a,{color:"default",onClick:()=>{u(l),l.role==="Teacher"?n("viewTeacher",!0):l.role==="Parent"&&n("viewParent",!0)},children:"View"}),e.jsx(a,{color:"primary",onClick:()=>u(l)||n("editUser",!0),children:"Update"}),e.jsx(a,{color:"danger",onClick:()=>u(l)||n("delete",!0),children:"Delete"})]})})]},l._id))})]})})]}),e.jsx(ie,{pageCount:Math.ceil(T.length/D),onPageChange:$,containerClassName:"pagination",activeClassName:"active"})]})})})]})},$e=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6]",children:e.jsx(B,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(Y,{}),e.jsx(ce,{})]})]});export{$e as default};
