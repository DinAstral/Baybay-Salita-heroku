import{r as n,j as e}from"./react-BCcS7c0c.js";import{A as k}from"./AdminSidebar-hE8um79y.js";import{p as v}from"./profile-Berhznzr.js";import{F as f,d as U,k as E,f as S}from"./@fortawesome-BVdY808A.js";import{U as B}from"./index-ByxnD8YG.js";import{a as p}from"./axios-CCb-kr4I.js";import{_ as i}from"./react-hot-toast-Dux6v_Wl.js";import{b as _,a as $}from"./react-router-MkLRJz4d.js";import{t as b,b as u,i as o,s as y,l as c}from"./@nextui-org-CLkIIHEi.js";import"./@babel-m2JXyA6a.js";import"./react-router-dom-Dk6_dLEo.js";import"./react-dom-rv-KAOpM.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-BOUEh3jQ.js";import"./prop-types-LuavYUF2.js";import"./goober-vt3s6TGe.js";import"./@react-aria-CfXSs2UI.js";import"./@react-stately-ChQ0zIrC.js";import"./clsx-B-dksMZM.js";import"./@swc-DS7M6wx8.js";import"./@internationalized-BB0Nk989.js";import"./framer-motion-BvVSIgoR.js";import"./react-textarea-autosize-bEG1sDiq.js";import"./use-latest-2zZSkz0C.js";import"./use-isomorphic-layout-effect-Co3QFFXf.js";import"./use-composed-ref-BmZZpR7Y.js";import"./tailwind-variants-ayMnMv5e.js";import"./tailwind-merge-Dc5vmgZ1.js";const L=()=>{const g=_(),A=$(),[m,h]=n.useState(0),{user:x}=n.useContext(B),[C,N]=n.useState(v),[a,l]=n.useState({_id:"",UserID:"",FirstName:"",LastName:"",Age:"",Birthday:"",Gender:"",Address:"",Status:"",Nationality:"",ContactNumber:"",Picture:"",email:""});n.useEffect(()=>{p.get(`/api/getAdmin/${x.UserID}`).then(s=>{l(s.data),N(s.data.Picture||v)}).catch(()=>{i.error("Failed to fetch admin data. Please try again later.")})},[x.UserID]),n.useEffect(()=>{const t=["/adminProfile"].findIndex(r=>r===g.pathname);h(t)},[g.pathname]);const D=async s=>{const t=s.target.files[0];if(t){const r=new FormData;r.append("Profile",t),r.append("role",x.role),r.append("UserID",x.UserID);try{const d=await p.post("/api/profileUpdate",r,{headers:{"Content-Type":"multipart/form-data"}});d.data.message?(N(d.data.updatedProfileUrl),i.success("Profile picture updated successfully!")):d.data.error&&i.error(`Error: ${d.data.error}`)}catch{i.error("Failed to update profile picture. Please try again later.")}}},w=()=>{h(1)},I=s=>{h(s)},F=s=>{if(!s)return"";const t=new Date(s),r=new Date;let d=r.getFullYear()-t.getFullYear();const j=r.getMonth()-t.getMonth();return(j<0||j===0&&r.getDate()<t.getDate())&&d--,d};n.useEffect(()=>{const s=F(a.Birthday);l(t=>({...t,Age:s}))},[a.Birthday]);const P=async s=>{s.preventDefault();try{const t=await p.patch(`/api/updateAdmin/${a.UserID}`,a);if(t.status===200&&t.data){i.success("Admin profile updated successfully!");const r=await p.get(`/api/getAdmin/${a.UserID}`);l(r.data)}else i.error(`Error: ${t.data.error||"Update failed."}`)}catch(t){console.error("Error updating admin profile:",t),t.response?i.error(`Failed to update admin profile: ${t.response.data.error||"Please try again later."}`):t.request?i.error("No response from server. Please check your connection."):i.error("Failed to update admin profile. Please try again later.")}};return e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"flex items-center justify-start gap-2 mb-5",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Admin Profile"}),e.jsx(b,{showArrow:!0,content:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"Profile Information"}),e.jsx("div",{className:"text-xs",children:"This function will view your information."})]}),children:e.jsx(f,{icon:U,className:"text-gray-600"})})]}),e.jsxs("div",{className:"w-full max-w-8xl mx-auto bg-white shadow-lg rounded-lg p-[3rem]",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 relative",children:[e.jsx(b,{content:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"Profile Picture Update"}),e.jsx("div",{className:"text-xs",children:"You can update your profile picture once clicked."})]}),children:e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("img",{src:C,className:"w-32 h-32 rounded-full",alt:"Profile"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:D})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold",children:a?`${a.FirstName} ${a.LastName}`:"Admin Name"}),e.jsx("h4",{children:a?a.role:"Position"}),e.jsxs("div",{className:"flex flex-col mt-4 text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{icon:E,className:"text-gray-600"}),e.jsxs("span",{children:["Admin ID Number: ",a?a.UserID:"Admin ID"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(f,{icon:S,className:"text-gray-600"}),e.jsxs("span",{children:["Email Address: ",a?a.email:"Email Address"]})]})]})]}),e.jsx(u,{color:"primary",className:"w-[120px] text-md p-1",onClick:()=>A(-1),children:"Back"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex gap-6 border-b pb-2",children:[e.jsx(u,{variant:"light",radius:"none",className:`text-md font-medium ${m===0?"border-b-4 border-blue-500":""}`,onClick:()=>I(0),children:"Basic Information"}),e.jsx(u,{variant:"light",radius:"none",className:`text-md font-medium ${m===1?"border-b-4 border-blue-500":""}`,onClick:w,children:"Update"})]}),m===0&&e.jsx("div",{className:"mt-6 bg-[#faf9f4] p-6 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"First Name:"}),e.jsx("p",{className:"text-gray-800",children:a.FirstName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Civil Status:"}),e.jsx("p",{className:"text-gray-800",children:a.Status||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Last Name:"}),e.jsx("p",{className:"text-gray-800",children:a.LastName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Nationality:"}),e.jsx("p",{className:"text-gray-800",children:a.Nationality||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Gender:"}),e.jsx("p",{className:"text-gray-800",children:a.Gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Birthday:"}),e.jsx("p",{className:"text-gray-800",children:a.Birthday||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Age:"}),e.jsx("p",{className:"text-gray-800",children:a.Age||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Contact Number:"}),e.jsx("p",{className:"text-gray-800",children:a.ContactNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Address:"}),e.jsx("p",{className:"text-gray-800",children:a.Address||"N/A"})]})]})}),m===1&&e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx(o,{clearable:!0,bordered:!0,label:"First Name",value:a.FirstName,onChange:s=>l({...a,FirstName:s.target.value})}),e.jsx(o,{clearable:!0,bordered:!0,label:"Last Name",value:a.LastName,onChange:s=>l({...a,LastName:s.target.value})}),e.jsxs(y,{label:"Civil Status",value:a.Status,onChange:s=>l({...a,Status:s}),children:[e.jsx(c,{value:"Single",children:"Single"}),e.jsx(c,{value:"Married",children:"Married"}),e.jsx(c,{value:"Divorced",children:"Divorced"})]}),e.jsx(o,{clearable:!0,bordered:!0,label:"Address",value:a.Address,onChange:s=>l({...a,Address:s.target.value})}),e.jsx(o,{clearable:!0,bordered:!0,label:"Contact Number",value:a.ContactNumber,onChange:s=>l({...a,ContactNumber:s.target.value})}),e.jsxs(y,{label:"Gender",value:a.Gender,onChange:s=>l({...a,Gender:s}),children:[e.jsx(c,{value:"Male",children:"Male"}),e.jsx(c,{value:"Female",children:"Female"})]}),e.jsx(o,{clearable:!0,bordered:!0,label:"Birthday",type:"date",value:a.Birthday.split("T")[0],onChange:s=>l({...a,Birthday:s.target.value})}),e.jsx(o,{clearable:!0,bordered:!0,label:"Nationality",value:a.Nationality,onChange:s=>l({...a,Nationality:s.target.value})})]}),e.jsx(u,{type:"submit",className:"mt-6",children:"Update Profile"})]})]})]})]})},xe=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6]",children:e.jsx(k,{})}),e.jsx("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:e.jsx(L,{})})]});export{xe as default};
