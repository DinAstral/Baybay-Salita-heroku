import{d as E,u as B,r as l,U,a as u,_ as c,j as e}from"./index-B4wSyu9X.js";import{C as _}from"./ContentHeader-B1fghRo3.js";import{P as $}from"./ParentSidebar-CbiS6VIv.js";import{p as P,t as A}from"./profile-CveRvT9q.js";import{F as p,d as S,k as L,f as q}from"./index-C4NzbEoC.js";import{b as x}from"./chunk-DBLREEYE-CPTf1qhq.js";import{i as o}from"./chunk-GQQM5TNQ-DAoGedlE.js";import{s as G,l as f}from"./chunk-CEHIK4GH-BuZ88jNB.js";import"./useOverlayTriggerState-B2eAueuT.js";import"./chunk-CIZQCQPA-QIsEdyyr.js";import"./useField-DsC8VyRP.js";import"./useLabels-CWEVCThf.js";import"./useFormReset-BV-vE7GN.js";import"./getChildNodes-CNdKXxzI.js";import"./useDialog-D_jD5Yn-.js";import"./VisuallyHidden-6BjKz1X1.js";const Y=()=>{const g=E(),C=B(),{user:t}=l.useContext(U),[m,N]=l.useState(0);l.useState(!1);const[w,I]=l.useState(P),[n,D]=l.useState({}),[j,F]=l.useState(null),[s,i]=l.useState({});l.useEffect(()=>{u.get(`/api/getParent/${t.UserID}`).then(a=>{I(a.data.Picture||P),D(a.data),i(a.data)}).catch(()=>{c.error("Failed to fetch parent data. Please try again later.")})},[t.UserID]),l.useEffect(()=>{const r=["/parentProfile"].findIndex(d=>d===g.pathname);N(r)},[g.pathname]),l.useEffect(()=>{n.Birthday&&F((r=>{const d=new Date(r),h=new Date;let b=h.getFullYear()-d.getFullYear();const y=h.getMonth()-d.getMonth();return(y<0||y===0&&h.getDate()<d.getDate())&&b--,b})(n.Birthday))},[n.Birthday]);const v=a=>{N(a)},k=async a=>{a.preventDefault();try{const r=await u.patch(`/api/updateParent/${s.UserID}`,s);if(r.status===200&&r.data){c.success("Your profile updated successfully!");const d=await u.get(`/api/getParent/${s.UserID}`);i(d.data)}else c.error(`Error: ${r.data.error||"Update failed."}`)}catch(r){console.error("Error updating parent profile:",r),r.response?c.error(`Failed to update parent profile: ${r.response.data.error||"Please try again later."}`):r.request?c.error("No response from server. Please check your connection."):c.error("Failed to update parent profile. Please try again later.")}};return e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"flex items-center justify-start gap-2 mb-5",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Parent Profile"}),e.jsx(A,{showArrow:!0,content:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"Profile Information"}),e.jsx("div",{className:"text-xs",children:"This function will view your profile."})]}),children:e.jsx(p,{icon:S,className:"text-gray-600"})})]}),e.jsxs("div",{className:"w-full max-w-8xl mx-auto bg-white shadow-lg rounded-lg p-[3rem]",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 relative",children:[e.jsx(A,{content:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"Profile Picture Update"}),e.jsx("div",{className:"text-xs",children:"You can update your profile picture once clicked."})]}),children:e.jsx("label",{className:"cursor-pointer",children:e.jsx("img",{src:w,className:"w-32 h-32 rounded-full",alt:"Profile"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t?`${t.FirstName} ${t.LastName}`:"Parent Name"}),e.jsx("h4",{children:t?t.role:"Role"}),e.jsxs("div",{className:"flex flex-col mt-4 text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{icon:L,className:"text-gray-600"}),e.jsxs("span",{children:["Parent ID Number: ",t?t.UserID:"Parent ID"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(p,{icon:q,className:"text-gray-600"}),e.jsxs("span",{children:["Email Address: ",t?t.email:"Email Address"]})]})]})]}),e.jsx(x,{color:"primary",onClick:()=>C(-1),children:"Back"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex gap-6 border-b pb-2",children:[e.jsx(x,{variant:"light",radius:"none",className:`text-md font-medium ${m===0?"border-b-4 border-blue-500":""}`,onClick:()=>v(0),children:"Basic Information"}),e.jsx(x,{variant:"light",radius:"none",className:`text-md font-medium ${m===1?"border-b-4 border-blue-500":""}`,onClick:()=>v(1),children:"Update"})]}),m===0&&e.jsx("div",{className:"mt-6 bg-[#faf9f4] p-6 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"First Name:"}),e.jsx("p",{className:"text-gray-800",children:t?t.FirstName:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Contact Number:"}),e.jsx("p",{className:"text-gray-800",children:n.ContactNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Last Name:"}),e.jsx("p",{className:"text-gray-800",children:t?t.LastName:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Gender:"}),e.jsx("p",{className:"text-gray-800",children:n.Gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Birthday:"}),e.jsx("p",{className:"text-gray-800",children:n.Birthday||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Age:"}),e.jsx("p",{className:"text-gray-800",children:j!==null?j:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Address:"}),e.jsx("p",{className:"text-gray-800",children:n.Address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Nationality:"}),e.jsx("p",{className:"text-gray-800",children:n.Nationality||"N/A"})]})]})}),m===1&&e.jsxs("form",{onSubmit:k,className:"mt-6 bg-[#faf9f4] p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Update Your Profile"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{required:!0,label:"First Name",value:s.FirstName||"",onChange:a=>i({...s,FirstName:a.target.value})}),e.jsx(o,{required:!0,label:"Last Name",value:s.LastName||"",onChange:a=>i({...s,LastName:a.target.value})}),e.jsxs(G,{label:"Gender",value:s.Gender||"",onChange:a=>i({...s,Gender:a}),children:[e.jsx(f,{value:"Male",children:"Male"}),e.jsx(f,{value:"Female",children:"Female"}),e.jsx(f,{value:"Other",children:"Other"})]}),e.jsx(o,{required:!0,type:"date",label:"Birthday",value:s.Birthday||"",onChange:a=>i({...s,Birthday:a.target.value})}),e.jsx(o,{required:!0,label:"Contact Number",value:s.ContactNumber||"",onChange:a=>i({...s,ContactNumber:a.target.value})}),e.jsx(o,{label:"Address",value:s.Address||"",onChange:a=>i({...s,Address:a.target.value})}),e.jsx(o,{label:"Nationality",value:s.Nationality||"",onChange:a=>i({...s,Nationality:a.target.value})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(x,{type:"submit",color:"primary",children:"Update Profile"})})]})]})]})]})},te=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6]",children:e.jsx($,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(_,{}),e.jsx(Y,{})]})]});export{te as default};
