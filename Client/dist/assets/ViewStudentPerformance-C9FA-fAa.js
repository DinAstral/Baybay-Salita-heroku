import{r as m,j as e,a as g,_ as f,u as R,U as I,c as U}from"./index-Cz5Vujn0.js";import{C as q}from"./ContentHeader-S-zyGY2Y.js";import{S as L}from"./Sidebar-llFU1R5-.js";import{P as i,F as E,d as Q}from"./index-DYcFSFXU.js";import{m as N,a as v,b as A}from"./chunk-P2T5LMDM-BK5lu7Mc.js";import{m as C,a as w}from"./chunk-QY5NICTW-BaZRS2zY.js";import{i as y}from"./chunk-GQQM5TNQ-ihTkHPWm.js";import{s as V,l as x}from"./chunk-CEHIK4GH-C3XlnChQ.js";import{t as B}from"./chunk-ATAY3LCU-C3pG8N8C.js";import{b as c}from"./chunk-DBLREEYE-u4K1mOgI.js";import{t as j}from"./profile-BZWCTT7A.js";import"./useOverlayTriggerState-CW0is1k2.js";import"./Overlay-D0KPGmXa.js";import"./useDialog-BR_xjFZD.js";import"./useLabels-CHBKrAO0.js";import"./VisuallyHidden-BI4fM_vv.js";import"./useField-BEGRl8cX.js";import"./useFormReset-II1lQ-2u.js";import"./getChildNodes-CdUGJITf.js";import"./extends-CF3RwP-h.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";import"./chunk-CIZQCQPA-6HPzdNyj.js";const P=({show:n,onHide:r})=>{const o=()=>{r()};return e.jsx(N,{isOpen:n,onClose:r,"aria-labelledby":"success-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(C,{children:[e.jsx(v,{id:"success-modal-title",children:"Feedback Created Successfully!"}),e.jsx(A,{children:e.jsx("p",{children:"You have created feedback for your student's performance!"})}),e.jsx(w,{children:e.jsx(c,{color:"primary",onClick:o,children:"Close"})})]})})},S=({show:n,onHide:r,actCode:o,userid:d,lrn:h,section:a})=>{const[b,u]=m.useState(!1),[s,t]=m.useState({Title:"",Type:"",Feedback_Date:"",Context:""}),k=async l=>{l.preventDefault();const{Feedback_Date:T,Type:D,Title:_,Context:F}=s;try{const p=await g.post("/api/submitFeedback",{UserID:d,LRN:h,Section:a,Title:_,ActivityCode:o,Type:D,Feedback_Date:T,Context:F});p.data.error?f.error(p.data.error):(t({Title:"",Type:"",Feedback_Date:"",Context:""}),f.success("Created Feedback Successfully."),u(!0))}catch(p){console.error(p),f.error("Error creating feedback. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx(N,{isOpen:n,onClose:r,size:"lg","aria-labelledby":"create-feedback-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,scrollBehavior:"inside",children:e.jsxs(C,{children:[e.jsx(v,{id:"create-feedback-modal-title",children:"Create New Feedback"}),e.jsxs("form",{onSubmit:k,children:[e.jsxs(A,{children:[e.jsx(y,{type:"text",label:"Title",placeholder:"Input a concern title",labelPlacement:"outside",variant:"bordered",className:"bg-transparent py-1 my-1",value:s.Title,onChange:l=>t({...s,Title:l.target.value})}),e.jsxs(V,{labelPlacement:"outside",label:"Type of Assessment",placeholder:"Select Type of Assessment","aria-label":"Select type of assessment",variant:"bordered",className:"bg-transparent py-1 my-1",value:s.Type,onChange:l=>t({...s,Type:l.target.value}),children:[e.jsx(x,{children:"Select Type of Assessment"},""),e.jsx(x,{children:"Assessment 1: Pagbabaybay Tunog at Letra"},"Pagbabaybay"),e.jsx(x,{children:"Assessment 2: Pantig"},"Pantig"),e.jsx(x,{children:"Assessment 3: Salita"},"Salita"),e.jsx(x,{children:"Assessment 4: Pagbabasa"},"Pagbabasa")]}),e.jsx(y,{className:"pt-2",type:"date",label:"Feedback Date",labelPlacement:"outside",variant:"bordered",value:s.Feedback_Date,onChange:l=>t({...s,Feedback_Date:l.target.value})}),e.jsx(B,{placeholder:"Input feedback context",label:"Context",labelPlacement:"outside",variant:"bordered",className:"bg-transparent py-1 my-1",value:s.Context,onChange:l=>t({...s,Context:l.target.value})})]}),e.jsxs(w,{children:[e.jsx(c,{color:"danger",variant:"light",onClick:r,children:"Close"}),e.jsx(c,{color:"primary",type:"submit",children:"Send Feedback"})]})]})]})}),e.jsx(P,{show:b,onHide:()=>u(!1)})]})};S.propTypes={show:i.bool.isRequired,onHide:i.func.isRequired,actCode:i.string.isRequired,userid:i.string.isRequired,lrn:i.string.isRequired,section:i.string.isRequired};P.propTypes={show:i.bool.isRequired,onHide:i.func.isRequired};const $=n=>{const r=parseInt(n,10);if(isNaN(r))return"Not applicable";const o=Math.floor(r/60),d=r%60;return`${o}:${d<10?"0":""}${d} min`},z=()=>{const n=R(),[r,o]=m.useState(!1),{user:d}=m.useContext(I),{UserInputId:h}=U(),[a,b]=m.useState({UserInputId:"",LRN:"",Section:"",ActivityCode:"",Type:"",PerformanceItems:[],Questions:[],Score:"",TimeRead:""});m.useEffect(()=>{(async()=>{try{const t=await g.get(`/api/getPerformance/${h}`);b(t.data)}catch{f.error("Failed to fetch performance data. Please try again later.")}})()},[h]);const u=()=>{o(!0)};return e.jsxs("div",{className:"p-10",children:[e.jsx(S,{show:r,onHide:()=>o(!1),actCode:a.ActivityCode,userid:d.UserID,lrn:a.LRN,section:a.Section}),e.jsxs("div",{className:"flex items-center justify-start gap-2 mb-5",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"View Performance"}),e.jsx(j,{showArrow:!0,content:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"View Student Performance"}),e.jsx("div",{className:"text-xs",children:"This section displays the student's performance."})]}),children:e.jsx(E,{icon:Q,className:"text-gray-600"})})]}),e.jsxs("div",{className:"w-full max-w-8xl mx-auto bg-white shadow-lg rounded-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Assessment Details"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Activity Code:"})," ",a.ActivityCode||"N/A"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"LRN:"})," ",a.LRN||"N/A"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Section:"})," ",a.Section||"N/A"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Type:"})," ",a.Type||"N/A"]})]}),a.Type==="Pagbabasa"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Questions and Answers"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Score:"})," ",a.Score||"N/A"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Time Read:"})," ",$(a.TimeRead)]}),a.Questions&&a.Questions.length>0?e.jsx("ul",{className:"list-none pl-0 space-y-4",children:a.Questions.map((s,t)=>e.jsxs("li",{className:"bg-gray-100 p-4 rounded-lg shadow",children:[e.jsxs("p",{className:"text-gray-800",children:[e.jsxs("strong",{children:["Question ",t+1,":"]})," ",s.Question||"N/A"]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Answer:"})," ",s.Answer||"N/A"]})]},t))}):e.jsx("p",{className:"text-gray-700",children:"No questions available for this assessment."})]}),a.Type!=="Pagbabasa"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Items"}),a.PerformanceItems&&a.PerformanceItems.length>0?e.jsx("ul",{className:"list-none pl-0 space-y-4",children:a.PerformanceItems.map((s,t)=>e.jsxs("li",{className:"bg-gray-100 p-4 rounded-lg shadow",children:[e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Item Code:"})," ",s.ItemCode]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Word:"})," ",s.Word||"N/A"]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"User Audio:"}),s.UserAudioURL?e.jsx(j,{content:"Play User Audio",children:e.jsx(c,{as:"a",href:s.UserAudioURL,target:"_blank",rel:"noopener noreferrer",color:"primary",size:"sm",className:"ml-2 my-2",children:"Play User Audio"})}):"No audio uploaded"]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Default Audio:"}),s.DefaultAudio&&e.jsx(j,{content:"Play Default Audio",children:e.jsx(c,{as:"a",href:s.DefaultAudio,target:"_blank",rel:"noopener noreferrer",color:"primary",size:"sm",className:"ml-2 my-2",children:"Play Default Audio"})})]})]},t))}):e.jsx("p",{className:"text-gray-700",children:"No items available for this assessment."})]}),e.jsxs("div",{className:"mt-6 gap-5 flex",children:[e.jsx(c,{color:"danger",onClick:()=>n(-1),className:"my-4",children:"Back"}),e.jsx(c,{color:"primary",onClick:u,className:"my-4",children:"Feedback"})]})]})]})},xe=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(L,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(q,{}),e.jsx(z,{})]})]});export{xe as default};
