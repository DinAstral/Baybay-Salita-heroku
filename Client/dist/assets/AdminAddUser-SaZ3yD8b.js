import{u as g,r as N,j as s,a as w,_ as d}from"./index-Br4U8MD5.js";import{A as v}from"./AdminSidebar-Dn3RLWYw.js";import{F as j,d as b}from"./index-BtZPxBKx.js";import{t as P}from"./profile-VYDC2WoQ.js";import{i as m}from"./chunk-GQQM5TNQ-BIEoL1OC.js";import{s as A,l as u}from"./chunk-CEHIK4GH-CRh0X0eL.js";import{b as F}from"./chunk-DBLREEYE-BYMmdl1I.js";import{C as y}from"./ContentHeader-BMNppMT9.js";import"./useOverlayTriggerState-DrNFVUH_.js";import"./chunk-CIZQCQPA-5waRi0ZM.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useFormReset-B_09FROi.js";import"./useField-D2XaPJ68.js";import"./useLabels-DjJTkHz4.js";import"./useDialog-_o7Lpg9q.js";import"./VisuallyHidden-BqHc7wvF.js";import"./Overlay-DgzVAHdl.js";function I(c,r){const o="0123456789";let i="";switch(c){case"Parent":i="parentID_";break;case"Teacher":i="teacherID_";break;case"Admin":i="adminID_";break}let l=i;const h=o.length;for(let e=0;e<r;e++)l+=o.charAt(Math.floor(Math.random()*h));return l}const L=()=>{const c=g(),[r,o]=N.useState({UserID:"",FirstName:"",LastName:"",email:"",password:"",role:""});function i(e){const a=[],n=/[A-Z]/.test(e),p=/[a-z]/.test(e),f=/\d/.test(e),x=/[!@#$%^&*(),.?":{}|<>]/.test(e);return e?(e.length<8&&a.push("Password must be at least 8 characters long."),n||a.push("Password must contain at least one uppercase letter."),p||a.push("Password must contain at least one lowercase letter."),f||a.push("Password must contain at least one digit."),x||a.push("Password must contain at least one special character."),a.length>0?a.join(" "):null):"Password is required."}const l=()=>{let e=!0,t={};setErrors({}),r.FirstName||(t.FirstName="First Name is required.",e=!1),r.LastName||(t.LastName="Last Name is required.",e=!1),r.email||(t.email="Email is required.",e=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(t.email="Invalid email format.",e=!1);const n=i(r.password);return n&&(t.password=n,e=!1),r.password!==r.confirmPassword&&(t.confirmPassword="Passwords do not match.",e=!1),setErrors(t),e},h=async e=>{if(e.preventDefault(),!l()){d.error("Please fill out this form.");return}const t=I(role,6);try{const a=await w.post("/api/addUser",{UserID:t,FirstName,LastName,email,password,role});a.data.error?d.error(a.data.error):(o({UserID:"",FirstName:"",LastName:"",email:"",password:"",role:""}),d.success("User added successfully."),c("/adminUsers"))}catch(a){console.error("There was an error adding the user:",a),d.error("Failed to add user. Please try again later.")}};return s.jsx("div",{className:"container mx-auto px-6 pt-[4rem]",children:s.jsxs("div",{className:"bg-white shadow-md rounded-md px-8 pt-6 pb-8 mb-4 flex flex-col",children:[s.jsxs("h2",{className:"mb-6 text-3xl font-bold text-gray-700 flex items-center gap-2",children:["Add User's Information",s.jsx(P,{showArrow:!0,content:s.jsxs("div",{className:"px-1 py-2",children:[s.jsx("div",{className:"text-small font-bold",children:"Add User"}),s.jsx("div",{className:"text-tiny",children:"This function will add the information of the user to the system."})]}),children:s.jsx(j,{icon:b,size:"sm",className:"text-gray-700 text-[20px]"})})]}),s.jsxs("form",{onSubmit:h,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(m,{label:"First Name",type:"text",placeholder:"Enter First Name",value:r.FirstName,errorMessage:errors.FirstName,isInvalid:!!errors.FirstName,onChange:e=>o({...r,FirstName:e.target.value})}),s.jsx(m,{label:"Last Name",type:"text",placeholder:"Enter Last Name",value:r.LastName,errorMessage:errors.LastName,isInvalid:!!errors.LastName,onChange:e=>o({...r,LastName:e.target.value})}),s.jsx(m,{label:"Email",type:"email",placeholder:"Enter Email",value:r.email,errorMessage:errors.email,isInvalid:!!errors.email,onChange:e=>o({...r,email:e.target.value})}),s.jsx(m,{label:"Password",type:"password",placeholder:"Set Password",value:r.password,errorMessage:errors.password,isInvalid:!!errors.password,onChange:e=>o({...r,password:e.target.value})}),s.jsxs(A,{label:"Role",placeholder:"Select Role",value:r.role,errorMessage:errors.role,isInvalid:!!errors.role,onChange:e=>o({...r,role:e}),children:[s.jsx(u,{value:"Admin",children:"Admin"},"Admin"),s.jsx(u,{value:"Teacher",children:"Teacher"},"Teacher"),s.jsx(u,{value:"Parent",children:"Parent"},"Parent")]})]}),s.jsx("div",{className:"mt-6",children:s.jsx(F,{type:"submit",color:"primary",size:"lg",radius:"sm",children:"Add User"})})]})]})})},G=()=>s.jsxs("div",{className:"w-full h-full flex",children:[s.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:s.jsx(v,{})}),s.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[s.jsx(y,{}),s.jsx(L,{})]})]});export{G as default};
