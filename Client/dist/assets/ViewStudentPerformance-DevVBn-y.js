import{r as c,j as e,a as g,_ as f,u as F,U as R,c as U}from"./index-B4wSyu9X.js";import{C as V}from"./ContentHeader-B1fghRo3.js";import{S as q}from"./Sidebar-K3zB_zYX.js";import{P as l,F as L,d as E}from"./index-C4NzbEoC.js";import{m as N,a as v,b as C,c as A,d as w}from"./chunk-P2T5LMDM-DC1c45y9.js";import{i as y}from"./chunk-GQQM5TNQ-DAoGedlE.js";import{s as z,l as m}from"./chunk-CEHIK4GH-BuZ88jNB.js";import{t as B}from"./chunk-ATAY3LCU-D0e6Ei9J.js";import{b as o}from"./chunk-DBLREEYE-CPTf1qhq.js";import{t as p}from"./profile-CveRvT9q.js";import"./useOverlayTriggerState-B2eAueuT.js";import"./useDialog-D_jD5Yn-.js";import"./useLabels-CWEVCThf.js";import"./VisuallyHidden-6BjKz1X1.js";import"./useField-DsC8VyRP.js";import"./useFormReset-BV-vE7GN.js";import"./getChildNodes-CNdKXxzI.js";import"./extends-CF3RwP-h.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";import"./chunk-CIZQCQPA-QIsEdyyr.js";const k=({show:d,onHide:i})=>{const n=()=>{i()};return e.jsx(N,{isOpen:d,onClose:i,"aria-labelledby":"success-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(v,{children:[e.jsx(C,{id:"success-modal-title",children:"Feedback Created Successfully!"}),e.jsx(A,{children:e.jsx("p",{children:"You have created feedback for your student's performance!"})}),e.jsx(w,{children:e.jsx(o,{color:"primary",onClick:n,children:"Close"})})]})})},P=({show:d,onHide:i,actCode:n,userid:b,lrn:x,section:a})=>{const[j,h]=c.useState(!1),[s,t]=c.useState({Title:"",Type:"",Feedback_Date:"",Context:""}),S=async r=>{r.preventDefault();const{Feedback_Date:D,Type:_,Title:T,Context:I}=s;try{const u=await g.post("/api/submitFeedback",{UserID:b,LRN:x,Section:a,Title:T,ActivityCode:n,Type:_,Feedback_Date:D,Context:I});u.data.error?f.error(u.data.error):(t({Title:"",Type:"",Feedback_Date:"",Context:""}),f.success("Created Feedback Successfully."),h(!0))}catch(u){console.error(u),f.error("Error creating feedback. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx(N,{isOpen:d,onClose:i,size:"lg","aria-labelledby":"create-feedback-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,scrollBehavior:"inside",children:e.jsxs(v,{children:[e.jsx(C,{id:"create-feedback-modal-title",children:"Create New Feedback"}),e.jsxs("form",{onSubmit:S,children:[e.jsxs(A,{children:[e.jsx(y,{type:"text",label:"Title",placeholder:"Input a concern title",labelPlacement:"outside",variant:"bordered",className:"bg-transparent py-1 my-1",value:s.Title,onChange:r=>t({...s,Title:r.target.value})}),e.jsxs(z,{labelPlacement:"outside",label:"Type of Assessment",placeholder:"Select Type of Assessment","aria-label":"Select type of assessment",variant:"bordered",className:"bg-transparent py-1 my-1",value:s.Type,onChange:r=>t({...s,Type:r.target.value}),children:[e.jsx(m,{children:"Select Type of Assessment"},""),e.jsx(m,{children:"Assessment 1: Pagbabaybay Tunog at Letra"},"Pagbabaybay"),e.jsx(m,{children:"Assessment 2: Pantig"},"Pantig"),e.jsx(m,{children:"Assessment 3: Salita"},"Salita"),e.jsx(m,{children:"Assessment 4: Pagbabasa"},"Pagbabasa")]}),e.jsx(y,{className:"pt-2",type:"date",label:"Feedback Date",labelPlacement:"outside",variant:"bordered",value:s.Feedback_Date,onChange:r=>t({...s,Feedback_Date:r.target.value})}),e.jsx(B,{placeholder:"Input feedback context",label:"Context",labelPlacement:"outside",variant:"bordered",className:"bg-transparent py-1 my-1",value:s.Context,onChange:r=>t({...s,Context:r.target.value})})]}),e.jsxs(w,{children:[e.jsx(o,{color:"danger",variant:"light",onClick:i,children:"Close"}),e.jsx(o,{color:"primary",type:"submit",children:"Send Feedback"})]})]})]})}),e.jsx(k,{show:j,onHide:()=>h(!1)})]})};P.propTypes={show:l.bool.isRequired,onHide:l.func.isRequired,actCode:l.string.isRequired,userid:l.string.isRequired,lrn:l.string.isRequired,section:l.string.isRequired};k.propTypes={show:l.bool.isRequired,onHide:l.func.isRequired};const H=()=>{const d=F(),[i,n]=c.useState(!1),{user:b}=c.useContext(R),{UserInputId:x}=U(),[a,j]=c.useState({UserInputId:"",LRN:"",Section:"",ActivityCode:"",Type:"",PerformanceItems:[]});c.useEffect(()=>{(async()=>{try{const t=await g.get(`/api/getPerformance/${x}`);j(t.data)}catch{f.error("Failed to fetch performance data. Please try again later.")}})()},[x]);const h=()=>{n(!0)};return e.jsxs("div",{className:"p-10",children:[e.jsx(P,{show:i,onHide:()=>n(!1),actCode:a.ActivityCode,userid:b.UserID,lrn:a.LRN,section:a.Section}),e.jsxs("div",{className:"flex items-center justify-start gap-2 mb-5",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"View Performance"}),e.jsx(p,{showArrow:!0,content:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"View Student Performance"}),e.jsx("div",{className:"text-xs",children:"This section displays the student's performance."})]}),children:e.jsx(L,{icon:E,className:"text-gray-600"})})]}),e.jsxs("div",{className:"w-full max-w-8xl mx-auto bg-white shadow-lg rounded-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Assessment Details"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Activity Code:"})," ",a.ActivityCode||"N/A"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"LRN:"})," ",a.LRN||"N/A"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Section:"})," ",a.Section||"N/A"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Type:"})," ",a.Type||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Items"}),a.PerformanceItems.length>0?e.jsx("ul",{className:"list-none pl-0 space-y-4",children:a.PerformanceItems.map((s,t)=>e.jsxs("li",{className:"bg-gray-100 p-4 rounded-lg shadow",children:[e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Item Code:"})," ",s.ItemCode]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Word:"})," ",s.Word||"N/A"]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Image:"}),s.Image&&e.jsx(p,{content:"View Image",children:e.jsx(o,{as:"a",href:s.Image,target:"_blank",rel:"noopener noreferrer",color:"primary",size:"sm",className:"ml-2",children:"View Image"})})]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"User Audio:"}),s.UserAudioURL?e.jsx(p,{content:"Play User Audio",children:e.jsx(o,{as:"a",href:s.UserAudioURL,target:"_blank",rel:"noopener noreferrer",color:"primary",size:"sm",className:"ml-2 my-2",children:"Play User Audio"})}):"No audio uploaded"]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Default Audio:"}),s.DefaultAudio&&e.jsx(p,{content:"Play Default Audio",children:e.jsx(o,{as:"a",href:s.DefaultAudio,target:"_blank",rel:"noopener noreferrer",color:"primary",size:"sm",className:"ml-2 my-2",children:"Play Default Audio"})})]})]},t))}):e.jsx("p",{className:"text-gray-700",children:"No items available for this assessment."})]}),e.jsxs("div",{className:"mt-6 gap-5 flex",children:[e.jsx(o,{color:"danger",onClick:()=>d(-1),className:"my-4",children:"Back"}),e.jsx(o,{color:"primary",onClick:h,className:"my-4",children:"Feedback"})]})]})]})},ce=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6]",children:e.jsx(q,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(V,{}),e.jsx(H,{})]})]});export{ce as default};
