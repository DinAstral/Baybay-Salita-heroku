import{u as M,r as h,j as e,a as x,_ as o}from"./index-DRkmS7r_.js";import{A as R}from"./AdminSidebar-DBa4ruW2.js";import{F as B,d as F}from"./index-C-x_9WTQ.js";import{t as T}from"./profile-BgnaMKgd.js";import{s as g,l as d}from"./chunk-CEHIK4GH-R9Drcmk3.js";import{i as l}from"./chunk-GQQM5TNQ-Dp_xGKim.js";import{b as w}from"./chunk-DBLREEYE-DoOwKmAJ.js";import{C as I}from"./ContentHeader-CPvXrxlp.js";import"./useOverlayTriggerState-D8HolJQt.js";import"./chunk-CIZQCQPA-DvUsmOkq.js";import"./useField-CJb1MFo7.js";import"./useLabels-BnmYLgFr.js";import"./useDialog-BXzugVjS.js";import"./VisuallyHidden-DMHofawe.js";import"./useFormReset-C6_kkRsk.js";import"./chunk-CAFRINWI-CMvs8fyY.js";const D=()=>{const p=M(),[r,c]=h.useState({LRN:"",FirstName:"",MiddleName:"",LastName:"",Level:"",Section:"",Birthday:"",Address:"",MotherTongue:"",Gender:"",ContactNumber:""}),[s,y]=h.useState({}),[f,S]=h.useState([]),[E,v]=h.useState(null);h.useEffect(()=>{(async()=>{try{const t=await x.get("/api/getParent");t.data&&t.data.length>0?S(t.data):o.error("No verified parents found.")}catch(t){console.error(t),o.error("Failed to fetch parent data.")}})()},[]);const b=a=>{const t=a.target.value;c({...r,LRN:t});const i=f.flatMap(n=>Array.isArray(n.Student)?n.Student:[]).find(n=>n.LRN===t);if(i){const n=f.find(u=>Array.isArray(u.Student)&&u.Student.some(C=>C.LRN===t));v(i),c({LRN:i.LRN,FirstName:i.FirstName,LastName:i.LastName,Birthday:i.Birthday,Age:N(i.Birthday),Address:(n==null?void 0:n.Address)||"",MotherTongue:i.MotherTongue,Gender:i.Gender,ContactNumber:(n==null?void 0:n.ContactNumber)||"",Section:""})}else o.error("Student not found.")},N=a=>{const t=new Date(a),i=new Date;let n=i.getFullYear()-t.getFullYear();const u=i.getMonth()-t.getMonth();return(u<0||u===0&&i.getDate()<t.getDate())&&n--,n},j=a=>{const t=a.target.value;c({...r,Birthday:t,Age:N(t)})},m=a=>{const{name:t,value:i}=a.target;c({...r,[t]:i})},L=()=>{let a=!0,t={};return r.LRN||(t.LRN="LRN is required.",a=!1),r.FirstName||(t.FirstName="First Name is required.",a=!1),r.LastName||(t.LastName="Last Name is required.",a=!1),r.Birthday||(t.Birthday="Birthday is required.",a=!1),r.Address||(t.Address="Address is required.",a=!1),r.MotherTongue||(t.MotherTongue="Mother Tongue is required.",a=!1),r.Gender||(t.Gender="Gender is required.",a=!1),r.ContactNumber||(t.ContactNumber="Contact Number is required.",a=!1),r.Section||(t.Section="Section is required.",a=!1),y(t),a},A=async a=>{if(a.preventDefault(),!L()){o.error("Please fill out the form correctly.");return}try{const t=await x.post("/api/addStudent",r);t.data.error?o.error(t.data.error):(c({LRN:"",FirstName:"",MiddleName:"",LastName:"",Level:"",Section:teacherSection,Birthday:"",Age:"",Address:"",MotherTongue:"",Gender:"",ContactNumber:""}),o.success("Student added successfully."),p("/manageStudent"))}catch(t){console.error(t),o.error("Failed to add student. Please try again.")}};return e.jsx("div",{className:"container mx-auto px-6 pt-[4rem]",children:e.jsxs("div",{className:"bg-white shadow-md rounded-md px-8 pt-6 pb-8 mb-4 flex flex-col",children:[e.jsxs("h2",{className:"mb-6 text-3xl font-bold text-gray-700 flex items-center gap-2",children:["Add Student's Information",e.jsx(T,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Add Student"}),e.jsx("div",{className:"text-tiny",children:"This function will add the information of the students in the system."})]}),children:e.jsx(B,{icon:F,size:"sm",className:"text-gray-700 text-[20px]"})})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(g,{label:"LRN",placeholder:"Select student's LRN",value:r.LRN,onChange:b,errorMessage:s.LRN,isInvalid:!!s.LRN,children:f.filter(a=>a.verified).flatMap(a=>Array.isArray(a.Student)?a.Student.map(t=>e.jsx(d,{value:t.LRN,children:t.LRN},t.LRN)):[])})}),e.jsx(l,{label:"First Name",type:"text",placeholder:"Enter the First Name",name:"FirstName",value:r.FirstName,onChange:m,errorMessage:s.FirstName,isInvalid:!!s.FirstName}),e.jsx(l,{label:"Last Name",type:"text",placeholder:"Enter the Last Name",name:"LastName",value:r.LastName,onChange:m,errorMessage:s.LastName,isInvalid:!!s.LastName}),e.jsx(l,{label:"Birthday",type:"date",name:"Birthday",value:r.Birthday.split("T")[0],onChange:m,errorMessage:s.Birthday,isInvalid:!!s.Birthday}),e.jsx(l,{label:"Birthday",type:"date",name:"Birthday",value:r.Birthday.split("T")[0],onChange:j,errorMessage:s.Birthday,isInvalid:!!s.Birthday}),e.jsx(l,{label:"Age",type:"text",name:"Age",value:r.Age,isDisabled:!0}),e.jsx(l,{label:"Mother Tongue",type:"text",placeholder:"Enter the Mother Tongue",name:"MotherTongue",value:r.MotherTongue,onChange:m,errorMessage:s.MotherTongue,isInvalid:!!s.MotherTongue}),e.jsx(l,{label:"Gender",type:"text",placeholder:"Enter Gender",name:"Gender",value:r.Gender,onChange:m,errorMessage:s.Gender,isInvalid:!!s.Gender}),e.jsx(l,{label:"Contact Number",type:"text",placeholder:"Enter the Contact Number",name:"ContactNumber",value:r.ContactNumber,onChange:m,errorMessage:s.ContactNumber,isInvalid:!!s.ContactNumber}),e.jsxs(g,{label:"Section",placeholder:"Select a section",defaultSelectedKeys:[""],onChange:a=>c({...r,Section:a.target.value}),"aria-label":"Filter students by section",value:r.Section,children:[e.jsx(d,{children:"Select Section"},""),e.jsx(d,{children:"Aster"},"Aster"),e.jsx(d,{children:"Camia"},"Camia"),e.jsx(d,{children:"Dahlia"},"Dahlia"),e.jsx(d,{children:"Iris"},"Iris"),e.jsx(d,{children:"Jasmin"},"Jasmin"),e.jsx(d,{children:"Orchid"},"Orchid"),e.jsx(d,{children:"Rose"},"Rose"),e.jsx(d,{children:"Tulip"},"Tulip"),e.jsx(d,{children:"SSC"},"SSC")]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(w,{type:"submit",color:"primary",size:"lg",radius:"sm",children:"Add Student"})})]})]})})},Z=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(R,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(I,{}),e.jsx(D,{})]})]});export{Z as default};
