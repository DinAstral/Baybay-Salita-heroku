import{r as c,j as e}from"./react-BCcS7c0c.js";import{C as F}from"./ContentHeader-B2Ht1HTi.js";import{S as R}from"./Sidebar-Dk_xdG0_.js";import{F as U,d as V}from"./@fortawesome-BVdY808A.js";import{_ as f}from"./react-hot-toast-Dux6v_Wl.js";import{U as q}from"./index-ByxnD8YG.js";import{a as g}from"./axios-CCb-kr4I.js";import{P as l}from"./prop-types-LuavYUF2.js";import{m as N,f as v,g as C,h as A,i as y,s as L,l as m,u as E,j as w,b as o,t as u}from"./@nextui-org-CLkIIHEi.js";import{a as z,g as B}from"./react-router-MkLRJz4d.js";import"./@babel-m2JXyA6a.js";import"./profile-Berhznzr.js";import"./react-router-dom-Dk6_dLEo.js";import"./react-dom-rv-KAOpM.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-BOUEh3jQ.js";import"./goober-vt3s6TGe.js";import"./@react-aria-CfXSs2UI.js";import"./@react-stately-ChQ0zIrC.js";import"./clsx-B-dksMZM.js";import"./@swc-DS7M6wx8.js";import"./@internationalized-BB0Nk989.js";import"./framer-motion-BvVSIgoR.js";import"./react-textarea-autosize-bEG1sDiq.js";import"./use-latest-2zZSkz0C.js";import"./use-isomorphic-layout-effect-Co3QFFXf.js";import"./use-composed-ref-BmZZpR7Y.js";import"./tailwind-variants-ayMnMv5e.js";import"./tailwind-merge-Dc5vmgZ1.js";const k=({show:d,onHide:i})=>{const n=()=>{i()};return e.jsx(N,{isOpen:d,onClose:i,"aria-labelledby":"success-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(v,{children:[e.jsx(C,{id:"success-modal-title",children:"Feedback Created Successfully!"}),e.jsx(A,{children:e.jsx("p",{children:"You have created feedback for your student's performance!"})}),e.jsx(w,{children:e.jsx(o,{color:"primary",onClick:n,children:"Close"})})]})})},P=({show:d,onHide:i,actCode:n,userid:b,lrn:x,section:a})=>{const[j,p]=c.useState(!1),[s,t]=c.useState({Title:"",Type:"",Feedback_Date:"",Context:""}),S=async r=>{r.preventDefault();const{Feedback_Date:D,Type:_,Title:T,Context:I}=s;try{const h=await g.post("/submitFeedback",{UserID:b,LRN:x,Section:a,Title:T,ActivityCode:n,Type:_,Feedback_Date:D,Context:I});h.data.error?f.error(h.data.error):(t({Title:"",Type:"",Feedback_Date:"",Context:""}),f.success("Created Feedback Successfully."),p(!0))}catch(h){console.error(h),f.error("Error creating feedback. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx(N,{isOpen:d,onClose:i,size:"lg","aria-labelledby":"create-feedback-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,scrollBehavior:"inside",children:e.jsxs(v,{children:[e.jsx(C,{id:"create-feedback-modal-title",children:"Create New Feedback"}),e.jsxs("form",{onSubmit:S,children:[e.jsxs(A,{children:[e.jsx(y,{type:"text",label:"Title",placeholder:"Input a concern title",labelPlacement:"outside",variant:"bordered",className:"bg-transparent py-1 my-1",value:s.Title,onChange:r=>t({...s,Title:r.target.value})}),e.jsxs(L,{labelPlacement:"outside",label:"Type of Assessment",placeholder:"Select Type of Assessment","aria-label":"Select type of assessment",variant:"bordered",className:"bg-transparent py-1 my-1",value:s.Type,onChange:r=>t({...s,Type:r.target.value}),children:[e.jsx(m,{children:"Select Type of Assessment"},""),e.jsx(m,{children:"Assessment 1: Pagbabaybay Tunog at Letra"},"Pagbabaybay"),e.jsx(m,{children:"Assessment 2: Pantig"},"Pantig"),e.jsx(m,{children:"Assessment 3: Salita"},"Salita"),e.jsx(m,{children:"Assessment 4: Pagbabasa"},"Pagbabasa")]}),e.jsx(y,{className:"pt-2",type:"date",label:"Feedback Date",labelPlacement:"outside",variant:"bordered",value:s.Feedback_Date,onChange:r=>t({...s,Feedback_Date:r.target.value})}),e.jsx(E,{placeholder:"Input feedback context",label:"Context",labelPlacement:"outside",variant:"bordered",className:"bg-transparent py-1 my-1",value:s.Context,onChange:r=>t({...s,Context:r.target.value})})]}),e.jsxs(w,{children:[e.jsx(o,{color:"danger",variant:"light",onClick:i,children:"Close"}),e.jsx(o,{color:"primary",type:"submit",children:"Send Feedback"})]})]})]})}),e.jsx(k,{show:j,onHide:()=>p(!1)})]})};P.propTypes={show:l.bool.isRequired,onHide:l.func.isRequired,actCode:l.string.isRequired,userid:l.string.isRequired,lrn:l.string.isRequired,section:l.string.isRequired};k.propTypes={show:l.bool.isRequired,onHide:l.func.isRequired};const H=()=>{const d=z(),[i,n]=c.useState(!1),{user:b}=c.useContext(q),{UserInputId:x}=B(),[a,j]=c.useState({UserInputId:"",LRN:"",Section:"",ActivityCode:"",Type:"",PerformanceItems:[]});c.useEffect(()=>{(async()=>{try{const t=await g.get(`/api/getPerformance/${x}`);j(t.data)}catch{f.error("Failed to fetch performance data. Please try again later.")}})()},[x]);const p=()=>{n(!0)};return e.jsxs("div",{className:"p-10",children:[e.jsx(P,{show:i,onHide:()=>n(!1),actCode:a.ActivityCode,userid:b.UserID,lrn:a.LRN,section:a.Section}),e.jsxs("div",{className:"flex items-center justify-start gap-2 mb-5",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"View Performance"}),e.jsx(u,{showArrow:!0,content:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"View Student Performance"}),e.jsx("div",{className:"text-xs",children:"This section displays the student's performance."})]}),children:e.jsx(U,{icon:V,className:"text-gray-600"})})]}),e.jsxs("div",{className:"w-full max-w-8xl mx-auto bg-white shadow-lg rounded-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Assessment Details"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Activity Code:"})," ",a.ActivityCode||"N/A"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"LRN:"})," ",a.LRN||"N/A"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Section:"})," ",a.Section||"N/A"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Type:"})," ",a.Type||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Items"}),a.PerformanceItems.length>0?e.jsx("ul",{className:"list-none pl-0 space-y-4",children:a.PerformanceItems.map((s,t)=>e.jsxs("li",{className:"bg-gray-100 p-4 rounded-lg shadow",children:[e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Item Code:"})," ",s.ItemCode]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Word:"})," ",s.Word||"N/A"]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Image:"}),s.Image&&e.jsx(u,{content:"View Image",children:e.jsx(o,{as:"a",href:s.Image,target:"_blank",rel:"noopener noreferrer",color:"primary",size:"sm",className:"ml-2",children:"View Image"})})]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"User Audio:"}),s.UserAudioURL?e.jsx(u,{content:"Play User Audio",children:e.jsx(o,{as:"a",href:s.UserAudioURL,target:"_blank",rel:"noopener noreferrer",color:"primary",size:"sm",className:"ml-2 my-2",children:"Play User Audio"})}):"No audio uploaded"]}),e.jsxs("p",{className:"text-gray-800",children:[e.jsx("strong",{children:"Default Audio:"}),s.DefaultAudio&&e.jsx(u,{content:"Play Default Audio",children:e.jsx(o,{as:"a",href:s.DefaultAudio,target:"_blank",rel:"noopener noreferrer",color:"primary",size:"sm",className:"ml-2 my-2",children:"Play Default Audio"})})]})]},t))}):e.jsx("p",{className:"text-gray-700",children:"No items available for this assessment."})]}),e.jsxs("div",{className:"mt-6 gap-5 flex",children:[e.jsx(o,{color:"danger",onClick:()=>d(-1),className:"my-4",children:"Back"}),e.jsx(o,{color:"primary",onClick:p,className:"my-4",children:"Feedback"})]})]})]})},je=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6]",children:e.jsx(R,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(F,{}),e.jsx(H,{})]})]});export{je as default};
