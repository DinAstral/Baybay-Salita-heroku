import{r as u,R as p,t as E,A as h}from"./index-_hBb-rJH.js";import{Z as g,D as C}from"./chunk-DBLREEYE-dWdyKFVG.js";import{i as N}from"./useOverlayTriggerState-BMu4I874.js";function A(...e){return e.length===1?e[0]:o=>{for(let n of e)typeof n=="function"?n(o):n!=null&&(n.current=o)}}function M(e,o){let n=window.getComputedStyle(e),i=/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY);return i&&o&&(i=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),i}function w({children:e}){let o=u.useMemo(()=>({register:()=>{}}),[]);return p.createElement(g.Provider,{value:o},e)}let $=new WeakMap,l=[];function y(e,o=document.body){let n=new Set(e),i=new Set,d=t=>{for(let c of t.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))n.add(c);let a=c=>{if(n.has(c)||i.has(c.parentElement)&&c.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let m of n)if(c.contains(m))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a}),v=a(t);if(v===NodeFilter.FILTER_ACCEPT&&b(t),v!==NodeFilter.FILTER_REJECT){let c=r.nextNode();for(;c!=null;)b(c),c=r.nextNode()}},b=t=>{var a;let r=(a=$.get(t))!==null&&a!==void 0?a:0;t.getAttribute("aria-hidden")==="true"&&r===0||(r===0&&t.setAttribute("aria-hidden","true"),i.add(t),$.set(t,r+1))};l.length&&l[l.length-1].disconnect(),d(o);let s=new MutationObserver(t=>{for(let a of t)if(!(a.type!=="childList"||a.addedNodes.length===0)&&![...n,...i].some(r=>r.contains(a.target))){for(let r of a.removedNodes)r instanceof Element&&(n.delete(r),i.delete(r));for(let r of a.addedNodes)(r instanceof HTMLElement||r instanceof SVGElement)&&(r.dataset.liveAnnouncer==="true"||r.dataset.reactAriaTopLayer==="true")?n.add(r):r instanceof Element&&d(r)}});s.observe(o,{childList:!0,subtree:!0});let f={observe(){s.observe(o,{childList:!0,subtree:!0})},disconnect(){s.disconnect()}};return l.push(f),()=>{s.disconnect();for(let t of i){let a=$.get(t);a===1?(t.removeAttribute("aria-hidden"),$.delete(t)):$.set(t,a-1)}f===l[l.length-1]?(l.pop(),l.length&&l[l.length-1].observe()):l.splice(l.indexOf(f),1)}}const F=u.createContext({});function T(){var e;return(e=u.useContext(F))!==null&&e!==void 0?e:{}}const x=p.createContext(null);function _(e){let o=E(),{portalContainer:n=o?null:document.body,isExiting:i}=e,[d,b]=u.useState(!1),s=u.useMemo(()=>({contain:d,setContain:b}),[d,b]),{getContainer:f}=T();if(!e.portalContainer&&f&&(n=f()),!n)return null;let t=e.children;return e.disableFocusManagement||(t=p.createElement(N,{restoreFocus:!0,contain:d&&!i},t)),t=p.createElement(x.Provider,{value:s},p.createElement(w,null,t)),h.createPortal(t,n)}function I(){let e=u.useContext(x),o=e==null?void 0:e.setContain;C(()=>{o==null||o(!0)},[o])}export{M as $,A as a,y as b,_ as c,I as d};
