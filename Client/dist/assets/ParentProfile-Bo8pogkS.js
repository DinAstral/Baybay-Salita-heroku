import{r as l,j as e}from"./react-BCcS7c0c.js";import{C as E}from"./ContentHeader-B2Ht1HTi.js";import{P as B}from"./ParentSidebar-DWeSMDFy.js";import{p as P}from"./profile-Berhznzr.js";import{F as h,d as U,k as _,f as $}from"./@fortawesome-BVdY808A.js";import{U as S}from"./index-ByxnD8YG.js";import{a as u}from"./axios-CCb-kr4I.js";import{_ as d}from"./react-hot-toast-Dux6v_Wl.js";import{b as L,a as q}from"./react-router-MkLRJz4d.js";import{t as A,b as x,i as c,s as G,l as f}from"./@nextui-org-CLkIIHEi.js";import"./@babel-m2JXyA6a.js";import"./react-router-dom-Dk6_dLEo.js";import"./react-dom-rv-KAOpM.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-BOUEh3jQ.js";import"./prop-types-LuavYUF2.js";import"./goober-vt3s6TGe.js";import"./@react-aria-CfXSs2UI.js";import"./@react-stately-ChQ0zIrC.js";import"./clsx-B-dksMZM.js";import"./@swc-DS7M6wx8.js";import"./@internationalized-BB0Nk989.js";import"./framer-motion-BvVSIgoR.js";import"./react-textarea-autosize-bEG1sDiq.js";import"./use-latest-2zZSkz0C.js";import"./use-isomorphic-layout-effect-Co3QFFXf.js";import"./use-composed-ref-BmZZpR7Y.js";import"./tailwind-variants-ayMnMv5e.js";import"./tailwind-merge-Dc5vmgZ1.js";const Y=()=>{const g=L(),C=q(),{user:s}=l.useContext(S),[m,N]=l.useState(0);l.useState(!1);const[w,I]=l.useState(P),[n,D]=l.useState({}),[j,F]=l.useState(null),[t,i]=l.useState({});l.useEffect(()=>{u.get(`/api/getParent/${s.UserID}`).then(a=>{I(a.data.Picture||P),D(a.data),i(a.data)}).catch(()=>{d.error("Failed to fetch parent data. Please try again later.")})},[s.UserID]),l.useEffect(()=>{const r=["/parentProfile"].findIndex(o=>o===g.pathname);N(r)},[g.pathname]),l.useEffect(()=>{n.Birthday&&F((r=>{const o=new Date(r),p=new Date;let b=p.getFullYear()-o.getFullYear();const y=p.getMonth()-o.getMonth();return(y<0||y===0&&p.getDate()<o.getDate())&&b--,b})(n.Birthday))},[n.Birthday]);const v=a=>{N(a)},k=async a=>{a.preventDefault();try{const r=await u.patch(`/api/updateParent/${t.UserID}`,t);if(r.status===200&&r.data){d.success("Your profile updated successfully!");const o=await u.get(`/api/getParent/${t.UserID}`);i(o.data)}else d.error(`Error: ${r.data.error||"Update failed."}`)}catch(r){console.error("Error updating parent profile:",r),r.response?d.error(`Failed to update parent profile: ${r.response.data.error||"Please try again later."}`):r.request?d.error("No response from server. Please check your connection."):d.error("Failed to update parent profile. Please try again later.")}};return e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"flex items-center justify-start gap-2 mb-5",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Parent Profile"}),e.jsx(A,{showArrow:!0,content:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"Profile Information"}),e.jsx("div",{className:"text-xs",children:"This function will view your profile."})]}),children:e.jsx(h,{icon:U,className:"text-gray-600"})})]}),e.jsxs("div",{className:"w-full max-w-8xl mx-auto bg-white shadow-lg rounded-lg p-[3rem]",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 relative",children:[e.jsx(A,{content:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"Profile Picture Update"}),e.jsx("div",{className:"text-xs",children:"You can update your profile picture once clicked."})]}),children:e.jsx("label",{className:"cursor-pointer",children:e.jsx("img",{src:w,className:"w-32 h-32 rounded-full",alt:"Profile"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold",children:s?`${s.FirstName} ${s.LastName}`:"Parent Name"}),e.jsx("h4",{children:s?s.role:"Role"}),e.jsxs("div",{className:"flex flex-col mt-4 text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{icon:_,className:"text-gray-600"}),e.jsxs("span",{children:["Parent ID Number: ",s?s.UserID:"Parent ID"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(h,{icon:$,className:"text-gray-600"}),e.jsxs("span",{children:["Email Address: ",s?s.email:"Email Address"]})]})]})]}),e.jsx(x,{color:"primary",onClick:()=>C(-1),children:"Back"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex gap-6 border-b pb-2",children:[e.jsx(x,{variant:"light",radius:"none",className:`text-md font-medium ${m===0?"border-b-4 border-blue-500":""}`,onClick:()=>v(0),children:"Basic Information"}),e.jsx(x,{variant:"light",radius:"none",className:`text-md font-medium ${m===1?"border-b-4 border-blue-500":""}`,onClick:()=>v(1),children:"Update"})]}),m===0&&e.jsx("div",{className:"mt-6 bg-[#faf9f4] p-6 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"First Name:"}),e.jsx("p",{className:"text-gray-800",children:s?s.FirstName:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Contact Number:"}),e.jsx("p",{className:"text-gray-800",children:n.ContactNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Last Name:"}),e.jsx("p",{className:"text-gray-800",children:s?s.LastName:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Gender:"}),e.jsx("p",{className:"text-gray-800",children:n.Gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Birthday:"}),e.jsx("p",{className:"text-gray-800",children:n.Birthday||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Age:"}),e.jsx("p",{className:"text-gray-800",children:j!==null?j:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Address:"}),e.jsx("p",{className:"text-gray-800",children:n.Address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm text-gray-600",children:"Nationality:"}),e.jsx("p",{className:"text-gray-800",children:n.Nationality||"N/A"})]})]})}),m===1&&e.jsxs("form",{onSubmit:k,className:"mt-6 bg-[#faf9f4] p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Update Your Profile"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{required:!0,label:"First Name",value:t.FirstName||"",onChange:a=>i({...t,FirstName:a.target.value})}),e.jsx(c,{required:!0,label:"Last Name",value:t.LastName||"",onChange:a=>i({...t,LastName:a.target.value})}),e.jsxs(G,{label:"Gender",value:t.Gender||"",onChange:a=>i({...t,Gender:a}),children:[e.jsx(f,{value:"Male",children:"Male"}),e.jsx(f,{value:"Female",children:"Female"}),e.jsx(f,{value:"Other",children:"Other"})]}),e.jsx(c,{required:!0,type:"date",label:"Birthday",value:t.Birthday||"",onChange:a=>i({...t,Birthday:a.target.value})}),e.jsx(c,{required:!0,label:"Contact Number",value:t.ContactNumber||"",onChange:a=>i({...t,ContactNumber:a.target.value})}),e.jsx(c,{label:"Address",value:t.Address||"",onChange:a=>i({...t,Address:a.target.value})}),e.jsx(c,{label:"Nationality",value:t.Nationality||"",onChange:a=>i({...t,Nationality:a.target.value})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(x,{type:"submit",color:"primary",children:"Update Profile"})})]})]})]})]})},fe=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6]",children:e.jsx(B,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(E,{}),e.jsx(Y,{})]})]});export{fe as default};
