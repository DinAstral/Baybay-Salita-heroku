import{j as e,L as A,r as a,a as Ne}from"./index-9k_Ocd80.js";import{A as Ce}from"./AdminSidebar-DGQnSepX.js";import{l as ve}from"./index-BdoADTYk.js";import{R as ye}from"./react-paginate-B7eXPRnv.js";import{P as h,F as _,d as Re,i as De,j as _e}from"./index-B6K5ESG2.js";import{C as Ae}from"./ContentHeader-BKYcynH5.js";import{P as Le,t as ke,a as Pe,b as c,c as Ee,d as Te,e as d}from"./PrintRecord-BJPUHDd0.js";import{m as L,a as k,b as P,c as E,d as T}from"./chunk-P2T5LMDM-CR1df-yk.js";import{b as n}from"./chunk-DBLREEYE-DVjbjQx8.js";import{D as Ie}from"./DeleteStudent-BmxIkl-d.js";import{t as G}from"./profile-DYuKv9Zm.js";import{s as q,l as i}from"./chunk-CEHIK4GH-zxS_DSeF.js";import{i as He}from"./chunk-GQQM5TNQ-DIeraZ41.js";import"./useOverlayTriggerState-BZO4l0S3.js";import"./useDialog-Cje9gbXM.js";import"./useLabels-D-HJF6pw.js";import"./VisuallyHidden-PT-Sj4_P.js";import"./chunk-KBN3H6OQ-BFs8RrC0.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useField-CpUyNuvN.js";import"./chunk-CIZQCQPA-8Nr0sLZY.js";import"./useFormReset-8bZuwF1F.js";const K=({show:m,onHide:r,student:o})=>e.jsx(L,{isOpen:m,onClose:r,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(k,{children:[e.jsx(P,{className:"flex flex-col",id:"edit-user-modal-title",children:"View Student Information"}),e.jsx(E,{children:e.jsx("p",{children:"Do you want to view the profile of student selected?"})}),e.jsxs(T,{children:[e.jsx(n,{color:"danger",variant:"light",onClick:r,children:"Cancel"}),e.jsx(A,{to:`/adminViewStudent/${o==null?void 0:o._id}`,children:e.jsx(n,{color:"primary",children:"View"})})]})]})});K.propTypes={show:h.bool.isRequired,onHide:h.func.isRequired,student:h.object};const U=({show:m,onHide:r})=>e.jsx(L,{isOpen:m,onClose:r,"aria-labelledby":"add-user-modal-title",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(k,{children:[e.jsx(P,{className:"flex flex-col",id:"add-user-modal-title",children:"Add Student Information"}),e.jsx(E,{children:e.jsx("p",{children:"Do you want to add student information?"})}),e.jsxs(T,{children:[e.jsx(n,{color:"danger",variant:"light",onClick:r,children:"Cancel"}),e.jsx(A,{to:"/adminAddStudent",children:e.jsx(n,{color:"primary",children:"Add"})})]})]})});U.propTypes={show:h.bool.isRequired,onHide:h.func.isRequired};const z=({show:m,onHide:r,student:o})=>e.jsx(L,{isOpen:m,onClose:r,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(k,{children:[e.jsx(P,{className:"flex flex-col",id:"contained-modal-title-vcenter",children:"Update Student Information"}),e.jsx(E,{children:e.jsx("p",{children:"Are you sure you want to update this student's information?"})}),e.jsxs(T,{children:[e.jsx(n,{color:"danger",variant:"light",onClick:r,children:"Cancel"}),e.jsx(A,{to:`/adminEditStudent/${o==null?void 0:o._id}`,children:e.jsx(n,{color:"primary",children:"Update"})})]})]})});z.propTypes={show:h.bool.isRequired,onHide:h.func.isRequired,student:h.object};const Me=()=>{const[m,r]=a.useState(!1),[o,I]=a.useState(!1),[J,H]=a.useState(!1),[Q,M]=a.useState(!1),[$,g]=a.useState(!1),[p,F]=a.useState([]),[x,f]=a.useState([]),[b,w]=a.useState(null),[W,X]=a.useState(0),[N]=a.useState(10),[S,Y]=a.useState(""),[j,Z]=a.useState(""),[C,ee]=a.useState(""),[v,se]=a.useState("asc"),[y,te]=a.useState("asc"),[R,ae]=a.useState("asc"),[D,ie]=a.useState("asc"),O=a.useRef(null),{onDownload:re}=ve.useDownloadExcel({currentTableRef:O.current,filename:"Student_List_Report",sheet:"Student",data:p.map(({_id:s,...t})=>t)});a.useEffect(()=>{Ne.get("/api/getStudents").then(s=>{F(s.data),f(s.data)}).catch(s=>console.log(s))},[]),a.useEffect(()=>{let s=p;j&&(s=s.filter(t=>t.FirstName.toLowerCase().includes(j.toLowerCase())||t.LastName.toLowerCase().includes(j.toLowerCase())||t.LRN.includes(j))),S&&(s=s.filter(t=>t.Section===S)),C&&(s=s.filter(t=>t.status===C)),f(s)},[j,S,C,p]);const le=()=>{I(!0)},ne=()=>{r(!0)},oe=s=>{w(s),M(!0)},ce=s=>{w(s),H(!0)},de=s=>{w(s),g(!0)},he=s=>{F(p.filter(t=>t._id!==s)),g(!1)},me=s=>{X(s.selected)},V=W*N,ue=x.slice(V,V+N),xe=s=>{const t=s.target.value;Y(t)},fe=s=>{switch(s){case"Grade Ready Reader":return"text-green-600 font-semibold";case"Transitioning Reader":return"text-blue-600 font-semibold";case"Developing Reader":return"text-orange-600 font-semibold";case"Low Emerging Reader":return"text-red-600 font-semibold";case"High Emerging Reader":return"text-red-600 font-semibold";case"Incomplete":return"text-gray-600 italic";default:return"text-black"}},je=()=>{const s=[...x].sort((t,u)=>{const l=t.LastName.localeCompare(u.LastName);return R==="asc"?l:-l});f(s),ae(R==="asc"?"desc":"asc")},pe=()=>{const s=[...x].sort((t,u)=>{const l=t.Section.localeCompare(u.Section);return D==="asc"?l:-l});f(s),ie(D==="asc"?"desc":"asc")},Se=()=>{const s=[...x].sort((t,u)=>{const l=t.Age-u.Age;return y==="asc"?l:-l});f(s),te(y==="asc"?"desc":"asc")},ge=()=>{const s=[...x].sort((t,u)=>{const l=["Incomplete","Low Emerging Reader","High Emerging Reader","Developing Reader","Transitioning Reader","Grade Ready Reader"],be=t.status||"",we=u.status||"",B=l.indexOf(be)-l.indexOf(we);return v==="asc"?B:-B});f(s),se(v==="asc"?"desc":"asc")};return e.jsxs("div",{className:"px-9",children:[e.jsx(Le,{show:o,onHide:()=>I(!1),print:re}),e.jsx(U,{show:m,onHide:()=>r(!1)}),e.jsx(K,{show:Q,onHide:()=>M(!1),student:b}),e.jsx(z,{show:J,student:b,onHide:()=>H(!1)}),e.jsx(Ie,{show:$,onHide:()=>g(!1),student:b,onDeleteSuccess:he}),e.jsxs("div",{className:"content-title-header",children:[e.jsxs("div",{children:["Manage Student",e.jsx(G,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Student Table"}),e.jsx("div",{className:"text-tiny",children:"This function will view the list of the students in each section."})]}),children:e.jsx(_,{icon:Re,size:"1x",className:"help-icon"})})]}),e.jsx("div",{className:"generate-report",children:e.jsx(G,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Print"}),e.jsx("div",{className:"text-tiny",children:"Generate report/Print table"})]}),children:e.jsx(_,{icon:De,size:"1x",className:"print-icon",onClick:le})})})]}),e.jsx("div",{className:"content-container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card mt-1 border-0",children:[e.jsxs("div",{className:"list-header-drop-score",children:[e.jsxs(q,{className:"w-[20%]",labelPlacement:"outside",label:"Section",variant:"bordered",defaultSelectedKeys:[""],onChange:xe,"aria-label":"Filter students by section",value:S,children:[e.jsx(i,{children:"Select Section"},""),e.jsx(i,{children:"Aster"},"Aster"),e.jsx(i,{children:"Camia"},"Camia"),e.jsx(i,{children:"Dahlia"},"Dahlia"),e.jsx(i,{children:"Iris"},"Iris"),e.jsx(i,{children:"Jasmin"},"Jasmin"),e.jsx(i,{children:"Orchid"},"Orchid"),e.jsx(i,{children:"Rose"},"Rose"),e.jsx(i,{children:"Tulip"},"Tulip"),e.jsx(i,{children:"SSC"},"SSC")]}),e.jsxs(q,{className:"w-[20%]",labelPlacement:"outside",label:"Status",variant:"bordered",onChange:s=>ee(s.target.value),defaultSelectedKeys:[""],children:[e.jsx(i,{children:"All"},""),e.jsx(i,{children:"Incomplete"},"Incomplete"),e.jsx(i,{children:"Low Emerging"},"Low Emerging Reader"),e.jsx(i,{children:"High Emerging"},"High Emerging Reader"),e.jsx(i,{children:"Developing"},"Developing Reader"),e.jsx(i,{children:"Transitioning"},"Transitioning Reader"),e.jsx(i,{children:"Grade Ready"},"Grade Ready Reader")]}),e.jsx("div",{className:"w-[40%] flex pt-8",children:e.jsx(He,{type:"text",placeholder:"Search Student Name or LRN",variant:"bordered",startContent:e.jsx(_,{icon:_e,size:"1x",inverse:!0,className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),onChange:s=>Z(s.target.value)})}),e.jsx("div",{className:"back-button-profile",children:e.jsx(n,{auto:!0,color:"primary",className:"",onClick:()=>ne(),children:"Add Student"})})]}),e.jsxs("div",{className:"card-body scrollable-table scrollable-container",children:[e.jsxs(ke,{ref:O,removeWrapper:!0,color:"primary",selectionMode:"single",children:[e.jsxs(Pe,{children:[e.jsx(c,{children:"LRN"}),e.jsx(c,{children:"First Name"}),e.jsxs(c,{onClick:je,children:["Last Name ",R==="asc"?"↑":"↓"]}),e.jsxs(c,{onClick:Se,children:["Age ",y==="asc"?"↑":"↓"]}),e.jsxs(c,{onClick:pe,children:["Section ",D==="asc"?"↑":"↓"]}),e.jsx(c,{children:"Mother Tongue"}),e.jsx(c,{children:"Gender"}),e.jsxs(c,{onClick:ge,children:["Status ",v==="asc"?"↑":"↓"]}),e.jsx(c,{className:"text-center",children:"Actions"})]}),e.jsx(Ee,{emptyContent:"No student data to display.",children:ue.map(s=>e.jsxs(Te,{children:[e.jsx(d,{children:s.LRN}),e.jsx(d,{children:s.FirstName}),e.jsx(d,{children:s.LastName}),e.jsx(d,{children:s.Age}),e.jsx(d,{children:s.Section}),e.jsx(d,{children:s.MotherTongue}),e.jsx(d,{children:s.Gender}),e.jsx(d,{children:e.jsx("span",{className:fe(s.status),children:s.status})}),e.jsx(d,{children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(n,{color:"default",onClick:()=>oe(s),children:"View"}),e.jsx(n,{color:"primary",onClick:()=>ce(s),children:"Update"}),e.jsx(n,{className:"bg-[#ff505b] text-white",onClick:()=>de(s),children:"Delete"})]})})]},s._id))})]}),e.jsx(ye,{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(x.length/N),marginPagesDisplayed:2,pageRangeDisplayed:10,onPageChange:me,containerClassName:"pagination",activeClassName:"active"})]})]})})})})]})},ls=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(Ce,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(Ae,{}),e.jsx(Me,{})]})]});export{ls as default};
