import{u as v,r as u,j as a,a as j,_ as c}from"./index-C0mq2pM1.js";import{A as P}from"./AdminSidebar-IiVpn-6z.js";import{F as b,d as y}from"./index-DXLE2NwT.js";import{t as F}from"./profile-CycooEAC.js";import{i as n}from"./chunk-GQQM5TNQ-DjbyrHNV.js";import{s as A,l as p}from"./chunk-CEHIK4GH-JCd2cYw1.js";import{b as I}from"./chunk-DBLREEYE-CmAhUcF6.js";import{C as L}from"./ContentHeader-DPLcpCle.js";import"./useOverlayTriggerState-DcLuQhII.js";import"./chunk-CIZQCQPA-ByI2RMzI.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useFormReset-C-mRlYoR.js";import"./useField-BOxuQbUu.js";import"./useLabels-C6nxSUGo.js";import"./useDialog-cdyi40F6.js";import"./VisuallyHidden-Ipnd9vIt.js";import"./Overlay-BDkNJOCE.js";function C(h,s){const o="0123456789";let r="";switch(h){case"Parent":r="parentID_";break;case"Teacher":r="teacherID_";break;case"Admin":r="adminID_";break}let l=r;const f=o.length;for(let d=0;d<s;d++)l+=o.charAt(Math.floor(Math.random()*f));return l}const E=()=>{const h=v(),[s,o]=u.useState({UserID:"",FirstName:"",LastName:"",email:"",password:"",confirmPassword:"",role:""}),[r,l]=u.useState({});function f(e){const t=[],m=/[A-Z]/.test(e),g=/[a-z]/.test(e),w=/\d/.test(e),N=/[!@#$%^&*(),.?":{}|<>]/.test(e);return e?(e.length<8&&t.push("Password must be at least 8 characters long."),m||t.push("Password must contain at least one uppercase letter."),g||t.push("Password must contain at least one lowercase letter."),w||t.push("Password must contain at least one digit."),N||t.push("Password must contain at least one special character."),t.length>0?t.join(" "):null):"Password is required."}const d=()=>{let e=!0,i={};l({}),s.FirstName||(i.FirstName="First Name is required.",e=!1),s.LastName||(i.LastName="Last Name is required.",e=!1),s.email||(i.email="Email is required.",e=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(i.email="Invalid email format.",e=!1);const m=f(s.password);return m&&(i.password=m,e=!1),s.password!==s.confirmPassword&&(i.confirmPassword="Passwords do not match.",e=!1),l(i),e},x=async e=>{if(e.preventDefault(),!d()){c.error("Please fill out the form correctly.");return}const i=C(s.role,6);try{const t=await j.post("/api/addUser",{UserID:i,FirstName:s.FirstName,LastName:s.LastName,email:s.email,password:s.password,role:s.role});t.data.error?c.error(t.data.error):(o({UserID:"",FirstName:"",LastName:"",email:"",password:"",confirmPassword:"",role:""}),c.success("User added successfully."),h("/adminUsers"))}catch(t){console.error("There was an error adding the user:",t),c.error("Failed to add user. Please try again later.")}};return a.jsx("div",{className:"container mx-auto px-6 pt-[4rem]",children:a.jsxs("div",{className:"bg-white shadow-md rounded-md px-8 pt-6 pb-8 mb-4 flex flex-col",children:[a.jsxs("h2",{className:"mb-6 text-3xl font-bold text-gray-700 flex items-center gap-2",children:["Add User's Information",a.jsx(F,{showArrow:!0,content:a.jsxs("div",{className:"px-1 py-2",children:[a.jsx("div",{className:"text-small font-bold",children:"Add User"}),a.jsx("div",{className:"text-tiny",children:"This function will add the information of the user to the system."})]}),children:a.jsx(b,{icon:y,size:"sm",className:"text-gray-700 text-[20px]"})})]}),a.jsxs("form",{onSubmit:x,children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(n,{label:"First Name",type:"text",placeholder:"Enter First Name",value:s.FirstName,errorMessage:r.FirstName,isInvalid:!!r.FirstName,onChange:e=>o({...s,FirstName:e.target.value})}),a.jsx(n,{label:"Last Name",type:"text",placeholder:"Enter Last Name",value:s.LastName,errorMessage:r.LastName,isInvalid:!!r.LastName,onChange:e=>o({...s,LastName:e.target.value})}),a.jsx(n,{label:"Email",type:"email",placeholder:"Enter Email",value:s.email,errorMessage:r.email,isInvalid:!!r.email,onChange:e=>o({...s,email:e.target.value})}),a.jsx(n,{label:"Password",type:"password",placeholder:"Set Password",value:s.password,errorMessage:r.password,isInvalid:!!r.password,onChange:e=>o({...s,password:e.target.value})}),a.jsx(n,{label:"Confirm Password",type:"password",placeholder:"Confirm Password",value:s.confirmPassword,errorMessage:r.confirmPassword,isInvalid:!!r.confirmPassword,onChange:e=>o({...s,confirmPassword:e.target.value})}),a.jsxs(A,{label:"Role",placeholder:"Select Role",value:s.role,errorMessage:r.role,isInvalid:!!r.role,onChange:e=>o({...s,role:e}),children:[a.jsx(p,{value:"Admin",children:"Admin"},"Admin"),a.jsx(p,{value:"Teacher",children:"Teacher"},"Teacher"),a.jsx(p,{value:"Parent",children:"Parent"},"Parent")]})]}),a.jsx("div",{className:"mt-6",children:a.jsx(I,{type:"submit",color:"primary",size:"lg",radius:"sm",children:"Add User"})})]})]})})},K=()=>a.jsxs("div",{className:"w-full h-full flex",children:[a.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:a.jsx(P,{})}),a.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[a.jsx(L,{}),a.jsx(E,{})]})]});export{K as default};
