import{u as w,c as y,r as h,j as e,a as p,_ as o}from"./index-9k_Ocd80.js";import{A as F}from"./AdminSidebar-DGQnSepX.js";import{F as E,d as C}from"./index-B6K5ESG2.js";import{t as L}from"./profile-DYuKv9Zm.js";import{i as c}from"./chunk-GQQM5TNQ-DIeraZ41.js";import{s as I,l as g}from"./chunk-CEHIK4GH-zxS_DSeF.js";import{b as N}from"./chunk-DBLREEYE-DVjbjQx8.js";import{C as P}from"./ContentHeader-BKYcynH5.js";import"./useOverlayTriggerState-BZO4l0S3.js";import"./chunk-CIZQCQPA-8Nr0sLZY.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useFormReset-8bZuwF1F.js";import"./useField-CpUyNuvN.js";import"./useLabels-D-HJF6pw.js";import"./useDialog-Cje9gbXM.js";import"./VisuallyHidden-PT-Sj4_P.js";function U(l){const a=[],i=/[A-Z]/.test(l),t=/[a-z]/.test(l),u=/\d/.test(l),f=/[!@#$%^&*(),.?":{}|<>]/.test(l);return l?(l.length<8&&a.push("Password must be at least 8 characters long."),i||a.push("Password must contain at least one uppercase letter."),t||a.push("Password must contain at least one lowercase letter."),u||a.push("Password must contain at least one digit."),f||a.push("Password must contain at least one special character."),a.length>0?a.join(" "):null):"Password is required."}const A=()=>{const l=w(),{UserID:n}=y(),[a,i]=h.useState({FirstName:"",LastName:"",email:"",password:"",role:""}),[t,u]=h.useState({});h.useEffect(()=>{(async()=>{try{const r=await p.get(`/api/getUserID/${n}`);i(d=>({...d,...r.data,password:""}))}catch(r){console.error("Error fetching user data:",r),o.error("Failed to fetch user data. Please try again later.")}})()},[n]);const f=()=>{let s=!0,r={};if(a.FirstName||(r.FirstName="First Name is required.",s=!1),a.LastName||(r.LastName="Last Name is required.",s=!1),a.email||(r.email="Email is required.",s=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(r.email="Invalid email format.",s=!1),a.password){const m=U(a.password);m&&(r.password=m,s=!1)}return u(r),s},v=async s=>{if(s.preventDefault(),!f()){o.error("Please fill out the form correctly.");return}try{const{FirstName:r,LastName:d,email:m,password:j,role:b}=a,x=await p.patch(`/api/updateUser/${n}`,{FirstName:r,LastName:d,email:m,password:j,role:b});x.data.error?o.error(x.data.error):(o.success("Updated User info successfully."),l("/AdminUsers"))}catch(r){console.error("Error updating user data:",r),o.error("Failed to update user. Please try again.")}};return e.jsx("div",{className:"container mx-auto px-6 pt-[4rem]",children:e.jsxs("div",{className:"bg-white shadow-md rounded-md px-8 pt-6 pb-8 mb-4 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("h2",{id:"update-user-info",className:"text-2xl font-bold text-gray-800",children:"Update User's Information"}),e.jsx(L,{"aria-labelledby":"update-user-info",content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"Update Information"}),e.jsx("div",{className:"text-xs",children:"This function will update the information of the user in the system."})]}),children:e.jsx(E,{icon:C,size:"lg",className:"text-gray-600","aria-label":"Information icon"})})]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"first-name",className:"font-medium text-gray-700",children:"First Name"}),e.jsx(c,{id:"first-name","aria-label":"First Name",underlined:!0,type:"text",placeholder:"Enter First Name",value:a.FirstName,errorMessage:t.FirstName,isInvalid:!!t.FirstName,onChange:s=>i({...a,FirstName:s.target.value})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"last-name",className:"font-medium text-gray-700",children:"Last Name"}),e.jsx(c,{id:"last-name","aria-label":"Last Name",underlined:!0,type:"text",placeholder:"Enter Last Name",value:a.LastName,errorMessage:t.LastName,isInvalid:!!t.LastName,onChange:s=>i({...a,LastName:s.target.value})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"email",className:"font-medium text-gray-700",children:"Email"}),e.jsx(c,{id:"email","aria-label":"Email",underlined:!0,type:"email",placeholder:"Enter the User's Email",value:a.email,errorMessage:t.email,isInvalid:!!t.email,onChange:s=>i({...a,email:s.target.value})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"password",className:"font-medium text-gray-700",children:"Password"}),e.jsx(c,{id:"password","aria-label":"Password",underlined:!0,type:"password",placeholder:"Set Password",value:a.password,errorMessage:t.password,isInvalid:!!t.password,onChange:s=>i({...a,password:s.target.value})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"role",className:"font-medium text-gray-700",children:"Role"}),e.jsxs(I,{id:"role","aria-label":"Role",placeholder:"Select Role",value:a.role,errorMessage:t.role,isInvalid:!!t.role,onChange:s=>i({...a,role:s.target.value}),children:[e.jsx(g,{value:"Admin",children:"Admin"},"Admin"),e.jsx(g,{value:"Teacher",children:"Teacher"},"Teacher")]})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx(N,{type:"submit",color:"primary","aria-label":"Save Changes",children:"Save Changes"}),e.jsx(N,{className:"bg-[#ff505b] text-white ml-4",onClick:()=>l(-1),"aria-label":"Cancel",children:"Cancel"})]})]})]})})},K=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(F,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(P,{}),e.jsx(A,{})]})]});export{K as default};
