import{u as J}from"./chunk-GQQM5TNQ-HE8oeiaq.js";import{h as K,c as I,x as F}from"./chunk-DBLREEYE-DQXm-99S.js";import{r as a,j as l}from"./index-DAh1FqN3.js";import{_ as Q}from"./extends-CF3RwP-h.js";import{_ as V}from"./objectWithoutPropertiesLoose-CAYKN5F1.js";var ee=a.useLayoutEffect,te=function(e){var t=a.useRef(e);return ee(function(){t.current=e}),t},P=function(e,t){if(typeof e=="function"){e(t);return}e.current=t},re=function(e,t){var r=a.useRef();return a.useCallback(function(i){e.current=i,r.current&&P(r.current,null),r.current=t,t&&P(t,i)},[t])},M={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ne=function(e){Object.keys(M).forEach(function(t){e.style.setProperty(t,M[t],"important")})},B=ne,o=null,$=function(e,t){var r=e.scrollHeight;return t.sizingStyle.boxSizing==="border-box"?r+t.borderSize:r-t.paddingSize};function ie(n,e,t,r){t===void 0&&(t=1),r===void 0&&(r=1/0),o||(o=document.createElement("textarea"),o.setAttribute("tabindex","-1"),o.setAttribute("aria-hidden","true"),B(o)),o.parentNode===null&&document.body.appendChild(o);var i=n.paddingSize,u=n.borderSize,d=n.sizingStyle,v=d.boxSizing;Object.keys(d).forEach(function(p){var x=p;o.style[x]=d[x]}),B(o),o.value=e;var s=$(o,n);o.value=e,s=$(o,n),o.value="x";var f=o.scrollHeight-i,c=f*t;v==="border-box"&&(c=c+i+u),s=Math.max(c,s);var h=f*r;return v==="border-box"&&(h=h+i+u),s=Math.min(h,s),[s,f]}var A=function(){},oe=function(e,t){return e.reduce(function(r,i){return r[i]=t[i],r},{})},ae=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],de=!!document.documentElement.currentStyle,se=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var r=oe(ae,t),i=r.boxSizing;if(i==="")return null;de&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var u=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),d=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:u,borderSize:d}},ue=se;function N(n,e,t){var r=te(t);a.useLayoutEffect(function(){var i=function(d){return r.current(d)};if(n)return n.addEventListener(e,i),function(){return n.removeEventListener(e,i)}},[])}var le=function(e){N(window,"resize",e)},ce=function(e){N(document.fonts,"loadingdone",e)},he=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],fe=function(e,t){var r=e.cacheMeasurements,i=e.maxRows,u=e.minRows,d=e.onChange,v=d===void 0?A:d,s=e.onHeightChange,f=s===void 0?A:s,c=V(e,he),h=c.value!==void 0,p=a.useRef(null),x=re(p,t),H=a.useRef(0),z=a.useRef(),b=function(){var g=p.current,y=r&&z.current?z.current:ue(g);if(y){z.current=y;var m=ie(y,g.value||g.placeholder||"x",u,i),S=m[0],E=m[1];H.current!==S&&(H.current=S,g.style.setProperty("height",S+"px","important"),f(S,{rowHeight:E}))}},C=function(g){h||b(),v(g)};return a.useLayoutEffect(b),le(b),ce(b),a.createElement("textarea",Q({},c,{onChange:C,ref:x}))},pe=a.forwardRef(fe),_=K(({style:n,minRows:e=3,maxRows:t=8,cacheMeasurements:r=!1,disableAutosize:i=!1,onHeightChange:u,...d},v)=>{const{Component:s,label:f,description:c,startContent:h,endContent:p,hasHelper:x,shouldLabelBeOutside:H,shouldLabelBeInside:z,isInvalid:b,errorMessage:C,getBaseProps:R,getLabelProps:g,getInputProps:y,getInnerWrapperProps:m,getInputWrapperProps:S,getHelperWrapperProps:E,getDescriptionProps:k,getErrorMessageProps:O}=J({...d,ref:v,isMultiline:!0}),[U,Y]=a.useState(e>1),[D,G]=a.useState(!1),W=f?l.jsx("label",{...g(),children:f}):null,L=y(),X=(w,T)=>{if(e===1&&Y(w>=T.rowHeight*2),t>e){const q=w>=t*T.rowHeight;G(q)}u==null||u(w,T)},j=i?l.jsx("textarea",{...L,style:I(L.style,n??{})}):l.jsx(pe,{...L,cacheMeasurements:r,"data-hide-scroll":F(!D),maxRows:t,minRows:e,style:I(L.style,n??{}),onHeightChange:X}),Z=a.useMemo(()=>h||p?l.jsxs("div",{...m(),children:[h,j,p]}):l.jsx("div",{...m(),children:j}),[h,L,p,m]);return l.jsxs(s,{...R(),children:[H?W:null,l.jsxs("div",{...S(),"data-has-multiple-rows":F(U),children:[z?W:null,Z]}),x?l.jsx("div",{...E(),children:b&&C?l.jsx("div",{...O(),children:C}):c?l.jsx("div",{...k(),children:c}):null}):null]})});_.displayName="NextUI.Textarea";var Se=_;export{Se as t};
