import{r as f,u as U,j as t,a as Y,n as h}from"./index-CytFzJTk.js";import{F as c,l as y,m as z,n as H,f as Z,a as S,b as P}from"./index-PXQ1YuWO.js";import{c as J,a as K}from"./chunk-H4VOEXHF-CijtNnzY.js";import{b as N}from"./chunk-DBLREEYE-53qvhEL6.js";import{i as l}from"./chunk-GQQM5TNQ-CnaUX6RY.js";import{s as g,l as m}from"./chunk-CEHIK4GH-Cyei1wF1.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useFormReset-CkOF4zRR.js";import"./useField-Byj44BsS.js";import"./useLabels-BCwhErad.js";import"./useOverlayTriggerState-CNapCAVp.js";import"./useDialog-CpIAXjYa.js";import"./VisuallyHidden-CbhYqNJx.js";import"./Overlay-B4xu74jB.js";const ce=()=>{const[a,n]=f.useState({FirstName:"",LastName:"",Section:"",Department:"",Birthday:"",Age:"",Gender:"",Address:"",Status:"",ContactNumber:"",email:"",password:"",confirmPassword:""}),[r,j]=f.useState({}),C=U(),[w,A]=f.useState(0),[p,I]=f.useState(!1),D=()=>I(!p),[x,F]=f.useState(!1),L=()=>F(!x),M=()=>{C("/register")},B=e=>{const s=new Date(e),i=new Date;let d=i.getFullYear()-s.getFullYear();const o=i.getMonth()-s.getMonth();return(o<0||o===0&&i.getDate()<s.getDate())&&d--,d};function q(e){const i=[],d=/[A-Z]/.test(e),o=/[a-z]/.test(e),b=/\d/.test(e),v=/[!@#$%^&*(),.?":{}|<>]/.test(e);return e?(e.length<8&&i.push("Password must be at least 8 characters long."),d||i.push("Password must contain at least one uppercase letter."),o||i.push("Password must contain at least one lowercase letter."),b||i.push("Password must contain at least one digit."),v||i.push("Password must contain at least one special character."),i.length>0?i.join(" "):null):"Password is required."}const E=()=>{let e=!0,s={};j({}),a.FirstName||(s.FirstName="First Name is required.",e=!1),a.LastName||(s.LastName="Last Name is required.",e=!1),a.Section||(s.Section="Section is required.",e=!1),a.Department||(s.Department="Department is required.",e=!1),a.Birthday||(s.Birthday="Birthday is required.",e=!1),a.Age<20&&(s.Birthday="Age must be at least 20 years old.",e=!1),a.Gender||(s.Gender="Gender is required.",e=!1),a.Address||(s.Address="Address is required.",e=!1),a.Status||(s.Status="Status is required.",e=!1),a.ContactNumber||(s.ContactNumber="Contact Number is required.",e=!1),/^09\d{9}$/.test(a.ContactNumber)||(s.ContactNumber="Please enter a valid PH contact number.",e=!1),a.email||(s.email="Email is required.",e=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(s.email="Invalid email format.",e=!1);const o=q(a.password);return o?(s.password=o,e=!1):a.password!==a.confirmPassword&&(s.confirmPassword="Passwords do not match.",e=!1),j(s),e},G=async e=>{if(e.preventDefault(),!E()){h.error("Please fill out this form.");return}const{FirstName:s,LastName:i,Section:d,Department:o,Birthday:b,Address:v,Status:_,Gender:R,ContactNumber:V,email:T,password:k,Age:$}=a;try{const u=await Y.post("/api/registerTeacher",{FirstName:s,LastName:i,Section:d,Department:o,Birthday:b,Age:$,Address:v,Status:_,Gender:R,ContactNumber:V,email:T,password:k});u.data.error?h.error(u.data.error):(n({}),h.success(u.data.message),localStorage.setItem("userId",u.data.data.userId),C("/verifyEmail"))}catch{h.error("An error occurred. Please try again.")}};return t.jsx("div",{className:"flex bg-[#f6fbff] w-full items-center min-h-screen p-4 md:p-8",children:t.jsx("div",{className:"w-full max-w-4xl mx-auto",children:t.jsxs(J,{className:"w-full flex flex-col p-4",children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-center",children:"Teacher Registration"}),t.jsx("div",{className:"flex gap-4 md:gap-6 border-b pb-3 justify-center mb-4",children:t.jsx(N,{variant:"light",className:`text-sm md:text-md font-medium ${w===0?"border-b-4 border-blue-500":""}`,onClick:()=>A(0),children:"Teacher Information"})}),t.jsx("p",{className:"text-sm text-center mb-4",children:"Please fill up the details needed!"}),t.jsx(K,{children:w===0&&t.jsxs("form",{onSubmit:G,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(l,{name:"FirstName",label:"First Name",variant:"bordered",value:a.FirstName,onChange:e=>n({...a,FirstName:e.target.value}),errorMessage:r.FirstName,isInvalid:!!r.FirstName,endContent:t.jsx(c,{icon:y})}),t.jsx(l,{name:"LastName",label:"Last Name",variant:"bordered",value:a.LastName,onChange:e=>n({...a,LastName:e.target.value}),errorMessage:r.LastName,isInvalid:!!r.LastName,endContent:t.jsx(c,{icon:y})}),t.jsxs(g,{label:"Section",placeholder:"Select your section",variant:"bordered",value:a.Section,onChange:e=>n({...a,Section:e.target.value}),errorMessage:r.Section,isInvalid:!!r.Section,children:[t.jsx(m,{children:"Aster"},"Aster"),t.jsx(m,{children:"Camia"},"Camia")]}),t.jsx(g,{label:"Department",placeholder:"Select your department",variant:"bordered",value:a.Department,onChange:e=>n({...a,Department:e.target.value}),errorMessage:r.Department,isInvalid:!!r.Department,children:t.jsx(m,{children:"Filipino"},"Filipino")}),t.jsx(l,{name:"Birthday",type:"date",label:"Birthday",variant:"bordered",value:a.Birthday,onChange:e=>{const s=e.target.value,i=B(s);n({...a,Birthday:s,Age:i})},errorMessage:r.Birthday,isInvalid:!!r.Birthday}),t.jsxs(g,{label:"Gender",placeholder:"Select your gender",variant:"bordered",value:a.Gender,onChange:e=>n({...a,Gender:e.target.value}),errorMessage:r.Gender,isInvalid:!!r.Gender,children:[t.jsx(m,{children:"Male"},"Male"),t.jsx(m,{children:"Female"},"Female")]}),t.jsx(l,{name:"Address",label:"Address",variant:"bordered",value:a.Address,onChange:e=>n({...a,Address:e.target.value}),errorMessage:r.Address,isInvalid:!!r.Address,endContent:t.jsx(c,{icon:z})}),t.jsx(g,{name:"Status",label:"Status",variant:"bordered",placeholder:"Select your status",value:a.Status,onChange:e=>n({...a,Status:e.target.value}),errorMessage:r.Status,isInvalid:!!r.Status,children:t.jsx(m,{children:"Single"},"Single")}),t.jsx(l,{name:"ContactNumber",label:"Contact Number",maxLength:11,variant:"bordered",value:a.ContactNumber,onChange:e=>n({...a,ContactNumber:e.target.value}),errorMessage:r.ContactNumber,isInvalid:!!r.ContactNumber,endContent:t.jsx(c,{icon:H})}),t.jsx(l,{name:"email",label:"Email",variant:"bordered",value:a.email,onChange:e=>n({...a,email:e.target.value}),errorMessage:r.email,isInvalid:!!r.email,endContent:t.jsx(c,{icon:Z})})]}),t.jsxs("div",{className:"mt-3",children:[t.jsx(l,{name:"password",label:"Password",type:p?"text":"password",variant:"bordered",value:a.password,onChange:e=>n({...a,password:e.target.value}),errorMessage:r.password,isInvalid:!!r.password,endContent:t.jsx("button",{type:"button",onClick:D,children:t.jsx(c,{icon:p?S:P})})}),t.jsx(l,{name:"confirmPassword",label:"Confirm Password",type:x?"text":"password",variant:"bordered",value:a.confirmPassword,className:"mt-3",onChange:e=>n({...a,confirmPassword:e.target.value}),errorMessage:r.confirmPassword,isInvalid:!!r.confirmPassword,endContent:t.jsx("button",{type:"button",onClick:L,children:t.jsx(c,{icon:x?S:P})})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 mt-6",children:[t.jsx(N,{className:"w-full md:w-1/2 text-md",color:"danger",variant:"light",onClick:M,children:"Cancel"}),t.jsx(N,{type:"submit",className:"w-full md:w-1/2 text-md",color:"primary",children:"Submit"})]})]})})]})})})};export{ce as default};
