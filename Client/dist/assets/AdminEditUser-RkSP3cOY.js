import{u as y,c as b,r as h,j as e,a as p,_ as o}from"./index-CTj0YJ1Y.js";import{A as E}from"./AdminSidebar-DE4DmKPW.js";import{F,d as C}from"./index-BcSmDaVd.js";import{t as L}from"./profile-D-WrxDmp.js";import{i as c}from"./chunk-GQQM5TNQ-DyoA3HMu.js";import{s as U,l as g}from"./chunk-CEHIK4GH-UxlawHOX.js";import{b as N}from"./chunk-DBLREEYE-CvKmoq8j.js";import{C as I}from"./ContentHeader-BKBEC5nn.js";import"./useOverlayTriggerState-D10URHoC.js";import"./chunk-CIZQCQPA-C6GiROrz.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useFormReset-ZZAutucB.js";import"./useField-Bu7ocRcs.js";import"./useLabels-BZbr8wBC.js";import"./useDialog-CcArMXMb.js";import"./VisuallyHidden-D98cUbQE.js";import"./Overlay-CRNQS_wT.js";function P(l){const s=[],i=/[A-Z]/.test(l),r=/[a-z]/.test(l),u=/\d/.test(l),f=/[!@#$%^&*(),.?":{}|<>]/.test(l);return l?(l.length<8&&s.push("Password must be at least 8 characters long."),i||s.push("Password must contain at least one uppercase letter."),r||s.push("Password must contain at least one lowercase letter."),u||s.push("Password must contain at least one digit."),f||s.push("Password must contain at least one special character."),s.length>0?s.join(" "):null):"Password is required."}const A=()=>{const l=y(),{UserID:n}=b(),[s,i]=h.useState({FirstName:"",LastName:"",email:"",password:"",role:""}),[r,u]=h.useState({});h.useEffect(()=>{(async()=>{try{const t=await p.get(`/api/getUserID/${n}`);i(d=>({...d,...t.data,password:""}))}catch(t){console.error("Error fetching user data:",t),o.error("Failed to fetch user data. Please try again later.")}})()},[n]);const f=()=>{let a=!0,t={};if(s.FirstName||(t.FirstName="First Name is required.",a=!1),s.LastName||(t.LastName="Last Name is required.",a=!1),s.email||(t.email="Email is required.",a=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(t.email="Invalid email format.",a=!1),s.password){const m=P(s.password);m&&(t.password=m,a=!1)}return u(t),a},j=async a=>{if(a.preventDefault(),!f()){o.error("Please fill out the form correctly.");return}try{const{FirstName:t,LastName:d,email:m,password:v,role:w}=s,x=await p.patch(`/api/updateUser/${n}`,{FirstName:t,LastName:d,email:m,password:v,role:w});x.data.error?o.error(x.data.error):(o.success("Updated User info successfully."),l("/AdminUsers"))}catch(t){console.error("Error updating user data:",t),o.error("Failed to update user. Please try again.")}};return e.jsx("div",{className:"container mx-auto px-6 pt-[4rem]",children:e.jsxs("div",{className:"bg-white shadow-md rounded-md px-8 pt-6 pb-8 mb-4 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Update User's Information"}),e.jsx(L,{content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-sm font-bold",children:"Update Information"}),e.jsx("div",{className:"text-xs",children:"This function will update the information of the user in the system."})]}),children:e.jsx(F,{icon:C,size:"lg",className:"text-gray-600"})})]}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"First Name"}),e.jsx(c,{underlined:!0,type:"text",placeholder:"Enter First Name",value:s.FirstName,errorMessage:r.FirstName,isInvalid:!!r.FirstName,onChange:a=>i({...s,FirstName:a.target.value})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Last Name"}),e.jsx(c,{underlined:!0,type:"text",placeholder:"Enter Last Name",value:s.LastName,errorMessage:r.LastName,isInvalid:!!r.LastName,onChange:a=>i({...s,LastName:a.target.value})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Email"}),e.jsx(c,{underlined:!0,type:"email",placeholder:"Enter the User's Email",value:s.email,errorMessage:r.email,isInvalid:!!r.email,onChange:a=>i({...s,email:a.target.value})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Password"}),e.jsx(c,{underlined:!0,type:"password",placeholder:"Set Password",value:s.password,errorMessage:r.password,isInvalid:!!r.password,onChange:a=>i({...s,password:a.target.value})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Role"}),e.jsxs(U,{placeholder:"Select Role",value:s.role,errorMessage:r.role,isInvalid:!!r.role,onChange:a=>i({...s,role:a.target.value}),children:[e.jsx(g,{value:"Admin",children:"Admin"},"Admin"),e.jsx(g,{value:"Teacher",children:"Teacher"},"Teacher")]})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx(N,{type:"submit",color:"primary",children:"Save Changes"}),e.jsx(N,{className:"bg-[#ff505b] text-white ml-4",onClick:()=>l(-1),children:"Cancel"})]})]})]})})},O=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(E,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(I,{}),e.jsx(A,{})]})]});export{O as default};
