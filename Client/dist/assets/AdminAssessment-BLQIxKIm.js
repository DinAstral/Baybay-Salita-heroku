import{j as e,L as ce,r as l,a as M,_ as q}from"./index-CuF2S_gx.js";import{A as de}from"./AdminSidebar-nDULRVuu.js";import{l as me}from"./index-5U1QNFnd.js";import{P as T,F as U,d as he,i as ue}from"./index-Dwc9WYvd.js";import{R as xe}from"./react-paginate-BsbmwESZ.js";import{C as pe}from"./ContentHeader-mDxhvIwR.js";import{P as fe,t as je,a as be,b as S,c as ge,d as Se,e as I}from"./PrintRecord-Dl-gqFSm.js";import{I as Ie,a as ye,D as ve}from"./importSentence-Ck4XxZYX.js";import{m as L,a as O,b as H,c as z}from"./chunk-P2T5LMDM-mppG7zae.js";import{m as B}from"./chunk-LT4XONRR-DSyTWFia.js";import{b as d}from"./chunk-DBLREEYE-8AJS5ZgE.js";import{s as p,l as a}from"./chunk-CEHIK4GH-DO1lEcIK.js";import{t as Y}from"./profile-CqU1njxP.js";import"./useOverlayTriggerState-Cxqf9S1j.js";import"./useDialog-DmKmGu7k.js";import"./useLabels-6K5bYqFT.js";import"./VisuallyHidden-CjGvSP-J.js";import"./Overlay-CkX1cLz_.js";import"./chunk-KBN3H6OQ-Bb-Uy1H9.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useField-DrkOjzsU.js";import"./chunk-CIZQCQPA-CIyQusMM.js";import"./chunk-GQQM5TNQ-CDtmyARy.js";import"./useFormReset-Bh9EAnCA.js";import"./chunk-ATAY3LCU-OVssTweg.js";import"./extends-CF3RwP-h.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";const Q=({show:u,onHide:o,activity:m})=>e.jsx(L,{isOpen:u,onClose:o,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(B,{children:[e.jsx(O,{className:"flex flex-col",id:"edit-user-modal-title",children:"View Assessment Information"}),e.jsx(H,{children:e.jsx("p",{children:"Do you want to view the assessment of the student selected?"})}),e.jsxs(z,{children:[e.jsx(d,{color:"danger",variant:"light",onClick:o,children:"Cancel"}),e.jsx(ce,{to:`/adminViewAssessment/${m==null?void 0:m.ActivityCode}`,children:e.jsx(d,{color:"primary",children:"View"})})]})]})});Q.propTypes={show:T.bool.isRequired,onHide:T.func.isRequired,activity:T.object};const we=({show:u,onHide:o})=>{const m=()=>{o(),window.location.reload()};return e.jsx(L,{isOpen:u,onClose:o,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(B,{children:[e.jsx(O,{id:"contained-modal-title-vcenter",children:"Activity Created Successfully!"}),e.jsx(H,{children:e.jsx("p",{children:"You have created an activity for your students!"})}),e.jsx(z,{children:e.jsx(d,{color:"primary",onClick:m,children:"Close"})})]})})},X=({show:u,handleClose:o,userId:m})=>{const[N,_]=l.useState(!1),[y,E]=l.useState([]),[D,W]=l.useState([]),[v,w]=l.useState([]),[t,h]=l.useState({Section:"",Period:"",Type:"",Title:"",Item1:"",Item2:"",Item3:"",Item4:"",Item5:"",Item6:"",Item7:"",Item8:"",Item9:"",Item10:""}),[c,k]=l.useState({}),R=()=>{let s=!0;const i={};if(t.Section||(i.Section="Please select a section.",s=!1),t.Period||(i.Period="Please select a grading period.",s=!1),t.Type||(i.Type="Please select a type of assessment.",s=!1),t.Type==="Pagbabasa"&&!t.Title&&(i.Title="Title is required for Pagbabasa.",s=!1),t.Type!=="Pagbabasa")for(let n=1;n<=10;n++)t[`Item${n}`]||(i[`Item${n}`]=`Item ${n} is required.`,s=!1);return k(i),s},P=()=>{M.get("/api/getImportWord").then(s=>{E(s.data)}).catch(s=>console.log(s))},$=()=>{M.get("/api/getSentence").then(s=>{W(s.data)}).catch(s=>console.log(s))};l.useEffect(()=>{P(),$()},[]),l.useEffect(()=>{if(t.Type){const s=y.filter(i=>i.Type===t.Type);w(s)}else w([])},[t.Type,y]);const F=(s,i)=>{const n=v.find(x=>x.ItemCode===i);h({...t,[s]:n?n.ItemCode:""})},G=async s=>{if(s.preventDefault(),!R())return q.error("Please fill out all required fields.");const{Period:i,Type:n,Title:x,Section:f}=t;try{const j=await M.post("/api/submitAssessment",{UserID:m,Section:f,Period:i,Type:n,Title:x,Item1:t.Item1,Item2:t.Item2,Item3:t.Item3,Item4:t.Item4,Item5:t.Item5,Item6:t.Item6,Item7:t.Item7,Item8:t.Item8,Item9:t.Item9,Item10:t.Item10});j.data.error?q.error(j.data.error):(h({Section:"",Period:"",Type:"",Title:"",Item1:"",Item2:"",Item3:"",Item4:"",Item5:"",Item6:"",Item7:"",Item8:"",Item9:"",Item10:""}),q.success("Created Activity Successfully."),_(!0),o())}catch(j){console.log(j)}};return e.jsxs(e.Fragment,{children:[e.jsx(L,{isOpen:u,onClose:o,size:"lg","aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,placement:"center",scrollBehavior:"inside",children:e.jsxs(B,{className:"w-full md:w-[50vw] max-w-full max-h-[80vh] overflow-y-auto bg-white p-4 rounded-lg",children:[e.jsx(O,{id:"contained-modal-title-vcenter",className:"text-lg font-bold",children:"Create New Activity"}),e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs(H,{children:[e.jsxs(p,{labelPlacement:"outside",label:"Grading Period",placeholder:"Select Grading Period",value:t.Period,onChange:s=>h({...t,Period:s.target.value}),className:"w-full my-2",isInvalid:!!c.Period,errorMessage:c.Period,children:[e.jsx(a,{children:"Grading Period 1"},"1"),e.jsx(a,{children:"Grading Period 2"},"2"),e.jsx(a,{children:"Grading Period 3"},"3"),e.jsx(a,{children:"Grading Period 4"},"4")]}),e.jsxs(p,{labelPlacement:"outside",label:"Section",placeholder:"Select Section",className:"w-full my-2",value:t.Section,onChange:s=>h({...t,Section:s.target.value}),isInvalid:!!c.Section,errorMessage:c.Section,children:[e.jsx(a,{disabled:!0,children:"Select Section"},""),e.jsx(a,{children:"Aster"},"Aster"),e.jsx(a,{children:"Camia"},"Camia"),e.jsx(a,{children:"Dahlia"},"Dahlia"),e.jsx(a,{children:"Iris"},"Iris"),e.jsx(a,{children:"Jasmin"},"Jasmin"),e.jsx(a,{children:"Orchid"},"Orchid"),e.jsx(a,{children:"Rose"},"Rose"),e.jsx(a,{children:"Tulip"},"Tulip"),e.jsx(a,{children:"SSC"},"SSC")]}),e.jsxs(p,{labelPlacement:"outside",label:"Type of Assessment",placeholder:"Select Type of Assessment:",value:t.Type,onChange:s=>h({...t,Type:s.target.value}),className:"w-full my-2",isInvalid:!!c.Type,errorMessage:c.Type,children:[e.jsx(a,{children:"Assessment 1: Pagbabaybay Tunog at Letra"},"Pagbabaybay"),e.jsx(a,{children:"Assessment 2: Pantig"},"Pantig"),e.jsx(a,{children:"Assessment 3: Salita"},"Salita"),e.jsx(a,{children:"Assessment 4: Pagbabasa"},"Pagbabasa")]}),t.Type==="Pagbabasa"&&e.jsx(p,{labelPlacement:"outside",label:"Title",value:t.Title,placeholder:"Select a Title:",onChange:s=>h({...t,Title:s.target.value}),className:"w-full my-2",isInvalid:!!c.Title,errorMessage:c.Title,children:D.map(s=>e.jsx(a,{value:s.Title,children:s.Title},s.Title))}),t.Type!=="Pagbabasa"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(10)].map((s,i)=>e.jsx(p,{labelPlacement:"outside",label:`Item ${i+1}`,value:t[`Item${i+1}`],placeholder:"Select a word:",onChange:n=>F(`Item${i+1}`,n.target.value),className:"w-full my-2",isInvalid:!!c[`Item${i+1}`],errorMessage:c[`Item${i+1}`],children:v.map(n=>e.jsx(a,{value:n.Word,children:n.Word},n.ItemCode))},`Item${i+1}`))})]}),e.jsxs(z,{className:"flex justify-end space-x-2",children:[e.jsx(d,{color:"danger",variant:"light",onClick:o,children:"Close"}),e.jsx(d,{color:"primary",type:"submit",children:"Create Activity"})]})]})]})}),e.jsx(we,{show:N,onHide:()=>_(!1)})]})};X.propTypes={show:T.bool.isRequired,handleClose:T.func.isRequired};const Pe=()=>{const[u,o]=l.useState(!1),[m,N]=l.useState(!1),[_,y]=l.useState(!1),[E,D]=l.useState(!1),[W,v]=l.useState(!1),[w,t]=l.useState(null),[h,c]=l.useState([]),[k,R]=l.useState([]),[P,$]=l.useState(""),[F,G]=l.useState(!1),[s,i]=l.useState(""),[n,x]=l.useState(0),[f]=l.useState(9),j=()=>o(!1),Z=()=>o(!0),K=l.useRef(null),{onDownload:ee}=me.useDownloadExcel({currentTableRef:K.current,filename:"Student_Assessment_Report_table",sheet:"Assessment"}),V=()=>{M.get("/api/getAssessments").then(r=>{c(r.data),R(r.data),x(0)}).catch(r=>console.log(r))};l.useEffect(()=>{V()},[]);const se=()=>{v(!0)},te=()=>{N(!0)},ae=()=>{D(!0)},J=(r,C)=>{const A=r.target.value;C==="period"?$(A):C==="type"&&i(A);let b=h;A!==""&&(b=h.filter(g=>C==="period"?g.Period===A:g.Type===A)),P&&C==="type"&&(b=b.filter(g=>g.Period===P)),s&&C==="period"&&(b=b.filter(g=>g.Type===s)),R(b),x(0)},le=n*f+f,ie=n*f,re=k.slice(ie,le),ne=Math.ceil(k.length/f),oe=r=>{x(r.selected)};return e.jsxs("div",{className:"px-9",children:[e.jsx(fe,{show:W,onHide:()=>v(!1),print:ee}),e.jsx(X,{show:u,handleClose:j,onSuccess:V}),e.jsx(Ie,{show:m,onHide:()=>N(!1)}),e.jsx(ye,{show:E,onHide:()=>D(!1)}),e.jsx(Q,{show:_,activity:w,onHide:()=>y(!1)}),e.jsx(ve,{show:F,activity:w,onHide:()=>G(!1),onDeleteSuccess:V}),e.jsxs("div",{className:"content-title-header",children:[e.jsxs("div",{children:["Manage Student Assessment",e.jsx(Y,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Assessment Table"}),e.jsx("div",{className:"text-tiny",children:"This function will view the assessment of the students in each section."})]}),children:e.jsx(U,{icon:he,size:"1x",className:"help-icon"})})]}),e.jsx("div",{className:"generate-report",children:e.jsx(Y,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Print"}),e.jsx("div",{className:"text-tiny",children:"Generate report/Print table"})]}),children:e.jsx(U,{icon:ue,size:"1x",className:"print-icon",onClick:se})})})]}),e.jsx("div",{className:"content-container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card mt-1 border-0",children:[e.jsxs("div",{className:"list-header-drop-score",children:[e.jsxs("div",{className:"flex flex-row gap-5 justify-start w-[100%]",children:[e.jsxs(p,{labelPlacement:"outside",label:"Grading Period",variant:"bordered",className:"bg-transparent w-[20%]",onChange:r=>J(r,"period"),value:P,children:[e.jsx(a,{children:"Select Grading Period"},""),e.jsx(a,{children:"Grading Period 1"},"1"),e.jsx(a,{children:"Grading Period 2"},"2"),e.jsx(a,{children:"Grading Period 3"},"3"),e.jsx(a,{children:"Grading Period 4"},"4")]}),e.jsxs(p,{className:"w-[20%]",labelPlacement:"outside",label:"Assessment",variant:"bordered",onChange:r=>J(r,"type"),value:s,children:[e.jsx(a,{children:"Select Type of Assessment:"},""),e.jsx(a,{children:"Assessment 1"},"Pagbabaybay"),e.jsx(a,{children:"Assessment 2"},"Pantig"),e.jsx(a,{children:"Assessment 3"},"Salita"),e.jsx(a,{children:"Assessment 4"},"Pagbabasa")]})]}),e.jsxs("div",{className:"flex flex-row gap-5 justify-end mt-3",children:[e.jsx(d,{auto:!0,onClick:ae,color:"default",children:"Import Sentence"}),e.jsx(d,{auto:!0,onClick:te,color:"default",children:"Import Word"}),e.jsx(d,{auto:!0,onClick:Z,color:"primary",children:"Create Activity"})]})]}),e.jsx("div",{className:"card-body scrollable-table scrollable-container",children:e.jsxs(je,{"aria-label":"Assessment Table",ref:K,removeWrapper:!0,color:"primary",selectionMode:"single",children:[e.jsxs(be,{children:[e.jsx(S,{children:"Activity Code"}),e.jsx(S,{children:"Grading Period"}),e.jsx(S,{children:"Section"}),e.jsx(S,{children:"Type"}),e.jsx(S,{children:"Status"}),e.jsx(S,{className:"text-center",children:"Actions"})]}),e.jsx(ge,{emptyContent:"No rows to display.",children:re.map(r=>e.jsxs(Se,{children:[e.jsx(I,{children:r.ActivityCode}),e.jsx(I,{children:r.Period}),e.jsx(I,{children:r.Section}),e.jsx(I,{children:r.Type}),e.jsx(I,{children:r.Assessment}),e.jsx(I,{className:"text-center",children:e.jsxs("div",{className:"table-buttons",children:[e.jsx(d,{color:"primary",onClick:()=>{t(r),y(!0)},children:"View"}),e.jsx(d,{className:"bg-[#ff505b] text-white",onClick:()=>{t(r),G(!0)},children:"Delete"})]})})]},r._id))})]})}),e.jsx("div",{className:"pagination-controls",children:e.jsx(xe,{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",breakClassName:"break-me",pageCount:ne,marginPagesDisplayed:2,pageRangeDisplayed:9,onPageChange:oe,containerClassName:"pagination",activeClassName:"active"})})]})})})})]})},Ze=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(de,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(pe,{}),e.jsx(Pe,{})]})]});export{Ze as default};
