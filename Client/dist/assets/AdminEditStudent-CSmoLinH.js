import{u as N,c as v,r as c,a as f,_ as d,j as e}from"./index-BXV9bpMK.js";import{A as y}from"./AdminSidebar-nH9ek_W7.js";import{F as b,d as S}from"./index-xgicLjPJ.js";import{t as C}from"./profile-Yf8RvZIk.js";import{i}from"./chunk-GQQM5TNQ-BoIlqCBx.js";import{s as g,l}from"./chunk-CEHIK4GH-CW9VsxRl.js";import{b as j}from"./chunk-DBLREEYE-15uI-xy1.js";import{C as A}from"./ContentHeader-BIjoHmmo.js";import"./useOverlayTriggerState-3bp4qIh8.js";import"./chunk-CIZQCQPA-DsFahXx_.js";import"./useField-CHGuITbW.js";import"./useLabels-BQlx2yix.js";import"./useFormReset-C52w8Xoc.js";import"./getChildNodes-iRsPuWMD.js";import"./useDialog-CmpqWMcq.js";import"./VisuallyHidden-D16j2PK0.js";const E=()=>{const m=N(),{id:o}=v(),[a,s]=c.useState({LRN:"",FirstName:"",MiddleName:"",LastName:"",Age:"",Level:"",Section:"",Birthday:"",Address:"",MotherTongue:"",Nationality:"",Gender:"",ContactNumber:""}),u=t=>{if(!t)return"";const n=new Date(t),r=new Date;let h=r.getFullYear()-n.getFullYear();const x=r.getMonth()-n.getMonth();return(x<0||x===0&&r.getDate()<n.getDate())&&h--,h};c.useEffect(()=>{const t=u(a.Birthday);s(n=>({...n,Age:t}))},[a.Birthday]),c.useEffect(()=>{f.get(`/api/getStudentID/${o}`).then(t=>{s(t.data)}).catch(t=>{console.error("Error fetching student data:",t),d.error("Failed to fetch student data. Please try again later.")})},[o]);const p=async t=>{t.preventDefault();const n=u(a.Birthday);if(a.Age!==n){d.error("Age does not match the birthday. Please correct it.");return}try{const{data:r}=await f.patch(`/api/updateStudent/${o}`,a);r.error?d.error(r.error):(d.success("Updated Student info Successfully."),m("/adminStudents"))}catch(r){console.error("Error updating student data:",r),d.error("Failed to update student. Please try again.")}};return e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"max-w-9xl mx-auto bg-white shadow-lg rounded-lg p-8 pt",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Update Student's Information"}),e.jsx(C,{showArrow:!0,content:e.jsxs("div",{className:"px-2 py-1",children:[e.jsx("div",{className:"text-sm font-bold",children:"Update Information"}),e.jsx("div",{className:"text-xs",children:"This function will update the information of the students in the system."})]}),children:e.jsx(b,{icon:S,size:"md",className:"text-gray-600"})})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"LRN"}),e.jsx(i,{underlined:!0,clearable:!0,value:a.LRN,onChange:t=>s({...a,LRN:t.target.value}),placeholder:"Enter student's LRN",maxLength:12,type:"number"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"First Name"}),e.jsx(i,{underlined:!0,clearable:!0,value:a.FirstName,onChange:t=>s({...a,FirstName:t.target.value}),placeholder:"Enter the First Name"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Last Name"}),e.jsx(i,{underlined:!0,clearable:!0,value:a.LastName,onChange:t=>s({...a,LastName:t.target.value}),placeholder:"Enter the Last Name"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Section"}),e.jsxs(g,{placeholder:"Select Section",value:a.Section,onChange:t=>s({...a,Section:t.target.value}),children:[e.jsx(l,{disabled:!0,children:"Select Section"},""),e.jsx(l,{children:"Camia"},"Camia"),e.jsx(l,{children:"Daffodil"},"Daffodil"),e.jsx(l,{children:"Daisy"},"Daisy"),e.jsx(l,{children:"Gumamela"},"Gumamela"),e.jsx(l,{children:"Lily"},"Lily"),e.jsx(l,{children:"Rosal"},"Rosal"),e.jsx(l,{children:"Rose"},"Rose"),e.jsx(l,{children:"Santan"},"Santan"),e.jsx(l,{children:"Special"},"Special")]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Birthday"}),e.jsx(i,{underlined:!0,clearable:!0,value:a.Birthday,onChange:t=>s({...a,Birthday:t.target.value}),type:"date"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Address"}),e.jsx(i,{underlined:!0,clearable:!0,value:a.Address,onChange:t=>s({...a,Address:t.target.value}),placeholder:"Enter the Address"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Mother Tongue"}),e.jsx(i,{underlined:!0,clearable:!0,value:a.MotherTongue,onChange:t=>s({...a,MotherTongue:t.target.value}),placeholder:"Enter the Mother Tongue"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Nationality"}),e.jsx(i,{underlined:!0,clearable:!0,value:a.Nationality,onChange:t=>s({...a,Nationality:t.target.value}),placeholder:"Enter the Nationality"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Gender"}),e.jsxs(g,{placeholder:"Select Gender",value:a.Gender,onChange:t=>s({...a,Gender:t.target.value}),children:[e.jsx(l,{disabled:!0,children:"Select Gender"},""),e.jsx(l,{children:"Male"},"male"),e.jsx(l,{children:"Female"},"female"),e.jsx(l,{children:"Other"},"other")]})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx(j,{type:"submit",color:"primary",auto:!0,children:"Save Changes"}),e.jsx(j,{auto:!0,flat:!0,color:"danger",onClick:()=>m(-1),className:"ml-4",children:"Cancel"})]})]})]})})},z=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(y,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(A,{}),e.jsx(E,{})]})]});export{z as default};
