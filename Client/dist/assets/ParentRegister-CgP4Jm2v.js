import{j as t,u as Z,r as p,a as J,n as S}from"./index--XYEeF9i.js";import{F as d,l as b,n as K,m as Q,f as X,a as P,b as R,o as ee}from"./index-eWAjQsVu.js";import{u as te,c as ae,a as se}from"./chunk-H4VOEXHF-CyPiiN6s.js";import{h as re,u as ne,f as ie,b as j}from"./chunk-DBLREEYE-Bow0krgh.js";import{i as o}from"./chunk-GQQM5TNQ-D6_KO9b6.js";import{s as I,l}from"./chunk-CEHIK4GH-CpJPTGAv.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useFormReset-wXcaweKV.js";import"./useField-C4zr4zpG.js";import"./useLabels-pCgXkyvp.js";import"./useOverlayTriggerState-D2n0VPf1.js";import"./useDialog-C5feT_iQ.js";import"./VisuallyHidden-DN32Y_QR.js";import"./Overlay-Bw2Gwpws.js";var A=re((v,c)=>{var x;const{as:f,className:C,children:g,...w}=v,r=f||"div",y=ne(c),{slots:h,classNames:a}=te(),n=ie(a==null?void 0:a.footer,C);return t.jsx(r,{ref:y,className:(x=h.footer)==null?void 0:x.call(h,{class:n}),...w,children:g})});A.displayName="NextUI.CardFooter";var le=A;const Se=()=>{const v=Z(),[c,x]=p.useState(0),[f,C]=p.useState(!1),[g,w]=p.useState(!1),[r,y]=p.useState({}),h=e=>{const s=new Date(e),i=new Date;let u=i.getFullYear()-s.getFullYear();const m=i.getMonth()-s.getMonth();return(m<0||m===0&&i.getDate()<s.getDate())&&u--,u},[a,n]=p.useState({FirstName:"",LastName:"",StudentFirstName:"",StudentLastName:"",LRN:"",Birthday:"",Age:"",StudentBirthday:"",StudentAge:"",Gender:"",StudentGender:"",Address:"",Status:"",ContactNumber:"",MotherTongue:"",email:"",password:"",confirmPassword:""}),G=()=>C(!f),B=()=>w(!g),F=e=>!isNaN(e);function k(e){const i=[],u=/[A-Z]/.test(e),m=/[a-z]/.test(e),L=/\d/.test(e),M=/[!@#$%^&*(),.?":{}|<>]/.test(e);return e?(e.length<8&&i.push("Password must be at least 8 characters long."),u||i.push("Password must contain at least one uppercase letter."),m||i.push("Password must contain at least one lowercase letter."),L||i.push("Password must contain at least one digit."),M||i.push("Password must contain at least one special character."),i.length>0?i.join(" "):null):"Password is required."}const q=()=>{let e=!0,s={};y({}),a.FirstName||(s.FirstName="First Name is required.",e=!1),a.LastName||(s.LastName="Last Name is required.",e=!1),a.LRN||(s.LRN="LRN is required.",e=!1),F(a.LRN)||(s.LRN="Invalid LRN.",e=!1),a.StudentFirstName||(s.StudentFirstName="Student First Name is required.",e=!1),a.StudentLastName||(s.StudentLastName="Student Last Name is required.",e=!1),a.Birthday||(s.Birthday="Birthday is required.",e=!1),a.StudentBirthday||(s.StudentBirthday="Student Birthday is required.",e=!1),a.StudentAge<5&&(s.StudentBirthday="Age must be at least 5 years old.",e=!1),a.MotherTongue||(s.MotherTongue="MotherTongue is required.",e=!1),a.Gender||(s.Gender="Gender is required.",e=!1),a.StudentGender||(s.StudentGender="Student Gender is required.",e=!1),a.Address||(s.Address="Address is required.",e=!1),a.Status||(s.Status="Status is required.",e=!1),a.ContactNumber||(s.ContactNumber="Contact Number is required.",e=!1),F(a.ContactNumber)||(s.ContactNumber="Invalid Contact Number.",e=!1),/^09\d{9}$/.test(a.ContactNumber)||(s.ContactNumber="Please enter a valid PH contact number.",e=!1),a.email||(s.email="Email is required.",e=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(s.email="Invalid email format.");const m=k(a.password);return m?(s.password=m,e=!1):a.password!==a.confirmPassword&&(s.confirmPassword="Passwords do not match.",e=!1),y(s),e},_=async e=>{if(e.preventDefault(),!q()){S.error("Please fill out this form.");return}const{FirstName:s,LastName:i,Birthday:u,Age:m,Address:L,Status:M,Gender:D,ContactNumber:E,email:T,password:V,StudentFirstName:O,StudentLastName:$,LRN:U,StudentBirthday:W,StudentAge:Y,StudentGender:z,MotherTongue:H}=a;try{const N=await J.post("/api/registerParent",{FirstName:s,LastName:i,Birthday:u,Age:m,Address:L,Status:M,Gender:D,ContactNumber:E,email:T,password:V,StudentFirstName:O,StudentLastName:$,LRN:U,StudentBirthday:W,StudentAge:Y,StudentGender:z,MotherTongue:H});N.data.error?S.error(N.data.error):(n({}),S.success("Register Verification."),localStorage.setItem("userId",N.data.data.userId),v("/verifyEmail"))}catch(N){console.log(N),S.error("An error occurred. Please try again.")}};return t.jsx("div",{className:"p-4 md:p-10 bg-[#f6fbff] flex w-full min-h-screen items-center",children:t.jsxs("div",{className:"w-full max-w-4xl mx-auto bg-white shadow-lg rounded-lg p-6 md:p-10",children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-semibold text-center mb-6",children:"Parent Registration"}),t.jsxs("div",{className:"flex gap-4 md:gap-6 border-b pb-3 justify-center mb-4",children:[t.jsx(j,{variant:"light",className:`text-sm md:text-md font-medium ${c===0?"border-b-4 border-blue-500":""}`,onClick:()=>x(0),children:"Parent Information"}),t.jsx(j,{variant:"light",className:`text-sm md:text-md font-medium ${c===1?"border-b-4 border-blue-500":""}`,onClick:()=>x(1),children:"Student Information"})]}),t.jsx(ae,{children:t.jsxs("form",{onSubmit:_,children:[t.jsxs(se,{children:[c===0&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(o,{type:"text",name:"FirstName",label:"First Name",variant:"bordered",value:a.FirstName,onChange:e=>n({...a,FirstName:e.target.value}),errorMessage:r.FirstName,isInvalid:!!r.FirstName,endContent:t.jsx(d,{icon:b,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})}),t.jsx(o,{type:"text",name:"LastName",label:"Last Name",variant:"bordered",value:a.LastName,onChange:e=>n({...a,LastName:e.target.value}),errorMessage:r.LastName,isInvalid:!!r.LastName,endContent:t.jsx(d,{icon:b,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})}),t.jsx(o,{className:"pt-2",type:"date",label:"Birthday",variant:"bordered",value:a.Birthday,onChange:e=>{const s=e.target.value,i=h(s);n({...a,Birthday:s,Age:i})},errorMessage:r.Birthday,isInvalid:!!r.Birthday}),t.jsx(o,{type:"text",name:"ContactNumber",label:"Contact Number",maxLength:11,variant:"bordered",className:"bg-transparent py-1 my-1",value:a.ContactNumber,onChange:e=>n({...a,ContactNumber:e.target.value}),errorMessage:r.ContactNumber,isInvalid:!!r.ContactNumber,endContent:t.jsx(d,{icon:K,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})}),t.jsxs(I,{label:"Gender",name:"Gender",placeholder:"Select your gender",variant:"bordered",className:"bg-transparent py-1 my-1",value:a.Gender,onChange:e=>n({...a,Gender:e.target.value}),errorMessage:r.Gender,isInvalid:!!r.Gender,children:[t.jsx(l,{disabled:!0,children:"Select Gender"},""),t.jsx(l,{children:"Male"},"Male"),t.jsx(l,{children:"Female"},"Female"),t.jsx(l,{children:"Other"},"Other")]}),t.jsx(o,{type:"text",name:"Address",label:"Address",variant:"bordered",className:"bg-transparent py-1 my-1",value:a.Address,onChange:e=>n({...a,Address:e.target.value}),errorMessage:r.Address,isInvalid:!!r.Address,endContent:t.jsx(d,{icon:Q,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})}),t.jsxs(I,{label:"Status",name:"Status",placeholder:"Select your status",variant:"bordered",className:"bg-transparent py-1 my-1",value:a.Status,onChange:e=>n({...a,Status:e.target.value}),errorMessage:r.Status,isInvalid:!!r.Status,children:[t.jsx(l,{disabled:!0,children:"Select Status"},""),t.jsx(l,{children:"Single"},"Single"),t.jsx(l,{children:"Married"},"Married"),t.jsx(l,{children:"Widowed"},"Widowed"),t.jsx(l,{children:"Separated"},"Separated"),t.jsx(l,{children:"Other"},"Other")]}),t.jsx(o,{type:"text",name:"email",label:"Email",variant:"bordered",className:"bg-transparent py-1 my-1",value:a.email,onChange:e=>n({...a,email:e.target.value}),errorMessage:r.email,isInvalid:!!r.email,endContent:t.jsx(d,{icon:X,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})}),t.jsx(o,{name:"password",label:"Password",variant:"bordered",className:"bg-transparent py-1 my-1",value:a.password,onChange:e=>n({...a,password:e.target.value}),errorMessage:r.password,isInvalid:!!r.password,endContent:t.jsx("button",{className:"focus:outline-none",type:"button",onClick:G,"aria-label":"toggle password visibility",children:f?t.jsx(d,{icon:P,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"}):t.jsx(d,{icon:R,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})}),type:f?"text":"password"}),t.jsx(o,{name:"confirmPassword",label:"Confirm Password",variant:"bordered",className:"bg-transparent py-1 my-1",endContent:t.jsx("button",{className:"focus:outline-none",type:"button",onClick:B,"aria-label":"toggle password visibility",children:g?t.jsx(d,{icon:P,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"}):t.jsx(d,{icon:R,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})}),type:g?"text":"password",value:a.confirmPassword,onChange:e=>n({...a,confirmPassword:e.target.value}),errorMessage:r.confirmPassword,isInvalid:!!r.confirmPassword})]}),c===1&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(o,{type:"text",name:"StudentName",label:"Student First Name",variant:"bordered",className:"bg-transparent py-1 my-1",value:a.StudentFirstName,onChange:e=>n({...a,StudentFirstName:e.target.value}),errorMessage:r.StudentFirstName,isInvalid:!!r.StudentFirstName,endContent:t.jsx(d,{icon:b,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})}),t.jsx(o,{type:"text",name:"StudentName",label:"Student Last Name",variant:"bordered",className:"bg-transparent py-1 my-1",value:a.StudentLastName,onChange:e=>n({...a,StudentLastName:e.target.value}),errorMessage:r.StudentLastName,isInvalid:!!r.StudentLastName,endContent:t.jsx(d,{icon:b,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})}),t.jsx(o,{type:"text",name:"LRN",label:"LRN",variant:"bordered",className:"bg-transparent py-1 my-1",value:a.LRN,onChange:e=>n({...a,LRN:e.target.value}),errorMessage:r.LRN,isInvalid:!!r.LRN,maxLength:12,endContent:t.jsx(d,{icon:ee,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})}),t.jsx(o,{className:"pt-2",type:"date",label:"Birthday",variant:"bordered",value:a.StudentBirthday,onChange:e=>{const s=e.target.value,i=h(s);n({...a,StudentBirthday:s,StudentAge:i})},errorMessage:r.Birthday,isInvalid:!!r.Birthday}),t.jsxs(I,{label:"Gender",name:"Gender",placeholder:"Select your gender",variant:"bordered",className:"bg-transparent py-1 my-1",value:a.StudentGender,onChange:e=>n({...a,StudentGender:e.target.value}),errorMessage:r.StudentGender,isInvalid:!!r.StudentGender,children:[t.jsx(l,{disabled:!0,children:"Select Gender"},""),t.jsx(l,{children:"Male"},"Male"),t.jsx(l,{children:"Female"},"Female"),t.jsx(l,{children:"Other"},"Other")]}),t.jsx(o,{type:"text",name:"MotherTongue",label:"Mother Tongue",variant:"bordered",className:"bg-transparent py-1 my-1",value:a.MotherTongue,onChange:e=>n({...a,MotherTongue:e.target.value}),errorMessage:r.MotherTongue,isInvalid:!!r.MotherTongue,endContent:t.jsx(d,{icon:b,className:"text-xl md:text-2xl text-default-400 pointer-events-none flex-shrink-0"})})]})]}),t.jsxs(le,{className:"flex flex-col md:flex-row justify-center gap-4 mt-6",children:[t.jsx(j,{className:"w-full md:w-1/3 text-md",color:"danger",variant:"light",onClick:()=>v("/register"),children:"Cancel"}),t.jsx(j,{type:"submit",className:"w-full md:w-1/3 text-md",color:"primary",children:"Register"})]})]})})]})})};export{Se as default};
