import{j as e,L as $,r as t,U as G,a as _}from"./index-DRkmS7r_.js";import{C as W}from"./ContentHeader-CPvXrxlp.js";import{S as Q}from"./Sidebar-BFnWBLy7.js";import{l as X}from"./index-DdrcapwP.js";import{R as Y}from"./react-paginate-K3-7RgxH.js";import{P as b,F as D,d as Z,i as ee}from"./index-C-x_9WTQ.js";import{P as se,t as te,a as ae,b as r,c as le,d as re,e as i}from"./PrintRecord-rcpVOuB3.js";import{D as ie}from"./DeletePerformance-eaxCwUJP.js";import{m as ne,a as oe,b as ce,c as de,d as me}from"./chunk-P2T5LMDM-DP1sxSzz.js";import{b as S}from"./chunk-DBLREEYE-DoOwKmAJ.js";import{t as R}from"./profile-BgnaMKgd.js";import{s as T,l as a}from"./chunk-CEHIK4GH-R9Drcmk3.js";import"./useOverlayTriggerState-D8HolJQt.js";import"./useDialog-BXzugVjS.js";import"./useLabels-BnmYLgFr.js";import"./VisuallyHidden-DMHofawe.js";import"./chunk-KBN3H6OQ-E8UZ184m.js";import"./chunk-CAFRINWI-CMvs8fyY.js";import"./useField-CJb1MFo7.js";import"./chunk-CIZQCQPA-DvUsmOkq.js";import"./useFormReset-C6_kkRsk.js";const A=({show:h,onHide:n,performance:o})=>e.jsx(ne,{isOpen:h,onClose:n,"aria-labelledby":"contained-modal-title-vcenter",isDismissable:!1,isKeyboardDismissDisabled:!0,children:e.jsxs(oe,{children:[e.jsx(ce,{className:"flex flex-col",id:"edit-user-modal-title",children:"View Performance Information"}),e.jsx(de,{children:e.jsx("p",{children:"Do you want to view the performance of the student selected?"})}),e.jsxs(me,{children:[e.jsx(S,{color:"danger",variant:"light",onClick:n,children:"Cancel"}),e.jsx($,{to:`/ViewStudentPerformance/${o==null?void 0:o.UserInputId}`,children:e.jsx(S,{color:"primary",children:"View"})})]})]})});A.propTypes={show:b.bool.isRequired,onHide:b.func.isRequired,performance:b.object};const he=()=>{const[h,n]=t.useState(!1),[o,P]=t.useState(!1),[I,k]=t.useState(!1),[w,V]=t.useState([]),[g,E]=t.useState(null),[L,M]=t.useState(0),[x]=t.useState(10),[v,y]=t.useState([]),[f,U]=t.useState(""),[u,F]=t.useState(""),N=t.useRef(null),{user:d}=t.useContext(G),[j,H]=t.useState(""),{onDownload:K}=X.useDownloadExcel({currentTableRef:N.current,filename:"Performance_List_Report",sheet:"Performance",data:w.map(({_id:s,...l})=>l)});t.useEffect(()=>{d&&d.UserID&&_.get(`/api/getTeacher/${d.UserID}`).then(s=>{H(s.data.Section)}).catch(s=>console.log(s))},[d]),t.useEffect(()=>{j&&_.get("/api/getPerformance").then(s=>{const l=s.data.filter(m=>m.Section===j);V(l),y(l)}).catch(s=>console.log(s))},[j]);const O=s=>{M(s.selected)},C=(s,l)=>{const m=s.target.value;l==="section"?U(m):l==="type"&&F(m);let c=w;f&&(c=c.filter(p=>p.Section===f)),u&&(c=c.filter(p=>p.Type===u)),y(c)},q=()=>{n(!0)},z=s=>{E(s),P(!0)},B=()=>{const s=L*x;return v.slice(s,s+x)},J=()=>Math.ceil(v.length/x);return e.jsxs("div",{className:"px-9",children:[e.jsx(se,{show:h,onHide:()=>n(!1),print:K}),e.jsx(A,{show:o,onHide:()=>P(!1),performance:g}),e.jsx(ie,{show:I,onHide:()=>k(!1),performance:g}),e.jsxs("div",{className:"content-title-header",children:[e.jsxs("div",{children:["Admin View Student Performance",e.jsx(R,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Performance Table"}),e.jsx("div",{className:"text-tiny",children:"This function will view the performance of your students in each section."})]}),children:e.jsx(D,{icon:Z,size:"1x",className:"help-icon"})})]}),e.jsx("div",{className:"generate-report",children:e.jsx(R,{showArrow:!0,content:e.jsxs("div",{className:"px-1 py-2",children:[e.jsx("div",{className:"text-small font-bold",children:"Print"}),e.jsx("div",{className:"text-tiny",children:"Generate report/Print table"})]}),children:e.jsx(D,{icon:ee,size:"1x",className:"print-icon",onClick:q})})})]}),e.jsx("div",{className:"content-container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card mt-1 border-0",children:[e.jsxs("div",{className:"flex flex-row gap-2 mb-4",children:[e.jsxs(T,{className:"w-[20%]",labelPlacement:"outside",label:"Section",variant:"bordered",defaultSelectedKeys:[""],onChange:s=>C(s,"section"),value:f,children:[e.jsx(a,{children:"Select Section"},""),e.jsx(a,{children:"Aster"},"Aster"),e.jsx(a,{children:"Camia"},"Camia"),e.jsx(a,{children:"Dahlia"},"Dahlia"),e.jsx(a,{children:"Iris"},"Iris"),e.jsx(a,{children:"Jasmin"},"Jasmin"),e.jsx(a,{children:"Orchid"},"Orchid"),e.jsx(a,{children:"Rose"},"Rose"),e.jsx(a,{children:"Tulip"},"Tulip"),e.jsx(a,{children:"SSC"},"SSC")]}),e.jsxs(T,{className:"w-[20%]",labelPlacement:"outside",label:"Type",variant:"bordered",defaultSelectedKeys:[""],onChange:s=>C(s,"type"),value:u,children:[e.jsx(a,{children:"Select Type of Assessment:"},""),e.jsx(a,{children:"Assessment 1"},"Pagbabaybay"),e.jsx(a,{children:"Assessment 2"},"Pantig"),e.jsx(a,{children:"Assessment 3"},"Salita"),e.jsx(a,{children:"Assessment 4"},"Pagbabasa")]})]}),e.jsxs("div",{className:"card-body scrollable-table scrollable-container",children:[e.jsxs(te,{ref:N,removeWrapper:!0,color:"primary",selectionMode:"single",children:[e.jsxs(ae,{children:[e.jsx(r,{children:"Input ID"}),e.jsx(r,{children:"LRN"}),e.jsx(r,{children:"Section"}),e.jsx(r,{children:"Activity Code"}),e.jsx(r,{children:"Type"}),e.jsx(r,{children:"Submitted"}),e.jsx(r,{className:"text-center",children:"Actions"})]}),e.jsx(le,{emptyContent:"No rows to display.",children:B().map(s=>e.jsxs(re,{children:[e.jsx(i,{children:s.UserInputId}),e.jsx(i,{children:s.LRN}),e.jsx(i,{children:s.Section}),e.jsx(i,{children:s.ActivityCode}),e.jsx(i,{children:s.Type}),e.jsx(i,{children:s.Result}),e.jsx(i,{className:"text-center",children:e.jsx("div",{className:"table-buttons",children:e.jsx(S,{color:"primary",onClick:()=>z(s),children:"View"})})})]},s._id))})]}),e.jsx(Y,{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",breakClassName:"break-me",pageCount:J(),marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:O,containerClassName:"pagination",activeClassName:"active"})]})]})})})})]})},Ve=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsx("div",{className:"fixed top-0 left-0 w-[15%] h-full bg-[#F5EBD6] shadow-lg",children:e.jsx(Q,{})}),e.jsxs("div",{className:"ml-[15%] w-[85%] h-full min-h-[100vh] bg-[#F2EDE3] p-[2rem] flex flex-col gap-[1.5rem]",children:[e.jsx(W,{}),e.jsx(he,{})]})]});export{Ve as default};
